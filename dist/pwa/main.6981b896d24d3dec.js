"use strict";(self.webpackChunkpwa=self.webpackChunkpwa||[]).push([[179],{58:(ys,$n,ze)=>{ze.d($n,{BH:()=>Ft,G6:()=>Gi,L:()=>st,LL:()=>$,Pz:()=>Ct,Sg:()=>Pr,UG:()=>Y,ZB:()=>we,ZR:()=>ee,aH:()=>Gt,b$:()=>Sn,eu:()=>H,hl:()=>V,jU:()=>en,m9:()=>_a,ne:()=>Es,pd:()=>Al,r3:()=>yr,ru:()=>Wt,tV:()=>J,uI:()=>Nn,vZ:()=>vs,w1:()=>qi,xO:()=>Sl,xb:()=>Qr,z$:()=>Ke,zd:()=>Ai});const Fe=function(D){const T=[];let S=0;for(let G=0;G<D.length;G++){let P=D.charCodeAt(G);P<128?T[S++]=P:P<2048?(T[S++]=P>>6|192,T[S++]=63&P|128):55296==(64512&P)&&G+1<D.length&&56320==(64512&D.charCodeAt(G+1))?(P=65536+((1023&P)<<10)+(1023&D.charCodeAt(++G)),T[S++]=P>>18|240,T[S++]=P>>12&63|128,T[S++]=P>>6&63|128,T[S++]=63&P|128):(T[S++]=P>>12|224,T[S++]=P>>6&63|128,T[S++]=63&P|128)}return T},Jt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(D,T){if(!Array.isArray(D))throw Error("encodeByteArray takes an array as a parameter");this.init_();const S=T?this.byteToCharMapWebSafe_:this.byteToCharMap_,G=[];for(let P=0;P<D.length;P+=3){const q=D[P],Le=P+1<D.length,Qe=Le?D[P+1]:0,ht=P+2<D.length,rn=ht?D[P+2]:0;let Wn=(15&Qe)<<2|rn>>6,Mt=63&rn;ht||(Mt=64,Le||(Wn=64)),G.push(S[q>>2],S[(3&q)<<4|Qe>>4],S[Wn],S[Mt])}return G.join("")},encodeString(D,T){return this.HAS_NATIVE_SUPPORT&&!T?btoa(D):this.encodeByteArray(Fe(D),T)},decodeString(D,T){return this.HAS_NATIVE_SUPPORT&&!T?atob(D):function(D){const T=[];let S=0,G=0;for(;S<D.length;){const P=D[S++];if(P<128)T[G++]=String.fromCharCode(P);else if(P>191&&P<224){const q=D[S++];T[G++]=String.fromCharCode((31&P)<<6|63&q)}else if(P>239&&P<365){const ht=((7&P)<<18|(63&D[S++])<<12|(63&D[S++])<<6|63&D[S++])-65536;T[G++]=String.fromCharCode(55296+(ht>>10)),T[G++]=String.fromCharCode(56320+(1023&ht))}else{const q=D[S++],Le=D[S++];T[G++]=String.fromCharCode((15&P)<<12|(63&q)<<6|63&Le)}}return T.join("")}(this.decodeStringToByteArray(D,T))},decodeStringToByteArray(D,T){this.init_();const S=T?this.charToByteMapWebSafe_:this.charToByteMap_,G=[];for(let P=0;P<D.length;){const q=S[D.charAt(P++)],Qe=P<D.length?S[D.charAt(P)]:0;++P;const rn=P<D.length?S[D.charAt(P)]:64;++P;const be=P<D.length?S[D.charAt(P)]:64;if(++P,null==q||null==Qe||null==rn||null==be)throw new dn;G.push(q<<2|Qe>>4),64!==rn&&(G.push(Qe<<4&240|rn>>2),64!==be&&G.push(rn<<6&192|be))}return G},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let D=0;D<this.ENCODED_VALS.length;D++)this.byteToCharMap_[D]=this.ENCODED_VALS.charAt(D),this.charToByteMap_[this.byteToCharMap_[D]]=D,this.byteToCharMapWebSafe_[D]=this.ENCODED_VALS_WEBSAFE.charAt(D),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[D]]=D,D>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(D)]=D,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(D)]=D)}}};class dn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const st=function(D){return function(D){const T=Fe(D);return Jt.encodeByteArray(T,!0)}(D).replace(/\./g,"")},J=function(D){try{return Jt.decodeString(D,!0)}catch(T){console.error("base64Decode failed: ",T)}return null};function we(D,T){if(!(T instanceof Object))return T;switch(T.constructor){case Date:return new Date(T.getTime());case Object:void 0===D&&(D={});break;case Array:D=[];break;default:return T}for(const S in T)!T.hasOwnProperty(S)||!nt(S)||(D[S]=we(D[S],T[S]));return D}function nt(D){return"__proto__"!==D}const Ze=()=>{try{return function Et(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const D=process.env.__FIREBASE_DEFAULTS__;return D?JSON.parse(D):void 0})()||(()=>{if(typeof document>"u")return;let D;try{D=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const T=D&&J(D[1]);return T&&JSON.parse(T)})()}catch(D){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${D}`)}},Gt=()=>{var D;return null===(D=Ze())||void 0===D?void 0:D.config},Ct=D=>{var T;return null===(T=Ze())||void 0===T?void 0:T[`_${D}`]};class Ft{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((T,S)=>{this.resolve=T,this.reject=S})}wrapCallback(T){return(S,G)=>{S?this.reject(S):this.resolve(G),"function"==typeof T&&(this.promise.catch(()=>{}),1===T.length?T(S):T(S,G))}}}function Pr(D,T){if(D.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const G=T||"demo-project",P=D.iat||0,q=D.sub||D.user_id;if(!q)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Le=Object.assign({iss:`https://securetoken.google.com/${G}`,aud:G,iat:P,exp:P+3600,auth_time:P,sub:q,user_id:q,firebase:{sign_in_provider:"custom",identities:{}}},D);return[st(JSON.stringify({alg:"none",type:"JWT"})),st(JSON.stringify(Le)),""].join(".")}function Ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Nn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function Y(){var D;const T=null===(D=Ze())||void 0===D?void 0:D.forceEnvironment;if("node"===T)return!0;if("browser"===T)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function en(){return"object"==typeof self&&self.self===self}function Wt(){const D="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof D&&void 0!==D.id}function Sn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function qi(){const D=Ke();return D.indexOf("MSIE ")>=0||D.indexOf("Trident/")>=0}function Gi(){return!Y()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V(){try{return"object"==typeof indexedDB}catch{return!1}}function H(){return new Promise((D,T)=>{try{let S=!0;const G="validate-browser-context-for-indexeddb-analytics-module",P=self.indexedDB.open(G);P.onsuccess=()=>{P.result.close(),S||self.indexedDB.deleteDatabase(G),D(!0)},P.onupgradeneeded=()=>{S=!1},P.onerror=()=>{var q;T((null===(q=P.error)||void 0===q?void 0:q.message)||"")}}catch(S){T(S)}})}class ee extends Error{constructor(T,S,G){super(S),this.code=T,this.customData=G,this.name="FirebaseError",Object.setPrototypeOf(this,ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$.prototype.create)}}class ${constructor(T,S,G){this.service=T,this.serviceName=S,this.errors=G}create(T,...S){const G=S[0]||{},P=`${this.service}/${T}`,q=this.errors[T],Le=q?function fe(D,T){return D.replace(dt,(S,G)=>{const P=T[G];return null!=P?String(P):`<${G}?>`})}(q,G):"Error";return new ee(P,`${this.serviceName}: ${Le} (${P}).`,G)}}const dt=/\{\$([^}]+)}/g;function yr(D,T){return Object.prototype.hasOwnProperty.call(D,T)}function Qr(D){for(const T in D)if(Object.prototype.hasOwnProperty.call(D,T))return!1;return!0}function vs(D,T){if(D===T)return!0;const S=Object.keys(D),G=Object.keys(T);for(const P of S){if(!G.includes(P))return!1;const q=D[P],Le=T[P];if(nn(q)&&nn(Le)){if(!vs(q,Le))return!1}else if(q!==Le)return!1}for(const P of G)if(!S.includes(P))return!1;return!0}function nn(D){return null!==D&&"object"==typeof D}function Sl(D){const T=[];for(const[S,G]of Object.entries(D))Array.isArray(G)?G.forEach(P=>{T.push(encodeURIComponent(S)+"="+encodeURIComponent(P))}):T.push(encodeURIComponent(S)+"="+encodeURIComponent(G));return T.length?"&"+T.join("&"):""}function Ai(D){const T={};return D.replace(/^\?/,"").split("&").forEach(G=>{if(G){const[P,q]=G.split("=");T[decodeURIComponent(P)]=decodeURIComponent(q)}}),T}function Al(D){const T=D.indexOf("?");if(!T)return"";const S=D.indexOf("#",T);return D.substring(T,S>0?S:void 0)}function Es(D,T){const S=new Ls(D,T);return S.subscribe.bind(S)}class Ls{constructor(T,S){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=S,this.task.then(()=>{T(this)}).catch(G=>{this.error(G)})}next(T){this.forEachObserver(S=>{S.next(T)})}error(T){this.forEachObserver(S=>{S.error(T)}),this.close(T)}complete(){this.forEachObserver(T=>{T.complete()}),this.close()}subscribe(T,S,G){let P;if(void 0===T&&void 0===S&&void 0===G)throw new Error("Missing Observer.");P=function Ro(D,T){if("object"!=typeof D||null===D)return!1;for(const S of T)if(S in D&&"function"==typeof D[S])return!0;return!1}(T,["next","error","complete"])?T:{next:T,error:S,complete:G},void 0===P.next&&(P.next=Lt),void 0===P.error&&(P.error=Lt),void 0===P.complete&&(P.complete=Lt);const q=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?P.error(this.finalError):P.complete()}catch{}}),this.observers.push(P),q}unsubscribeOne(T){void 0===this.observers||void 0===this.observers[T]||(delete this.observers[T],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(T){if(!this.finalized)for(let S=0;S<this.observers.length;S++)this.sendOne(S,T)}sendOne(T,S){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[T])try{S(this.observers[T])}catch(G){typeof console<"u"&&console.error&&console.error(G)}})}close(T){this.finalized||(this.finalized=!0,void 0!==T&&(this.finalError=T),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Lt(){}function _a(D){return D&&D._delegate?D._delegate:D}},455:(ys,$n,ze)=>{function w(n){return"function"==typeof n}function Oe(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const z=Oe(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Fe(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class gt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(w(r))try{r()}catch(s){e=s instanceof z?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Hn(s)}catch(o){e=e??[],o instanceof z?e=[...e,...o.errors]:e.push(o)}}if(e)throw new z(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Hn(e);else{if(e instanceof gt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Fe(t,e)}remove(e){const{_finalizers:t}=this;t&&Fe(t,e),e instanceof gt&&e._removeParent(this)}}gt.EMPTY=(()=>{const n=new gt;return n.closed=!0,n})();const Jt=gt.EMPTY;function dn(n){return n instanceof gt||n&&"closed"in n&&w(n.remove)&&w(n.add)&&w(n.unsubscribe)}function Hn(n){w(n)?n():n.unsubscribe()}const st={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},J={setTimeout(n,e,...t){const{delegate:r}=J;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=J;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ae(n){J.setTimeout(()=>{const{onUnhandledError:e}=st;if(!e)throw n;e(n)})}function we(){}const nt=It("C",void 0,void 0);function It(n,e,t){return{kind:n,value:e,error:t}}let Ue=null;function Ze(n){if(st.useDeprecatedSynchronousErrorHandling){const e=!Ue;if(e&&(Ue={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Ue;if(Ue=null,t)throw r}}else n()}class Gn extends gt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,dn(e)&&e.add(this)):this.destination=en}static create(e,t,r){return new Pr(e,t,r)}next(e){this.isStopped?Y(function zn(n){return It("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Y(function Et(n){return It("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Y(nt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Gt=Function.prototype.bind;function Ct(n,e){return Gt.call(n,e)}class Ft{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ke(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ke(r)}else Ke(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ke(t)}}}class Pr extends Gn{constructor(e,t,r){let i;if(super(),w(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&st.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ct(e.next,s),error:e.error&&Ct(e.error,s),complete:e.complete&&Ct(e.complete,s)}):i=e}this.destination=new Ft(i)}}function Ke(n){st.useDeprecatedSynchronousErrorHandling?function qn(n){st.useDeprecatedSynchronousErrorHandling&&Ue&&(Ue.errorThrown=!0,Ue.error=n)}(n):ae(n)}function Y(n,e){const{onStoppedNotification:t}=st;t&&J.setTimeout(()=>t(n,e))}const en={closed:!0,next:we,error:function Nn(n){throw n},complete:we},Wt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Sn(n){return n}function qi(n){return 0===n.length?Sn:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Je=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function V(n){return n&&n instanceof Gn||function Gi(n){return n&&w(n.next)&&w(n.error)&&w(n.complete)}(n)&&dn(n)}(t)?t:new Pr(t,r,i);return Ze(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=xo(r))((i,s)=>{const o=new Pr({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Wt](){return this}pipe(...t){return qi(t)(this)}toPromise(t){return new(t=xo(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function xo(n){var e;return null!==(e=n??st.Promise)&&void 0!==e?e:Promise}const H=Oe(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let j=(()=>{class n extends Je{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new W(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new H}next(t){Ze(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Ze(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ze(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Jt:(this.currentObservers=null,s.push(t),new gt(()=>{this.currentObservers=null,Fe(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Je;return t.source=this,t}}return n.create=(e,t)=>new W(e,t),n})();class W extends j{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Jt}}function ee(n){return w(n?.lift)}function $(n){return e=>{if(ee(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(n,e,t,r,i){return new dt(n,e,t,r,i)}class dt extends Gn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function _e(n,e){return $((t,r)=>{let i=0;t.subscribe(fe(r,s=>{r.next(n.call(e,s,i++))}))})}var De=ze(582);const pt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function tn(n){return w(n?.then)}function Ut(n){return w(n[Wt])}function ir(n){return Symbol.asyncIterator&&w(n?.[Symbol.asyncIterator])}function kn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Nr=function yr(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Qr(n){return w(n?.[Nr])}function Dl(n){return(0,De.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,De.qq)(t.read());if(i)return yield(0,De.qq)(void 0);yield yield(0,De.qq)(r)}}finally{t.releaseLock()}})}function vs(n){return w(n?.getReader)}function nn(n){if(n instanceof Je)return n;if(null!=n){if(Ut(n))return function ha(n){return new Je(e=>{const t=n[Wt]();if(w(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(pt(n))return function Sl(n){return new Je(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(tn(n))return function Ai(n){return new Je(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ae)})}(n);if(ir(n))return kr(n);if(Qr(n))return function Al(n){return new Je(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(vs(n))return function Es(n){return kr(Dl(n))}(n)}throw kn(n)}function kr(n){return new Je(e=>{(function Ls(n,e){var t,r,i,s;return(0,De.mG)(this,void 0,void 0,function*(){try{for(t=(0,De.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function sr(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Lt(n,e,t=1/0){return w(e)?Lt((r,i)=>_e((s,o)=>e(r,s,i,o))(nn(n(r,i))),t):("number"==typeof e&&(t=e),$((r,i)=>function Ro(n,e,t,r,i,s,o,a){const l=[];let u=0,h=0,m=!1;const g=()=>{m&&!l.length&&!u&&e.complete()},y=b=>u<r?E(b):l.push(b),E=b=>{s&&e.next(b),u++;let C=!1;nn(t(b,h++)).subscribe(fe(e,N=>{i?.(N),s?y(N):e.next(N)},()=>{C=!0},void 0,()=>{if(C)try{for(u--;l.length&&u<r;){const N=l.shift();o?sr(e,o,()=>E(N)):E(N)}g()}catch(N){e.error(N)}}))};return n.subscribe(fe(e,y,()=>{m=!0,g()})),()=>{a?.()}}(r,i,n,t)))}function xi(n=1/0){return Lt(Sn,n)}const On=new Je(n=>n.complete());function Yr(n){return n&&w(n.schedule)}function Vs(n){return n[n.length-1]}function pa(n){return w(Vs(n))?n.pop():void 0}function Bs(n){return Yr(Vs(n))?n.pop():void 0}function vr(n,e=0){return $((t,r)=>{t.subscribe(fe(r,i=>sr(r,n,()=>r.next(i),e),()=>sr(r,n,()=>r.complete(),e),i=>sr(r,n,()=>r.error(i),e)))})}function Or(n,e=0){return $((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function _a(n,e){if(!n)throw new Error("Iterable cannot be null");return new Je(t=>{sr(t,e,()=>{const r=n[Symbol.asyncIterator]();sr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function S(n,e){return e?function T(n,e){if(null!=n){if(Ut(n))return function Us(n,e){return nn(n).pipe(Or(e),vr(e))}(n,e);if(pt(n))return function uu(n,e){return new Je(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(tn(n))return function ga(n,e){return nn(n).pipe(Or(e),vr(e))}(n,e);if(ir(n))return _a(n,e);if(Qr(n))return function xl(n,e){return new Je(t=>{let r;return sr(t,e,()=>{r=n[Nr](),sr(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>w(r?.return)&&r.return()})}(n,e);if(vs(n))return function D(n,e){return _a(Dl(n),e)}(n,e)}throw kn(n)}(n,e):nn(n)}function G(...n){const e=Bs(n),t=function ma(n,e){return"number"==typeof Vs(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?nn(r[0]):xi(t)(S(r,e)):On}class P extends j{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function q(...n){return S(n,Bs(n))}function Le(n={}){const{connector:e=(()=>new j),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,u=0,h=!1,m=!1;const g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),o=l=void 0,h=m=!1},E=()=>{const b=o;y(),b?.unsubscribe()};return $((b,C)=>{u++,!m&&!h&&g();const N=l=l??e();C.add(()=>{u--,0===u&&!m&&!h&&(a=Qe(E,i))}),N.subscribe(C),!o&&u>0&&(o=new Pr({next:R=>N.next(R),error:R=>{m=!0,g(),a=Qe(y,t,R),N.error(R)},complete:()=>{h=!0,g(),a=Qe(y,r),N.complete()}}),nn(b).subscribe(o))})(s)}}function Qe(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Pr({next:()=>{r.unsubscribe(),n()}});return nn(e(...t)).subscribe(r)}function ht(n,e){return $((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(fe(r,l=>{i?.unsubscribe();let u=0;const h=s++;nn(n(l,h)).subscribe(i=fe(r,m=>r.next(e?e(l,m,h,u++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function rn(n,e=Sn){return n=n??Fn,$((t,r)=>{let i,s=!0;t.subscribe(fe(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Fn(n,e){return n===e}function be(n){for(let e in n)if(n[e]===be)return e;throw Error("Could not find renamed property on target object.")}function Wn(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Mt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Mt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Wi(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const du=be({__forward_ref__:be});function F(n){return n.__forward_ref__=F,n.toString=function(){return Mt(this())},n}function x(n){return ie(n)?n():n}function ie(n){return"function"==typeof n&&n.hasOwnProperty(du)&&n.__forward_ref__===F}function Ie(n){return n&&!!n.\u0275providers}class k extends Error{constructor(e,t){super(function hn(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Ce(n){return"string"==typeof n?n:null==n?"":String(n)}function Rl(n,e){throw new k(-201,!1)}function Fr(n,e){null==n&&function Me(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function ye(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function jt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ml(n){return Gh(n,Pl)||Gh(n,Fg)}function Gh(n,e){return n.hasOwnProperty(e)?n[e]:null}function ws(n){return n&&(n.hasOwnProperty(Nl)||n.hasOwnProperty(Wh))?n[Nl]:null}const Pl=be({\u0275prov:be}),Nl=be({\u0275inj:be}),Fg=be({ngInjectableDef:be}),Wh=be({ngInjectorDef:be});var at=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(at||{});let kl;function or(n){const e=kl;return kl=n,e}function Vg(n,e,t){const r=Ml(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&at.Optional?null:void 0!==e?e:void Rl(Mt(n))}const Dt=globalThis;class se{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ye({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Jr={},Vl="__NG_DI_FLAG__",fu="ngTempTokenPath",nb=/\n/gm,zg="__source";let $s;function Ki(n){const e=$s;return $s=n,e}function ib(n,e=at.Default){if(void 0===$s)throw new k(-203,!1);return null===$s?Vg(n,void 0,e):$s.get(n,e&at.Optional?null:void 0,e)}function ne(n,e=at.Default){return(function Lg(){return kl}()||ib)(x(n),e)}function me(n,e=at.Default){return ne(n,mu(e))}function mu(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Qh(n){const e=[];for(let t=0;t<n.length;t++){const r=x(n[t]);if(Array.isArray(r)){if(0===r.length)throw new k(900,!1);let i,s=at.Default;for(let o=0;o<r.length;o++){const a=r[o],l=kx(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(ne(i,s))}else e.push(ne(r))}return e}function bs(n,e){return n[Vl]=e,n.prototype[Vl]=e,n}function kx(n){return n[Vl]}function Lr(n){return{toString:n}.toString()}var Cs=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Cs||{}),ei=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ei||{});const Ri={},_t=[],gu=be({\u0275cmp:be}),Hs=be({\u0275dir:be}),Xh=be({\u0275pipe:be}),Bl=be({\u0275mod:be}),Qi=be({\u0275fac:be}),va=be({__NG_ELEMENT_ID__:be}),_u=be({__NG_ENV_ID__:be});function ti(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function yu(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];vu(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function qg(n){return 3===n||4===n||6===n}function vu(n){return 64===n.charCodeAt(0)}function zs(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Jh(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Jh(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const ef="ng-template";function sb(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==ti(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Eu(n){return 4===n.type&&n.value!==ef}function tf(n,e,t){return e===(4!==n.type||t?n.value:ef)}function nf(n,e,t){let r=4;const i=n.attrs||[],s=function Gg(n){for(let e=0;e<n.length;e++)if(qg(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!tf(n,l,t)||""===l&&1===e.length){if(Vr(r))return!1;o=!0}}else{const u=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!sb(n.attrs,u,t)){if(Vr(r))return!1;o=!0}continue}const m=rf(8&r?"class":l,i,Eu(n),t);if(-1===m){if(Vr(r))return!1;o=!0;continue}if(""!==u){let g;g=m>s?"":i[m+1].toLowerCase();const y=8&r?g:null;if(y&&-1!==ti(y,u,0)||2&r&&u!==g){if(Vr(r))return!1;o=!0}}}}else{if(!o&&!Vr(r)&&!Vr(l))return!1;if(o&&Vr(l))continue;o=!1,r=l|1&r}}return Vr(r)||o}function Vr(n){return 0==(1&n)}function rf(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function lf(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function sf(n,e,t=!1){for(let r=0;r<e.length;r++)if(nf(n,e[r],t))return!0;return!1}function wu(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function bu(n,e){return n?":not("+e.trim()+")":e}function Wg(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Vr(o)&&(e+=bu(s,i),i=""),r=o,s=s||!Vr(r);t++}return""!==i&&(e+=bu(s,i)),e}function ar(n){return Lr(()=>{const e=Cu(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Cs.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ei.Emulated,styles:n.styles||_t,_:null,schemas:n.schemas||null,tView:null,id:""};Kg(t);const r=n.dependencies;return t.directiveDefs=Ea(r,!1),t.pipeDefs=Ea(r,!0),t.id=function df(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function uf(n){return lt(n)||An(n)}function ab(n){return null!==n}function $t(n){return Lr(()=>({type:n.type,bootstrap:n.bootstrap||_t,declarations:n.declarations||_t,imports:n.imports||_t,exports:n.exports||_t,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Iu(n,e){if(null==n)return Ri;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function ce(n){return Lr(()=>{const e=Cu(n);return Kg(e),e})}function Zn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function lt(n){return n[gu]||null}function An(n){return n[Hs]||null}function Er(n){return n[Xh]||null}function ni(n,e){const t=n[Bl]||null;if(!t&&!0===e)throw new Error(`Type ${Mt(n)} does not have '\u0275mod' property.`);return t}function Cu(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ri,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||_t,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Iu(n.inputs,e),outputs:Iu(n.outputs)}}function Kg(n){n.features?.forEach(e=>e(n))}function Ea(n,e){if(!n)return null;const t=e?Er:uf;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(ab)}const fn=0,pe=1,qe=2,Vt=3,Mi=4,jl=5,Ln=6,wa=7,yn=8,Yi=9,ba=10,Ve=11,$l=12,Tu=13,Ia=14,sn=15,Hl=16,Gs=17,Xi=18,Mo=19,Yg=20,Ji=21,Ts=22,zl=23,Ca=24,et=25,Ws=1,hf=2,es=7,Ta=9,Kn=11;function ri(n){return Array.isArray(n)&&"object"==typeof n[Ws]}function Br(n){return Array.isArray(n)&&!0===n[Ws]}function Gl(n){return 0!=(4&n.flags)}function Po(n){return n.componentOffset>-1}function Su(n){return 1==(1&n.flags)}function ts(n){return!!n.template}function Xg(n){return 0!=(512&n[qe])}function ns(n,e){return n.hasOwnProperty(Qi)?n[Qi]:null}let Qn=null,Zs=!1;function _i(n){const e=Qn;return Qn=n,e}const vn={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Au(n){if(!Qs(n)||n.dirty){if(!n.producerMustRecompute(n)&&!o_(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function s_(n){n.dirty=!0,function i_(n){if(void 0===n.liveConsumerNode)return;const e=Zs;Zs=!0;try{for(const t of n.liveConsumerNode)t.dirty||s_(t)}finally{Zs=e}}(n),n.consumerMarkedDirty?.(n)}function gf(n){return n&&(n.nextProducerIndex=0),_i(n)}function xu(n,e){if(_i(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Qs(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ks(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function o_(n){Sa(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Au(t),r!==t.version))return!0}return!1}function Zl(n){if(Sa(n),Qs(n))for(let e=0;e<n.producerNode.length;e++)Ks(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Ks(n,e){if(function Ru(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Sa(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Ks(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Sa(i),i.producerIndexOfThis[r]=e}}function Qs(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Sa(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let c_=null;const h_=()=>{},pb=(()=>({...vn,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:h_}))();class mb{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function lr(){return f_}function f_(n){return n.type.prototype.ngOnChanges&&(n.setInput=_b),gb}function gb(){const n=p_(this),e=n?.current;if(e){const t=n.previous;if(t===Ri)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function _b(n,e,t,r){const i=this.declaredInputs[t],s=p_(n)||function Ef(n,e){return n[Pu]=e}(n,{previous:Ri,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new mb(l&&l.currentValue,e,a===Ri),n[r]=e}lr.ngInherit=!0;const Pu="__ngSimpleChanges__";function p_(n){return n[Pu]||null}const rs=function(n,e,t){};function Rt(n){for(;Array.isArray(n);)n=n[fn];return n}function xa(n,e){return Rt(e[n])}function Vn(n,e){return Rt(e[n.index])}function ku(n,e){return n.data[e]}function Ra(n,e){return n[e]}function ii(n,e){const t=e[n];return ri(t)?t:t[fn]}function Ys(n,e){return null==e?null:n[e]}function g_(n){n[Gs]=0}function Tf(n){1024&n[qe]||(n[qe]|=1024,Ou(n,1))}function __(n){1024&n[qe]&&(n[qe]&=-1025,Ou(n,-1))}function Ou(n,e){let t=n[Vt];if(null===t)return;t[jl]+=e;let r=t;for(t=t[Vt];null!==t&&(1===e&&1===r[jl]||-1===e&&0===r[jl]);)t[jl]+=e,r=t,t=t[Vt]}const Ne={lFrame:C_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Lu(){return Ne.bindingsEnabled}function Xs(){return null!==Ne.skipHydrationRootTNode}function te(){return Ne.lFrame.lView}function ct(){return Ne.lFrame.tView}function is(n){return Ne.lFrame.contextLView=n,n[yn]}function ss(n){return Ne.lFrame.contextLView=null,n}function xn(){let n=b_();for(;null!==n&&64===n.type;)n=n.parent;return n}function b_(){return Ne.lFrame.currentTNode}function yi(n,e){const t=Ne.lFrame;t.currentTNode=n,t.isParent=e}function xf(){return Ne.lFrame.isParent}function Xl(){Ne.lFrame.isParent=!1}function Fo(){return Ne.lFrame.bindingIndex++}function Nf(n,e){const t=Ne.lFrame;t.bindingIndex=t.bindingRootIndex=n,kf(e)}function kf(n){Ne.lFrame.currentDirectiveIndex=n}function Bu(){return Ne.lFrame.currentQueryIndex}function Ff(n){Ne.lFrame.currentQueryIndex=n}function Tb(n){const e=n[pe];return 2===e.type?e.declTNode:1===e.type?n[Ln]:null}function Lf(n,e,t){if(t&at.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&at.Host||(i=Tb(s),null===i||(s=s[Ia],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Ne.lFrame=Jl();return r.currentTNode=e,r.lView=n,!0}function Vf(n){const e=Jl(),t=n[pe];Ne.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Jl(){const n=Ne.lFrame,e=null===n?null:n.child;return null===e?C_(n):e}function C_(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function T_(){const n=Ne.lFrame;return Ne.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const D_=T_;function Bf(){const n=T_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function wr(){return Ne.lFrame.selectedIndex}function Lo(n){Ne.lFrame.selectedIndex=n}let Uf=!0;function Uu(){return Uf}function Js(n){Uf=n}function ju(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function $u(n,e,t){A_(n,e,3,t)}function Ma(n,e,t,r){(3&n[qe])===t&&A_(n,e,t,r)}function ec(n,e){let t=n[qe];(3&t)===e&&(t&=8191,t+=1,n[qe]=t)}function A_(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[Gs]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[Gs]+=65536),(a<s||-1==s)&&(Nb(n,t,e,l),n[Gs]=(4294901760&n[Gs])+l+2),l++}function Hu(n,e){rs(4,n,e);const t=_i(null);try{e.call(n)}finally{_i(t),rs(5,n,e)}}function Nb(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[qe]>>13<n[Gs]>>16&&(3&n[qe])===e&&(n[qe]+=8192,Hu(a,s)):Hu(a,s)}const Vo=-1;class tc{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function $f(n){return n!==Vo}function nc(n){return 32767&n}function rc(n,e){let t=function Fb(n){return n>>16}(n),r=e;for(;t>0;)r=r[Ia],t--;return r}let Hf=!0;function ic(n){const e=Hf;return Hf=n,e}const Lb=255,eo=5;let Vb=0;const as={};function qu(n,e){const t=P_(n,e);if(-1!==t)return t;const r=e[pe];r.firstCreatePass&&(n.injectorIndex=e.length,sc(r.data,n),sc(e,null),sc(r.blueprint,null));const i=Gu(n,e),s=n.injectorIndex;if($f(i)){const o=nc(i),a=rc(i,e),l=a[pe].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=i,s}function sc(n,e){n.push(0,0,0,0,0,0,0,0,e)}function P_(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Gu(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=V_(i),null===r)return Vo;if(t++,i=i[Ia],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Vo}function oc(n,e,t){!function zf(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(va)&&(r=t[va]),null==r&&(r=t[va]=Vb++);const i=r&Lb;e.data[n+(i>>eo)]|=1<<i}(n,e,t)}function N_(n,e,t){if(t&at.Optional||void 0!==n)return n;Rl()}function Wu(n,e,t,r){if(t&at.Optional&&void 0===r&&(r=null),!(t&(at.Self|at.Host))){const i=n[Yi],s=or(void 0);try{return i?i.get(e,r,t&at.Optional):Vg(e,r,t&at.Optional)}finally{or(s)}}return N_(r,0,t)}function k_(n,e,t,r=at.Default,i){if(null!==n){if(2048&e[qe]&&!(r&at.Self)){const o=function $b(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[qe]&&!(512&o[qe]);){const a=O_(s,o,t,r|at.Self,as);if(a!==as)return a;let l=s.parent;if(!l){const u=o[Yg];if(u){const h=u.get(t,as,r);if(h!==as)return h}l=V_(o),o=o[Ia]}s=l}return i}(n,e,t,r,as);if(o!==as)return o}const s=O_(n,e,t,r,as);if(s!==as)return s}return Wu(e,t,r,i)}function O_(n,e,t,r,i){const s=function F_(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(va)?n[va]:void 0;return"number"==typeof e?e>=0?e&Lb:jb:e}(t);if("function"==typeof s){if(!Lf(e,n,r))return r&at.Host?N_(i,0,r):Wu(e,t,r,i);try{let o;if(o=s(r),null!=o||r&at.Optional)return o;Rl()}finally{D_()}}else if("number"==typeof s){let o=null,a=P_(n,e),l=Vo,u=r&at.Host?e[sn][Ln]:null;for((-1===a||r&at.SkipSelf)&&(l=-1===a?Gu(n,e):e[a+8],l!==Vo&&L_(r,!1)?(o=e[pe],a=nc(l),e=rc(l,e)):a=-1);-1!==a;){const h=e[pe];if(Ku(s,a,h.data)){const m=Ub(a,e,t,o,r,u);if(m!==as)return m}l=e[a+8],l!==Vo&&L_(r,e[pe].data[a+8]===u)&&Ku(s,a,e)?(o=h,a=nc(l),e=rc(l,e)):a=-1}}return i}function Ub(n,e,t,r,i,s){const o=e[pe],a=o.data[n+8],h=Zu(a,o,t,null==r?Po(a)&&Hf:r!=o&&0!=(3&a.type),i&at.Host&&s===a);return null!==h?Bo(e,o,h,a):as}function Zu(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,h=s>>20,g=i?a+h:n.directiveEnd;for(let y=r?a:a+h;y<g;y++){const E=o[y];if(y<l&&t===E||y>=l&&E.type===t)return y}if(i){const y=o[l];if(y&&ts(y)&&y.type===t)return l}return null}function Bo(n,e,t,r){let i=n[t];const s=e.data;if(function jf(n){return n instanceof tc}(i)){const o=i;o.resolving&&function ya(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new k(-200,`Circular dependency in DI detected for ${n}${t}`)}(function rt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ce(n)}(s[t]));const a=ic(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?or(o.injectImpl):null;Lf(n,r,at.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function Pb(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=f_(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==u&&or(u),ic(a),o.resolving=!1,D_()}}return i}function Ku(n,e,t){return!!(t[e+(n>>eo)]&1<<n)}function L_(n,e){return!(n&at.Self||n&at.Host&&e)}class Xn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return k_(this._tNode,this._lView,e,mu(r),t)}}function jb(){return new Xn(xn(),te())}function yt(n){return Lr(()=>{const e=n.prototype.constructor,t=e[Qi]||Pa(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Qi]||Pa(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Pa(n){return ie(n)?()=>{const e=Pa(x(n));return e&&e()}:ns(n)}function V_(n){const e=n[pe],t=e.type;return 2===t?e.declTNode:1===t?n[Ln]:null}const Na="__parameters__";function ls(n,e,t){return Lr(()=>{const r=function Gf(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,u,h){const m=l.hasOwnProperty(Na)?l[Na]:Object.defineProperty(l,Na,{value:[]})[Na];for(;m.length<=h;)m.push(null);return(m[h]=m[h]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Oa(n,e){n.forEach(t=>Array.isArray(t)?Oa(t,e):e(t))}function Qu(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Fa(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function uc(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function oi(n,e,t){let r=La(n,e);return r>=0?n[1|r]=t:(r=~r,function no(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Wf(n,e){const t=La(n,e);if(t>=0)return n[1|t]}function La(n,e){return function br(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const hc=bs(ls("Optional"),8),Ju=bs(ls("SkipSelf"),4);function Y_(n){return 128==(128&n.flags)}var Ba=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ba||{});const vH=/^>|^->|<!--|-->|--!>|<!-$/g,EH=/(<|>)/g,wH="\u200b$1\u200b";const eI=new Map;let bH=0;const nI="__ngContext__";function Ur(n,e){ri(e)?(n[nI]=e[Mo],function CH(n){eI.set(n[Mo],n)}(e)):n[nI]=e}let rI;function iI(n,e){return rI(n,e)}function ep(n){const e=n[Vt];return Br(e)?e[Vt]:e}function wR(n){return IR(n[$l])}function bR(n){return IR(n[Mi])}function IR(n){for(;null!==n&&!Br(n);)n=n[Mi];return n}function rd(n,e,t,r,i){if(null!=r){let s,o=!1;Br(r)?s=r:ri(r)&&(o=!0,r=r[fn]);const a=Rt(r);0===n&&null!==t?null==i?SR(e,t,a):pc(e,t,a,i||null,!0):1===n&&null!==t?pc(e,t,a,i||null,!0):2===n?function iy(n,e,t){const r=ny(n,e);r&&function HH(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function GH(n,e,t,r,i){const s=t[es];s!==Rt(t)&&rd(e,n,r,s,i);for(let a=Kn;a<t.length;a++){const l=t[a];np(l[pe],l,n,e,r,s)}}(e,n,s,t,i)}}function sI(n,e){return n.createComment(function fR(n){return n.replace(vH,e=>e.replace(EH,wH))}(e))}function ey(n,e,t){return n.createElement(e,t)}function TR(n,e){const t=n[Ta],r=t.indexOf(e);__(e),t.splice(r,1)}function ty(n,e){if(n.length<=Kn)return;const t=Kn+e,r=n[t];if(r){const i=r[Hl];null!==i&&i!==n&&TR(i,r),e>0&&(n[t-1][Mi]=r[Mi]);const s=Fa(n,Kn+e);!function OH(n,e){np(n,e,e[Ve],2,null,null),e[fn]=null,e[Ln]=null}(r[pe],r);const o=s[Xi];null!==o&&o.detachView(s[pe]),r[Vt]=null,r[Mi]=null,r[qe]&=-129}return r}function oI(n,e){if(!(256&e[qe])){const t=e[Ve];e[zl]&&Zl(e[zl]),e[Ca]&&Zl(e[Ca]),t.destroyNode&&np(n,e,t,3,null,null),function VH(n){let e=n[$l];if(!e)return aI(n[pe],n);for(;e;){let t=null;if(ri(e))t=e[$l];else{const r=e[Kn];r&&(t=r)}if(!t){for(;e&&!e[Mi]&&e!==n;)ri(e)&&aI(e[pe],e),e=e[Vt];null===e&&(e=n),ri(e)&&aI(e[pe],e),t=e&&e[Mi]}e=t}}(e)}}function aI(n,e){if(!(256&e[qe])){e[qe]&=-129,e[qe]|=256,function $H(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof tc)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];rs(4,a,l);try{l.call(a)}finally{rs(5,a,l)}}else{rs(4,i,s);try{s.call(i)}finally{rs(5,i,s)}}}}}(n,e),function jH(n,e){const t=n.cleanup,r=e[wa];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[wa]=null);const i=e[Ji];if(null!==i){e[Ji]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[pe].type&&e[Ve].destroy();const t=e[Hl];if(null!==t&&Br(e[Vt])){t!==e[Vt]&&TR(t,e);const r=e[Xi];null!==r&&r.detachView(n)}!function TH(n){eI.delete(n[Mo])}(e)}}function lI(n,e,t){return function DR(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[fn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===ei.None||s===ei.Emulated)return null}return Vn(r,t)}}(n,e.parent,t)}function pc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function SR(n,e,t){n.appendChild(e,t)}function AR(n,e,t,r,i){null!==r?pc(n,e,t,r,i):SR(n,e,t)}function ny(n,e){return n.parentNode(e)}function xR(n,e,t){return MR(n,e,t)}let cI,fI,MR=function RR(n,e,t){return 40&n.type?Vn(n,t):null};function ry(n,e,t,r){const i=lI(n,r,e),s=e[Ve],a=xR(r.parent||e[Ln],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)AR(s,i,t[l],a,!1);else AR(s,i,t,a,!1);void 0!==cI&&cI(s,r,e,t,i)}function tp(n,e){if(null!==e){const t=e.type;if(3&t)return Vn(e,n);if(4&t)return uI(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return tp(n,r);{const i=n[e.index];return Br(i)?uI(-1,i):Rt(i)}}if(32&t)return iI(e,n)()||Rt(n[e.index]);{const r=NR(n,e);return null!==r?Array.isArray(r)?r[0]:tp(ep(n[sn]),r):tp(n,e.next)}}return null}function NR(n,e){return null!==e?n[sn][Ln].projection[e.projection]:null}function uI(n,e){const t=Kn+n+1;if(t<e.length){const r=e[t],i=r[pe].firstChild;if(null!==i)return tp(r,i)}return e[es]}function dI(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&Ur(Rt(a),r),t.flags|=2),32!=(32&t.flags))if(8&l)dI(n,e,t.child,r,i,s,!1),rd(e,n,i,a,s);else if(32&l){const u=iI(t,r);let h;for(;h=u();)rd(e,n,i,h,s);rd(e,n,i,a,s)}else 16&l?OR(n,e,r,t,i,s):rd(e,n,i,a,s);t=o?t.projectionNext:t.next}}function np(n,e,t,r,i,s){dI(t,r,n.firstChild,e,i,s,!1)}function OR(n,e,t,r,i,s){const o=t[sn],l=o[Ln].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)rd(e,n,i,l[u],s);else{let u=l;const h=o[Vt];Y_(r)&&(u.flags|=128),dI(n,e,u,h,i,s,!0)}}function FR(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function LR(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&yu(n,e,r),null!==i&&FR(n,e,i),null!==s&&function ZH(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}class jR{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const op=new se("ENVIRONMENT_INITIALIZER"),YR=new se("INJECTOR",-1),XR=new se("INJECTOR_DEF_TYPES");class vI{get(e,t=Jr){if(t===Jr){const r=new Error(`NullInjectorError: No provider for ${Mt(e)}!`);throw r.name="NullInjectorError",r}return t}}function wz(...n){return{\u0275providers:JR(0,n),\u0275fromNgModule:!0}}function JR(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return Oa(e,o=>{const a=o;ly(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&eM(i,s),t}function eM(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];wI(i,s=>{e(s,r)})}}function ly(n,e,t,r){if(!(n=x(n)))return!1;let i=null,s=ws(n);const o=!s&&lt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=ws(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of l)ly(u,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{Oa(s.imports,h=>{ly(h,e,t,r)&&(u||=[],u.push(h))})}finally{}void 0!==u&&eM(u,e)}if(!a){const u=ns(i)||(()=>new i);e({provide:i,useFactory:u,deps:_t},i),e({provide:XR,useValue:i,multi:!0},i),e({provide:op,useValue:()=>ne(i),multi:!0},i)}const l=s.providers;if(null!=l&&!a){const u=n;wI(l,h=>{e(h,u)})}}}return i!==n&&void 0!==n.providers}function wI(n,e){for(let t of n)Ie(t)&&(t=t.\u0275providers),Array.isArray(t)?wI(t,e):e(t)}const bz=be({provide:String,useValue:be});function bI(n){return null!==n&&"object"==typeof n&&bz in n}function mc(n){return"function"==typeof n}const II=new se("Set Injector scope."),cy={},Cz={};let CI;function uy(){return void 0===CI&&(CI=new vI),CI}class cs{}class ad extends cs{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,DI(e,o=>this.processProvider(o)),this.records.set(YR,ld(void 0,this)),i.has("environment")&&this.records.set(cs,ld(void 0,this));const s=this.records.get(II);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(XR.multi,_t,at.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Ki(this),r=or(void 0);try{return e()}finally{Ki(t),or(r)}}get(e,t=Jr,r=at.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(_u))return e[_u](this);r=mu(r);const s=Ki(this),o=or(void 0);try{if(!(r&at.SkipSelf)){let l=this.records.get(e);if(void 0===l){const u=function xz(n){return"function"==typeof n||"object"==typeof n&&n instanceof se}(e)&&Ml(e);l=u&&this.injectableDefInScope(u)?ld(TI(e),cy):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&at.Self?uy():this.parent).get(e,t=r&at.Optional&&t===Jr?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[fu]=a[fu]||[]).unshift(Mt(e)),s)throw a;return function Yh(n,e,t,r){const i=n[fu];throw e[zg]&&i.unshift(e[zg]),n.message=function Is(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Mt(e);if(Array.isArray(e))i=e.map(Mt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Mt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(nb,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[fu]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{or(o),Ki(s)}}resolveInjectorInitializers(){const e=Ki(this),t=or(void 0);try{const i=this.get(op.multi,_t,at.Self);for(const s of i)s()}finally{Ki(e),or(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Mt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new k(205,!1)}processProvider(e){let t=mc(e=x(e))?e:x(e&&e.provide);const r=function Dz(n){return bI(n)?ld(void 0,n.useValue):ld(rM(n),cy)}(e);if(mc(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=ld(void 0,cy,!0),i.factory=()=>Qh(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===cy&&(t.value=Cz,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Az(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=x(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function TI(n){const e=Ml(n),t=null!==e?e.factory:ns(n);if(null!==t)return t;if(n instanceof se)throw new k(204,!1);if(n instanceof Function)return function Tz(n){const e=n.length;if(e>0)throw uc(e,"?"),new k(204,!1);const t=function eb(n){return n&&(n[Pl]||n[Fg])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new k(204,!1)}function rM(n,e,t){let r;if(mc(n)){const i=x(n);return ns(i)||TI(i)}if(bI(n))r=()=>x(n.useValue);else if(function nM(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Qh(n.deps||[]));else if(function tM(n){return!(!n||!n.useExisting)}(n))r=()=>ne(x(n.useExisting));else{const i=x(n&&(n.useClass||n.provide));if(!function Sz(n){return!!n.deps}(n))return ns(i)||TI(i);r=()=>new i(...Qh(n.deps))}return r}function ld(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function DI(n,e){for(const t of n)Array.isArray(t)?DI(t,e):t&&Ie(t)?DI(t.\u0275providers,e):e(t)}const dy=new se("AppId",{providedIn:"root",factory:()=>Rz}),Rz="ng",iM=new se("Platform Initializer"),us=new se("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),sM=new se("AnimationModuleType"),SI=new se("CSP nonce",{providedIn:"root",factory:()=>function sd(){if(void 0!==fI)return fI;if(typeof document<"u")return document;throw new k(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let oM=(n,e,t)=>null;function OI(n,e,t=!1){return oM(n,e,t)}class Uz{}class cM{}class $z{resolveComponentFactory(e){throw function jz(n){const e=Error(`No component factory found for ${Mt(n)}.`);return e.ngComponent=n,e}(e)}}let _y=(()=>{class n{static#e=this.NULL=new $z}return n})();function Hz(){return dd(xn(),te())}function dd(n,e){return new bn(Vn(n,e))}let bn=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=Hz}return n})();function zz(n){return n instanceof bn?n.nativeElement:n}class cp{}let $o=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function qz(){const n=te(),t=ii(xn().index,n);return(ri(t)?t:n)[Ve]}()}return n})(),Gz=(()=>{class n{static#e=this.\u0275prov=ye({token:n,providedIn:"root",factory:()=>null})}return n})();class ja{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const dM=new ja("16.2.12"),VI={};function mM(n,e=null,t=null,r){const i=gM(n,e,t,r);return i.resolveInjectorInitializers(),i}function gM(n,e=null,t=null,r,i=new Set){const s=[t||_t,wz(n)];return r=r||("object"==typeof n?void 0:Mt(n)),new ad(s,e||uy(),r||null,i)}let Ei=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Jr;static#t=this.NULL=new vI;static create(t,r){if(Array.isArray(t))return mM({name:""},r,t,"");{const i=t.name??"";return mM({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=ye({token:n,providedIn:"any",factory:()=>ne(YR)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function UI(n){return n.ngOriginalError}class Ho{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&UI(e);for(;t&&UI(t);)t=UI(t);return t||null}}function $I(n){return e=>{setTimeout(n,void 0,e)}}const mn=class Jz extends j{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=$I(s),i&&(i=$I(i)),o&&(o=$I(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof gt&&e.add(a),a}};function yM(...n){}class ut{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mn(!1),this.onMicrotaskEmpty=new mn(!1),this.onStable=new mn(!1),this.onError=new mn(!1),typeof Zone>"u")throw new k(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function e4(){const n="function"==typeof Dt.requestAnimationFrame;let e=Dt[n?"requestAnimationFrame":"setTimeout"],t=Dt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function r4(n){const e=()=>{!function n4(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Dt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,zI(n),n.isCheckStableRunning=!0,HI(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),zI(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function o4(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return vM(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),EM(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return vM(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),EM(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,zI(n),HI(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ut.isInAngularZone())throw new k(909,!1)}static assertNotInAngularZone(){if(ut.isInAngularZone())throw new k(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,t4,yM,yM);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const t4={};function HI(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function zI(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function vM(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function EM(n){n._nesting--,HI(n)}class s4{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mn,this.onMicrotaskEmpty=new mn,this.onStable=new mn,this.onError=new mn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const wM=new se("",{providedIn:"root",factory:bM});function bM(){const n=me(ut);let e=!0;return G(new Je(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new Je(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{ut.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{ut.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Le()))}function zo(n){return n instanceof Function?n():n}let qI=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ye({token:n,providedIn:"root",factory:()=>new n})}return n})();function up(n){for(;n;){n[qe]|=64;const e=ep(n);if(Xg(n)&&!e)return n;n=e}return null}const SM=new se("",{providedIn:"root",factory:()=>!1});let vy=null;function MM(n,e){return n[e]??kM()}function PM(n,e){const t=kM();t.producerNode?.length&&(n[e]=vy,t.lView=n,vy=NM())}const g4={...vn,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{up(n.lView)},lView:null};function NM(){return Object.create(g4)}function kM(){return vy??=NM(),vy}const We={};function Bn(n){OM(ct(),te(),wr()+n,!1)}function OM(n,e,t,r){if(!r)if(3==(3&e[qe])){const s=n.preOrderCheckHooks;null!==s&&$u(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Ma(e,s,0,t)}Lo(t)}function U(n,e=at.Default){const t=te();return null===t?ne(n,e):k_(xn(),t,x(n),e)}function Ey(n,e,t,r,i,s,o,a,l,u,h){const m=e.blueprint.slice();return m[fn]=i,m[qe]=140|r,(null!==u||n&&2048&n[qe])&&(m[qe]|=2048),g_(m),m[Vt]=m[Ia]=n,m[yn]=t,m[ba]=o||n&&n[ba],m[Ve]=a||n&&n[Ve],m[Yi]=l||n&&n[Yi]||null,m[Ln]=s,m[Mo]=function IH(){return bH++}(),m[Ts]=h,m[Yg]=u,m[sn]=2==e.type?n[sn]:m,m}function pd(n,e,t,r,i){let s=n.data[e];if(null===s)s=function GI(n,e,t,r,i){const s=b_(),o=xf(),l=n.data[e]=function C4(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Xs()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,r,i),function Ib(){return Ne.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Yl(){const n=Ne.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return yi(s,!0),s}function dp(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function LM(n,e,t,r,i){const s=MM(e,zl),o=wr(),a=2&r;try{Lo(-1),a&&e.length>et&&OM(n,e,et,!1),rs(a?2:0,i);const u=a?s:null,h=gf(u);try{null!==u&&(u.dirty=!1),t(r,i)}finally{xu(u,h)}}finally{a&&null===e[zl]&&PM(e,zl),Lo(o),rs(a?3:1,i)}}function WI(n,e,t){if(Gl(e)){const r=_i(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{_i(r)}}}function ZI(n,e,t){Lu()&&(function M4(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;Po(t)&&function V4(n,e,t){const r=Vn(e,n),i=VM(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=wy(n,Ey(n,i,null,o,r,e,null,n[ba].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||qu(t,e),Ur(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],u=Bo(e,n,a,t);Ur(u,e),null!==o&&B4(0,a-i,u,l,0,o),ts(l)&&(ii(t.index,e)[yn]=Bo(e,n,a,t))}}(n,e,t,Vn(t,e)),64==(64&t.flags)&&HM(n,e,t))}function KI(n,e,t=Vn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function VM(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=QI(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function QI(n,e,t,r,i,s,o,a,l,u,h){const m=et+r,g=m+i,y=function y4(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:We);return t}(m,g),E="function"==typeof u?u():u;return y[pe]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:E,incompleteFirstPass:!1,ssrId:h}}let BM=n=>null;function UM(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?jM(t,e,i,s):r.hasOwnProperty(i)&&jM(t,e,r[i],s)}return t}function jM(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function YI(n,e,t,r){if(Lu()){const i=null===r?null:{"":-1},s=function N4(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(sf(e,o.selectors,!1))if(r||(r=[]),ts(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),XI(n,e,a.length)}else r.unshift(o),XI(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&$M(n,e,t,o,i,a),i&&function k4(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new k(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=zs(t.mergedAttrs,t.attrs)}function $M(n,e,t,r,i,s){for(let u=0;u<r.length;u++)oc(qu(t,e),n,r[u].type);!function F4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let u=0;u<r.length;u++){const h=r[u];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,l=dp(n,e,r.length,null);for(let u=0;u<r.length;u++){const h=r[u];t.mergedAttrs=zs(t.mergedAttrs,h.hostAttrs),L4(n,t,e,l,h),O4(l,h,i),null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const m=h.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function T4(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,u=null;for(let h=e.directiveStart;h<i;h++){const m=s[h],g=t?t.get(m):null,E=g?g.outputs:null;l=UM(m.inputs,h,l,g?g.inputs:null),u=UM(m.outputs,h,u,E);const b=null===l||null===o||Eu(e)?null:U4(l,h,o);a.push(b)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}(n,t,s)}function HM(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function Cb(){return Ne.lFrame.currentDirectiveIndex}();try{Lo(s);for(let a=r;a<i;a++){const l=n.data[a],u=e[a];kf(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&P4(l,u)}}finally{Lo(-1),kf(o)}}function P4(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function XI(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function O4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ts(e)&&(t[""]=n)}}function L4(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=ns(i.type)),o=new tc(s,ts(i),U);n.blueprint[r]=o,t[r]=o,function x4(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function R4(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,dp(n,t,i.hostVars,We),i)}function B4(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)zM(r,t,o[a++],o[a++],o[a++])}function zM(n,e,t,r,i){const s=_i(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{_i(s)}}function U4(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function qM(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function GM(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Ff(t[r]),o.contentQueries(2,e[s],s)}}}function wy(n,e){return n[$l]?n[Tu][Mi]=e:n[$l]=e,n[Tu]=e,e}function e0(n,e,t){Ff(0);const r=_i(null);try{e(n,t)}finally{_i(r)}}function WM(n){return n[wa]||(n[wa]=[])}function ZM(n){return n.cleanup||(n.cleanup=[])}function QM(n,e){const t=n[Yi],r=t?t.get(Ho,null):null;r&&r.handleError(e)}function t0(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];zM(n.data[o],e[o],r,a,i)}}function j4(n,e){const t=ii(e,n),r=t[pe];!function $4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[fn];null!==i&&null===t[Ts]&&(t[Ts]=OI(i,t[Yi])),n0(r,t,t[yn])}function n0(n,e,t){Vf(e);try{const r=n.viewQuery;null!==r&&e0(1,r,t);const i=n.template;null!==i&&LM(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&GM(n,e),n.staticViewQueries&&e0(2,n.viewQuery,t);const s=n.components;null!==s&&function H4(n,e){for(let t=0;t<e.length;t++)j4(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[qe]&=-5,Bf()}}let YM=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function fb(n,e,t){const r=Object.create(pb);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>s_(r),run:()=>{if(r.dirty=!1,r.hasRun&&!o_(r))return;r.hasRun=!0;const o=gf(r);try{r.cleanupFn(),r.cleanupFn=h_,r.fn(i)}finally{xu(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,u=>{this.all.has(u)&&this.queue.set(u,s)},i);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ye({token:n,providedIn:"root",factory:()=>new n})}return n})();function by(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Wi(i,a):2==s&&(r=Wi(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function hp(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Rt(s)),Br(s)&&XM(s,r);const o=t.type;if(8&o)hp(n,e,t.child,r);else if(32&o){const a=iI(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=NR(e,t);if(Array.isArray(a))r.push(...a);else{const l=ep(e[sn]);hp(l[pe],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function XM(n,e){for(let t=Kn;t<n.length;t++){const r=n[t],i=r[pe].firstChild;null!==i&&hp(r[pe],r,i,e)}n[es]!==n[fn]&&e.push(n[es])}function Iy(n,e,t,r=!0){const i=e[ba],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{JM(n,e,n.template,t)}catch(l){throw r&&QM(e,l),l}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function JM(n,e,t,r){const i=e[qe];if(256!=(256&i)){e[ba].effectManager?.flush(),Vf(e);try{g_(e),function Mf(n){return Ne.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&LM(n,e,t,2,r);const o=3==(3&i);if(o){const u=n.preOrderCheckHooks;null!==u&&$u(e,u,null)}else{const u=n.preOrderHooks;null!==u&&Ma(e,u,0,null),ec(e,0)}if(function G4(n){for(let e=wR(n);null!==e;e=bR(e)){if(!e[hf])continue;const t=e[Ta];for(let r=0;r<t.length;r++){Tf(t[r])}}}(e),eP(e,2),null!==n.contentQueries&&GM(n,e),o){const u=n.contentCheckHooks;null!==u&&$u(e,u)}else{const u=n.contentHooks;null!==u&&Ma(e,u,1),ec(e,1)}!function _4(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=MM(e,Ca);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)Lo(~s);else{const o=s,a=t[++i],l=t[++i];Nf(a,o),r.dirty=!1;const u=gf(r);try{l(2,e[o])}finally{xu(r,u)}}}}finally{null===e[Ca]&&PM(e,Ca),Lo(-1)}}(n,e);const a=n.components;null!==a&&nP(e,a,0);const l=n.viewQuery;if(null!==l&&e0(2,l,r),o){const u=n.viewCheckHooks;null!==u&&$u(e,u)}else{const u=n.viewHooks;null!==u&&Ma(e,u,2),ec(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[qe]&=-73,__(e)}finally{Bf()}}}function eP(n,e){for(let t=wR(n);null!==t;t=bR(t))for(let r=Kn;r<t.length;r++)tP(t[r],e)}function W4(n,e,t){tP(ii(e,n),t)}function tP(n,e){if(!function Cf(n){return 128==(128&n[qe])}(n))return;const t=n[pe],r=n[qe];if(80&r&&0===e||1024&r||2===e)JM(t,n,t.template,n[yn]);else if(n[jl]>0){eP(n,1);const i=t.components;null!==i&&nP(n,i,1)}}function nP(n,e,t){for(let r=0;r<e.length;r++)W4(n,e[r],t)}class fp{get rootNodes(){const e=this._lView,t=e[pe];return hp(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[yn]}set context(e){this._lView[yn]=e}get destroyed(){return 256==(256&this._lView[qe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Vt];if(Br(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(ty(e,r),Fa(t,r))}this._attachedToViewContainer=!1}oI(this._lView[pe],this._lView)}onDestroy(e){!function y_(n,e){if(256==(256&n[qe]))throw new k(911,!1);null===n[Ji]&&(n[Ji]=[]),n[Ji].push(e)}(this._lView,e)}markForCheck(){up(this._cdRefInjectingView||this._lView)}detach(){this._lView[qe]&=-129}reattach(){this._lView[qe]|=128}detectChanges(){Iy(this._lView[pe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new k(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function LH(n,e){np(n,e,e[Ve],2,null,null)}(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new k(902,!1);this._appRef=e}}class Z4 extends fp{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Iy(e[pe],e,e[yn],!1)}checkNoChanges(){}get context(){return null}}class rP extends _y{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=lt(e);return new pp(t,this.ngModule)}}function iP(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Q4{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=mu(r);const i=this.injector.get(e,VI,r);return i!==VI||t===VI?i:this.parentInjector.get(e,t,r)}}class pp extends cM{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=iP(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return iP(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function cf(n){return n.map(Wg).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof cs?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new Q4(e,s):e,a=o.get(cp,null);if(null===a)throw new k(407,!1);const m={rendererFactory:a,sanitizer:o.get(Gz,null),effectManager:o.get(YM,null),afterRenderEventManager:o.get(qI,null)},g=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",E=r?function v4(n,e,t,r){const s=r.get(SM,!1)||t===ei.ShadowDom,o=n.selectRootElement(e,s);return function E4(n){BM(n)}(o),o}(g,r,this.componentDef.encapsulation,o):ey(g,y,function K4(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y)),N=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let R=null;null!==E&&(R=OI(E,o,!0));const L=QI(0,null,null,1,0,null,null,null,null,null,null),X=Ey(null,L,null,N,null,null,m,g,o,null,R);let le,Re;Vf(X);try{const je=this.componentDef;let Ot,mi=null;je.findHostDirectiveDefs?(Ot=[],mi=new Map,je.findHostDirectiveDefs(je,Ot,mi),Ot.push(je)):Ot=[je];const Si=function X4(n,e){const t=n[pe],r=et;return n[r]=e,pd(t,r,2,"#host",null)}(X,E),Gw=function J4(n,e,t,r,i,s,o){const a=i[pe];!function e3(n,e,t,r){for(const i of n)e.mergedAttrs=zs(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(by(e,e.mergedAttrs,!0),null!==t&&LR(r,t,e))}(r,n,e,o);let l=null;null!==e&&(l=OI(e,i[Yi]));const u=s.rendererFactory.createRenderer(e,t);let h=16;t.signals?h=4096:t.onPush&&(h=64);const m=Ey(i,VM(t),null,h,i[n.index],n,s,u,null,null,l);return a.firstCreatePass&&XI(a,n,r.length-1),wy(i,m),i[n.index]=m}(Si,E,je,Ot,X,m,g);Re=ku(L,et),E&&function n3(n,e,t,r){if(r)yu(n,t,["ng-version",dM.full]);else{const{attrs:i,classes:s}=function Zg(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Vr(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&yu(n,t,i),s&&s.length>0&&FR(n,t,s.join(" "))}}(g,je,E,r),void 0!==t&&function r3(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Re,this.ngContentSelectors,t),le=function t3(n,e,t,r,i,s){const o=xn(),a=i[pe],l=Vn(o,i);$M(a,i,o,t,null,r);for(let h=0;h<t.length;h++)Ur(Bo(i,a,o.directiveStart+h,o),i);HM(a,i,o),l&&Ur(l,i);const u=Bo(i,a,o.directiveStart+o.componentOffset,o);if(n[yn]=i[yn]=u,null!==s)for(const h of s)h(u,e);return WI(a,o,n),u}(Gw,je,Ot,mi,X,[s3]),n0(L,X,null)}finally{Bf()}return new Y4(this.componentType,le,dd(Re,X),X,Re)}}class Y4 extends Uz{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Z4(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;t0(s[pe],s,i,e,t),this.previousInputValues.set(e,t),up(ii(this._tNode.index,s))}}get injector(){return new Xn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function s3(){const n=xn();ju(te()[pe],n)}function ke(n){let e=function sP(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(ts(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new k(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=Cy(n.inputs),o.inputTransforms=Cy(n.inputTransforms),o.declaredInputs=Cy(n.declaredInputs),o.outputs=Cy(n.outputs);const a=i.hostBindings;a&&c3(n,a);const l=i.viewQuery,u=i.contentQueries;if(l&&a3(n,l),u&&l3(n,u),Wn(n.inputs,i.inputs),Wn(n.declaredInputs,i.declaredInputs),Wn(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Wn(o.inputTransforms,i.inputTransforms)),ts(i)&&i.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===ke&&(t=!1)}}e=Object.getPrototypeOf(e)}!function o3(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=zs(i.hostAttrs,t=zs(t,i.hostAttrs))}}(r)}function Cy(n){return n===Ri?{}:n===_t?[]:n}function a3(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function l3(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function c3(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function Ty(n){return!!function r0(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function jr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function cr(n,e,t,r,i,s,o,a){const l=te(),u=ct(),h=n+et,m=u.firstCreatePass?function k3(n,e,t,r,i,s,o,a,l){const u=e.consts,h=pd(e,n,4,o||null,Ys(u,a));YI(e,t,h,Ys(u,l)),ju(e,h);const m=h.tView=QI(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,h),m.queries=e.queries.embeddedTView(h)),h}(h,u,l,e,t,r,i,s,o):u.data[h];yi(m,!1);const g=bP(u,l,m,n);Uu()&&ry(u,l,g,m),Ur(g,l),wy(l,l[h]=qM(g,l,g,m)),Su(m)&&ZI(u,l,m),null!=o&&KI(l,m,a)}let bP=function IP(n,e,t,r){return Js(!0),e[Ve].createComment("")};function Ry(n){return Ra(function Vu(){return Ne.lFrame.contextLView}(),et+n)}function ki(n,e,t){const r=te();return jr(r,Fo(),e)&&function Ni(n,e,t,r,i,s,o,a){const l=Vn(e,t);let h,u=e.inputs;!a&&null!=u&&(h=u[r])?(t0(n,t,h,r,i),Po(e)&&function S4(n,e){const t=ii(e,n);16&t[qe]||(t[qe]|=64)}(t,e.index)):3&e.type&&(r=function D4(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(l,r,i))}(ct(),function Ht(){const n=Ne.lFrame;return ku(n.tView,n.selectedIndex)}(),r,n,e,r[Ve],t,!1),ki}function u0(n,e,t,r,i){const o=i?"class":"style";t0(n,t,e.inputs[o],o,r)}function tt(n,e,t,r){const i=te(),s=ct(),o=et+n,a=i[Ve],l=s.firstCreatePass?function V3(n,e,t,r,i,s){const o=e.consts,l=pd(e,n,2,r,Ys(o,i));return YI(e,t,l,Ys(o,s)),null!==l.attrs&&by(l,l.attrs,!1),null!==l.mergedAttrs&&by(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,e,t,r):s.data[o],u=CP(s,i,l,a,e,n);i[o]=u;const h=Su(l);return yi(l,!0),LR(a,u,l),32!=(32&l.flags)&&Uu()&&ry(s,i,u,l),0===function vb(){return Ne.lFrame.elementDepthCount}()&&Ur(u,i),function Eb(){Ne.lFrame.elementDepthCount++}(),h&&(ZI(s,i,l),WI(s,l,i)),null!==r&&KI(i,l),tt}function vt(){let n=xn();xf()?Xl():(n=n.parent,yi(n,!1));const e=n;(function wb(n){return Ne.skipHydrationRootTNode===n})(e)&&function bb(){Ne.skipHydrationRootTNode=null}(),function Sf(){Ne.lFrame.elementDepthCount--}();const t=ct();return t.firstCreatePass&&(ju(t,n),Gl(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function M_(n){return 0!=(8&n.flags)}(e)&&u0(t,e,te(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function zu(n){return 0!=(16&n.flags)}(e)&&u0(t,e,te(),e.stylesWithoutHost,!1),vt}function _c(n,e,t,r){return tt(n,e,t,r),vt(),_c}let CP=(n,e,t,r,i,s)=>(Js(!0),ey(r,i,function S_(){return Ne.lFrame.currentNamespace}()));function oo(n,e,t){const r=te(),i=ct(),s=n+et,o=i.firstCreatePass?function j3(n,e,t,r,i){const s=e.consts,o=Ys(s,r),a=pd(e,n,8,"ng-container",o);return null!==o&&by(a,o,!0),YI(e,t,a,Ys(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];yi(o,!0);const a=TP(i,r,o,n);return r[s]=a,Uu()&&ry(i,r,a,o),Ur(a,r),Su(o)&&(ZI(i,r,o),WI(i,o,r)),null!=t&&KI(r,o),oo}function ao(){let n=xn();const e=ct();return xf()?Xl():(n=n.parent,yi(n,!1)),e.firstCreatePass&&(ju(e,n),Gl(n)&&e.queries.elementEnd(n)),ao}function lo(n,e,t){return oo(n,e,t),ao(),lo}let TP=(n,e,t,r)=>(Js(!0),sI(e[Ve],""));function My(){return te()}function vp(n){return!!n&&"function"==typeof n.then}function DP(n){return!!n&&"function"==typeof n.subscribe}function on(n,e,t,r){const i=te(),s=ct(),o=xn();return function AP(n,e,t,r,i,s,o){const a=Su(r),u=n.firstCreatePass&&ZM(n),h=e[yn],m=WM(e);let g=!0;if(3&r.type||o){const b=Vn(r,e),C=o?o(b):b,N=m.length,R=o?X=>o(Rt(X[r.index])):r.index;let L=null;if(!o&&a&&(L=function z3(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[wa],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==L)(L.__ngLastListenerFn__||L).__ngNextListenerFn__=s,L.__ngLastListenerFn__=s,g=!1;else{s=RP(r,e,h,s,!1);const X=t.listen(C,i,s);m.push(s,X),u&&u.push(i,R,N,N+1)}}else s=RP(r,e,h,s,!1);const y=r.outputs;let E;if(g&&null!==y&&(E=y[i])){const b=E.length;if(b)for(let C=0;C<b;C+=2){const le=e[E[C]][E[C+1]].subscribe(s),Re=m.length;m.push(s,le),u&&u.push(i,r.index,Re,-(Re+1))}}}(s,i,i[Ve],o,n,e,r),on}function xP(n,e,t,r){try{return rs(6,e,t),!1!==t(r)}catch(i){return QM(n,i),!1}finally{rs(7,e,t)}}function RP(n,e,t,r,i){return function s(o){if(o===Function)return r;up(n.componentOffset>-1?ii(n.index,e):e);let l=xP(e,t,r,o),u=s.__ngNextListenerFn__;for(;u;)l=xP(e,t,u,o)&&l,u=u.__ngNextListenerFn__;return i&&!1===l&&o.preventDefault(),l}}function wi(n=1){return function Db(n){return(Ne.lFrame.contextLView=function Sb(n,e){for(;n>0;)e=e[Ia],n--;return e}(n,Ne.lFrame.contextLView))[yn]}(n)}function q3(n,e){let t=null;const r=function af(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?sf(n,s,!0):wu(r,s))return i}else t=i}return t}function d0(n){const e=te()[sn][Ln];if(!e.projection){const r=e.projection=uc(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?q3(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function Ep(n,e=0,t){const r=te(),i=ct(),s=pd(i,et+n,16,null,t||null);null===s.projection&&(s.projection=e),Xl(),(!r[Ts]||Xs())&&32!=(32&s.flags)&&function qH(n,e,t){OR(e[Ve],0,e,t,lI(n,t,e),xR(t.parent||e[Ln],t,e))}(i,r,s)}function Py(n,e){return n<<17|e<<2}function $a(n){return n>>17&32767}function f0(n){return 2|n}function yc(n){return(131068&n)>>2}function p0(n,e){return-131069&n|e<<2}function m0(n){return 1|n}function UP(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?$a(s):yc(s),l=!1;for(;0!==a&&(!1===l||o);){const h=n[a+1];Y3(n[a],e)&&(l=!0,n[a+1]=r?m0(h):f0(h)),a=r?$a(h):yc(h)}l&&(n[t+1]=r?f0(s):m0(s))}function Y3(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&La(n,e)>=0}function Dd(n,e){return function As(n,e,t,r){const i=te(),s=ct(),o=function os(n){const e=Ne.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function ZP(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[wr()],o=function WP(n,e){return e>=n.expandoStartIndex}(n,t);(function XP(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function oq(n,e,t,r){const i=function Of(n){const e=Ne.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=wp(t=g0(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=g0(i,n,e,t,r),null===s){let l=function aq(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==yc(r))return n[$a(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=g0(null,n,e,l[1],r),l=wp(l,e.attrs,r),function lq(n,e,t,r){n[$a(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function cq(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=wp(r,n[s].hostAttrs,t);return wp(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function K3(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=$a(o),l=yc(o);n[r]=t;let h,u=!1;if(Array.isArray(t)?(h=t[1],(null===h||La(t,h)>0)&&(u=!0)):h=t,i)if(0!==l){const g=$a(n[a+1]);n[r+1]=Py(g,a),0!==g&&(n[g+1]=p0(n[g+1],r)),n[a+1]=function W3(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Py(a,0),0!==a&&(n[a+1]=p0(n[a+1],r)),a=r;else n[r+1]=Py(l,0),0===a?a=r:n[l+1]=p0(n[l+1],r),l=r;u&&(n[r+1]=f0(n[r+1])),UP(n,h,r,!0),UP(n,h,r,!1),function Q3(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&La(s,e)>=0&&(t[r+1]=m0(t[r+1]))}(e,h,n,r,s),o=Py(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==We&&jr(i,o,e)&&function QP(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,u=l[a+1],h=function Z3(n){return 1==(1&n)}(u)?YP(l,e,t,i,yc(u),o):void 0;Ny(h)||(Ny(s)||function G3(n){return 2==(2&n)}(u)&&(s=YP(l,null,t,i,a,o)),function WH(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Ba.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ba.Important),n.setStyle(t,r,i,s))}}(r,o,xa(wr(),t),i,s))}(s,s.data[wr()],i,i[Ve],n,i[o+1]=function fq(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Mt(function Ua(n){return n instanceof jR?n.changingThisBreaksApplicationSecurity:n}(n)))),n}(e,t),r,o)}(n,e,null,!0),Dd}function g0(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=wp(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function wp(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),oi(n,o,!!t||e[++s]))}return void 0===n?null:n}function YP(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],u=Array.isArray(l),h=u?l[1]:l,m=null===h;let g=t[i+1];g===We&&(g=m?_t:void 0);let y=m?Wf(g,r):h===r?g:void 0;if(u&&!Ny(y)&&(y=Wf(l,r)),Ny(y)&&(a=y,o))return a;const E=n[i+1];i=o?$a(E):yc(E)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=Wf(l,r))}return a}function Ny(n){return void 0!==n}function St(n,e=""){const t=te(),r=ct(),i=n+et,s=r.firstCreatePass?pd(r,i,1,e,null):r.data[i],o=JP(r,t,s,e,n);t[i]=o,Uu()&&ry(r,t,o,s),yi(s,!1)}let JP=(n,e,t,r,i)=>(Js(!0),function J_(n,e){return n.createText(e)}(e[Ve],r));function Sd(n){return vc("",n,""),Sd}function vc(n,e,t){const r=te(),i=function gd(n,e,t,r){return jr(n,Fo(),t)?e+Ce(t)+r:We}(r,n,e,t);return i!==We&&function qo(n,e,t){const r=xa(e,n);!function CR(n,e,t){n.setValue(e,t)}(n[Ve],r,t)}(r,wr(),i),vc}const Ec=void 0;var Oq=["en",[["a","p"],["AM","PM"],Ec],[["AM","PM"],Ec,Ec],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ec,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ec,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ec,"{1} 'at' {0}",Ec],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function kq(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let Ad={};function ai(n){const e=function Fq(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=EN(e);if(t)return t;const r=e.split("-")[0];if(t=EN(r),t)return t;if("en"===r)return Oq;throw new k(701,!1)}function EN(n){return n in Ad||(Ad[n]=Dt.ng&&Dt.ng.common&&Dt.ng.common.locales&&Dt.ng.common.locales[n]),Ad[n]}var Kt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Kt||{});const xd="en-US";let wN=xd;function v0(n,e,t,r,i){if(n=x(n),Array.isArray(n))for(let s=0;s<n.length;s++)v0(n[s],e,t,r,i);else{const s=ct(),o=te(),a=xn();let l=mc(n)?n:x(n.provide);const u=rM(n),h=1048575&a.providerIndexes,m=a.directiveStart,g=a.providerIndexes>>20;if(mc(n)||!n.multi){const y=new tc(u,i,U),E=w0(l,e,i?h:h+g,m);-1===E?(oc(qu(a,o),s,l),E0(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[E]=y,o[E]=y)}else{const y=w0(l,e,h+g,m),E=w0(l,e,h,h+g),C=E>=0&&t[E];if(i&&!C||!i&&!(y>=0&&t[y])){oc(qu(a,o),s,l);const N=function kG(n,e,t,r,i){const s=new tc(n,t,U);return s.multi=[],s.index=e,s.componentProviders=0,GN(s,i,r&&!t),s}(i?NG:PG,t.length,i,r,u);!i&&C&&(t[E].providerFactory=N),E0(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(N),o.push(N)}else E0(s,n,y>-1?y:E,GN(t[i?E:y],u,!i&&r));!i&&r&&C&&t[E].componentProviders++}}}function E0(n,e,t,r){const i=mc(e),s=function Iz(n){return!!n.useClass}(e);if(i||s){const l=(s?x(e.useClass):e).prototype.ngOnDestroy;if(l){const u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const h=u.indexOf(t);-1===h?u.push(t,[r,l]):u[h+1].push(r,l)}else u.push(t,l)}}}function GN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function w0(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function PG(n,e,t,r){return b0(this.multi,[])}function NG(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Bo(t,t[pe],this.providerFactory.index,r);s=a.slice(0,o),b0(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],b0(i,s);return s}function b0(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function it(n,e=[]){return t=>{t.providersResolver=(r,i)=>function MG(n,e,t){const r=ct();if(r.firstCreatePass){const i=ts(n);v0(t,r.data,r.blueprint,i,!0),v0(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class wc{}class WN{}class I0 extends wc{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new rP(this);const i=ni(e);this._bootstrapComponents=zo(i.bootstrap),this._r3Injector=gM(e,t,[{provide:wc,useValue:this},{provide:_y,useValue:this.componentFactoryResolver},...r],Mt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class C0 extends WN{constructor(e){super(),this.moduleType=e}create(e){return new I0(this.moduleType,e,[])}}class ZN extends wc{constructor(e){super(),this.componentFactoryResolver=new rP(this),this.instance=null;const t=new ad([...e.providers,{provide:wc,useValue:this},{provide:_y,useValue:this.componentFactoryResolver}],e.parent||uy(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function T0(n,e,t=null){return new ZN({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let LG=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=JR(0,t.type),i=r.length>0?T0([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ye({token:n,providedIn:"environment",factory:()=>new n(ne(cs))})}return n})();function KN(n){n.getStandaloneInjector=e=>e.get(LG).getOrCreateStandaloneInjector(n)}function rk(n,e,t,r,i,s,o){const a=e+t;return function gc(n,e,t,r){const i=jr(n,e,t);return jr(n,e+1,r)||i}(n,a,i,s)?function io(n,e,t){return n[e]=t}(n,a+2,o?r.call(o,i,s):r(i,s)):function Sp(n,e){const t=n[e];return t===We?void 0:t}(n,a+2)}function lk(n,e,t,r){const i=n+et,s=te(),o=Ra(s,i);return function Ap(n,e){return n[pe].data[e].pure}(s,i)?rk(s,function Yn(){const n=Ne.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),e,o.transform,t,r,o):o.transform(t,r)}function a5(){return this._results[Symbol.iterator]()}class S0{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new mn)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=S0.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=a5)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function si(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function cc(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function c5(n,e,t,r=!0){const i=e[pe];if(function BH(n,e,t,r){const i=Kn+r,s=t.length;r>0&&(t[i-1][Mi]=e),r<s-Kn?(e[Mi]=t[i],Qu(t,Kn+r,e)):(t.push(e),e[Mi]=null),e[Vt]=t;const o=e[Hl];null!==o&&t!==o&&function UH(n,e){const t=n[Ta];e[sn]!==e[Vt][Vt][sn]&&(n[hf]=!0),null===t?n[Ta]=[e]:t.push(e)}(o,e);const a=e[Xi];null!==a&&a.insertView(n),e[qe]|=128}(i,e,n,t),r){const s=uI(t,n),o=e[Ve],a=ny(o,n[es]);null!==a&&function FH(n,e,t,r,i,s){r[fn]=i,r[Ln]=e,np(n,r,t,1,i,s)}(i,n[Ln],o,e,a,s)}}let Ir=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=h5}return n})();const u5=Ir,d5=class extends u5{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function l5(n,e,t,r){const i=e.tView,a=Ey(n,i,t,4096&n[qe]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Hl]=n[e.index];const u=n[Xi];return null!==u&&(a[Xi]=u.createEmbeddedView(i)),n0(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new fp(i)}};function h5(){return Vy(xn(),te())}function Vy(n,e){return 4&n.type?new d5(e,n,dd(n,e)):null}let $r=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=y5}return n})();function y5(){return mk(xn(),te())}const v5=$r,fk=class extends v5{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return dd(this._hostTNode,this._hostLView)}get injector(){return new Xn(this._hostTNode,this._hostLView)}get parentInjector(){const e=Gu(this._hostTNode,this._hostLView);if($f(e)){const t=rc(e,this._hostLView),r=nc(e);return new Xn(t[pe].data[r+8],t)}return new Xn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=pk(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Kn}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function Jn(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,s=b.environmentInjector||b.ngModuleRef}const l=o?e:new pp(lt(e)),u=r||this.parentInjector;if(!s&&null==l.ngModule){const C=(o?u:this.parentInjector).get(cs,null);C&&(s=C)}lt(l.componentType??{});const y=l.create(u,i,null,s);return this.insertImpl(y.hostView,a,false),y}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function m_(n){return Br(n[Vt])}(i)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const u=i[Vt],h=new fk(u,u[Ln],u[Vt]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return c5(a,i,o,!r),e.attachToViewContainerRef(),Qu(A0(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=pk(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=ty(this._lContainer,t);r&&(Fa(A0(this._lContainer),t),oI(r[pe],r))}detach(e){const t=this._adjustIndex(e,-1),r=ty(this._lContainer,t);return r&&null!=Fa(A0(this._lContainer),t)?new fp(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function pk(n){return n[8]}function A0(n){return n[8]||(n[8]=[])}function mk(n,e){let t;const r=e[n.index];return Br(r)?t=r:(t=qM(r,e,null,n),e[n.index]=t,wy(e,t)),gk(t,e,n,r),new fk(t,n,e)}let gk=function _k(n,e,t,r){if(n[es])return;let i;i=8&t.type?Rt(r):function E5(n,e){const t=n[Ve],r=t.createComment(""),i=Vn(e,n);return pc(t,ny(t,i),r,function zH(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[es]=i};class x0{constructor(e){this.queryList=e,this.matches=null}clone(){return new x0(this.queryList)}setDirty(){this.queryList.setDirty()}}class R0{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new R0(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==bk(e,t).matches&&this.queries[t].setDirty()}}class yk{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class M0{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new M0(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class P0{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new P0(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,I5(t,s)),this.matchTNodeWithReadOption(e,t,Zu(t,e,s,!1,!1))}else r===Ir?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Zu(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===bn||i===$r||i===Ir&&4&t.type)this.addMatch(t.index,-2);else{const s=Zu(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function I5(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function T5(n,e,t,r){return-1===t?function C5(n,e){return 11&n.type?dd(n,e):4&n.type?Vy(n,e):null}(e,n):-2===t?function D5(n,e,t){return t===bn?dd(e,n):t===Ir?Vy(e,n):t===$r?mk(e,n):void 0}(n,e,r):Bo(n,n[pe],t,e)}function vk(n,e,t,r){const i=e[Xi].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const u=o[l];a.push(u<0?null:T5(e,s[u],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function N0(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=vk(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const u=s[a+1],h=e[-l];for(let m=Kn;m<h.length;m++){const g=h[m];g[Hl]===g[Vt]&&N0(g[pe],g,u,r)}if(null!==h[Ta]){const m=h[Ta];for(let g=0;g<m.length;g++){const y=m[g];N0(y[pe],y,u,r)}}}}}return r}function Cr(n){const e=te(),t=ct(),r=Bu();Ff(r+1);const i=bk(t,r);if(n.dirty&&function yb(n){return 4==(4&n[qe])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?N0(t,e,r,[]):vk(t,e,i,r);n.reset(s,zz),n.notifyOnChanges()}return!0}return!1}function Ha(n,e,t){const r=ct();r.firstCreatePass&&(wk(r,new yk(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),Ek(r,te(),e)}function ho(n,e,t,r){const i=ct();if(i.firstCreatePass){const s=xn();wk(i,new yk(e,t,r),s.index),function A5(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}Ek(i,te(),t)}function Tr(){return function S5(n,e){return n[Xi].queries[e].queryList}(te(),Bu())}function Ek(n,e,t){const r=new S0(4==(4&t));(function I4(n,e,t,r){const i=WM(e);i.push(t),n.firstCreatePass&&ZM(n).push(r,i.length-1)})(n,e,r,r.destroy),null===e[Xi]&&(e[Xi]=new R0),e[Xi].queries.push(new x0(r))}function wk(n,e,t){null===n.queries&&(n.queries=new M0),n.queries.track(new P0(e,t))}function bk(n,e){return n.queries.getByIndex(e)}const jy=new se("Application Initializer");let B0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=me(jy,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(vp(s))t.push(s);else if(DP(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bk=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const fo=new se("LocaleId",{providedIn:"root",factory:()=>me(fo,at.Optional|at.SkipSelf)||function Q5(){return typeof $localize<"u"&&$localize.locale||xd}()});let Uk=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new P(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class J5{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let jk=(()=>{class n{compileModuleSync(t){return new C0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=zo(ni(t).declarations).reduce((o,a)=>{const l=lt(a);return l&&o.push(new pp(l)),o},[]);return new J5(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const qk=new se(""),Hy=new se("");let z0,$0=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,z0||(function w9(n){z0=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ut.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(ne(ut),ne(H0),ne(Hy))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),H0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return z0?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),za=null;const Gk=new se("AllowMultipleToken"),q0=new se("PlatformDestroyListeners"),G0=new se("appBootstrapListener");class Zk{constructor(e,t){this.name=e,this.token=t}}function Qk(n,e,t=[]){const r=`Platform: ${e}`,i=new se(r);return(s=[])=>{let o=W0();if(!o||o.injector.get(Gk,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function C9(n){if(za&&!za.get(Gk,!1))throw new k(400,!1);(function Wk(){!function Aa(n){c_=n}(()=>{throw new k(600,!1)})})(),za=n;const e=n.get(Xk);(function Kk(n){n.get(iM,null)?.forEach(t=>t())})(n)}(function Yk(n=[],e){return Ei.create({name:e,providers:[{provide:II,useValue:"platform"},{provide:q0,useValue:new Set([()=>za=null])},...n]})}(a,r))}return function D9(n){const e=W0();if(!e)throw new k(401,!1);return e}()}}function W0(){return za?.get(Xk)??null}let Xk=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function S9(n="zone.js",e){return"noop"===n?new s4:"zone.js"===n?new ut(e):n}(r?.ngZone,function Jk(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function FG(n,e,t){return new I0(n,e,t)}(t.moduleType,this.injector,function iO(n){return[{provide:ut,useFactory:n},{provide:op,multi:!0,useFactory:()=>{const e=me(x9,{optional:!0});return()=>e.initialize()}},{provide:rO,useFactory:A9},{provide:wM,useFactory:bM}]}(()=>i)),o=s.injector.get(Ho,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:l=>{o.handleError(l)}});s.onDestroy(()=>{zy(this._modules,s),a.unsubscribe()})}),function eO(n,e,t){try{const r=t();return vp(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(B0);return a.runInitializers(),a.donePromise.then(()=>(function bN(n){Fr(n,"Expected localeId to be defined"),"string"==typeof n&&(wN=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(fo,xd)||xd),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=tO({},r);return function b9(n,e,t){const r=new C0(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(qa);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new k(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new k(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(q0,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(ne(Ei))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function tO(n,e){return Array.isArray(e)?e.reduce(tO,n):{...n,...e}}let qa=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=me(rO),this.zoneIsStable=me(wM),this.componentTypes=[],this.components=[],this.isStable=me(Uk).hasPendingTasks.pipe(ht(t=>t?q(!1):this.zoneIsStable),rn(),Le()),this._injector=me(cs)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof cM;if(!this._injector.get(B0).done)throw!i&&function qs(n){const e=lt(n)||An(n)||Er(n);return null!==e&&e.standalone}(t),new k(405,!1);let o;o=i?t:this._injector.get(_y).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function I9(n){return n.isBoundToModule}(o)?void 0:this._injector.get(wc),u=o.create(Ei.NULL,[],r||o.selector,a),h=u.location.nativeElement,m=u.injector.get(qk,null);return m?.registerApplication(h),u.onDestroy(()=>{this.detachView(u.hostView),zy(this.components,u),m?.unregisterApplication(h)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new k(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;zy(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(G0,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>zy(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new k(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zy(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const rO=new se("",{providedIn:"root",factory:()=>me(Ho).handleError.bind(void 0)});function A9(){const n=me(ut),e=me(Ho);return t=>n.runOutsideAngular(()=>e.handleError(t))}let x9=(()=>{class n{constructor(){this.zone=me(ut),this.applicationRef=me(qa)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let Mp=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=M9}return n})();function M9(n){return function P9(n,e,t){if(Po(n)&&!t){const r=ii(n.index,e);return new fp(r,r)}return 47&n.type?new fp(e[sn],e):null}(xn(),te(),16==(16&n))}class lO{constructor(){}supports(e){return Ty(e)}create(e){return new V9(e)}}const L9=(n,e)=>e;class V9{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||L9}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<uO(r,i,s)?t:r,a=uO(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,h=l-i;if(u!=h){for(let g=0;g<u;g++){const y=g<s.length?s[g]:s[g]=0,E=y+g;h<=E&&E<u&&(s[g]=y+1)}s[o.previousIndex]=h-u}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ty(e))throw new k(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function g3(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new B9(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new cO),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new cO),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class B9{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class U9{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class cO{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new U9,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uO(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function hO(){return new Go([new lO])}let Go=(()=>{class n{static#e=this.\u0275prov=ye({token:n,providedIn:"root",factory:hO});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||hO()),deps:[[n,new Ju,new hc]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new k(901,!1)}}return n})();const q9=Qk(null,"core",[]);let G9=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(ne(qa))};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({})}return n})();let eC=null;function Ga(){return eC}class o6{}const tr=new se("DocumentToken");let tC=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:function(){return me(l6)},providedIn:"platform"})}return n})();const a6=new se("Location Initialized");let l6=(()=>{class n extends tC{constructor(){super(),this._doc=me(tr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ga().getBaseHref(this._doc)}onPopState(t){const r=Ga().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Ga().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function nC(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function bO(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Wo(n){return n&&"?"!==n[0]?"?"+n:n}let Ic=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:function(){return me(CO)},providedIn:"root"})}return n})();const IO=new se("appBaseHref");let CO=(()=>{class n extends Ic{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??me(tr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return nC(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Wo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Wo(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Wo(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ne(tC),ne(IO,8))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),c6=(()=>{class n extends Ic{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=nC(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Wo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Wo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ne(tC),ne(IO,8))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),rC=(()=>{class n{constructor(t){this._subject=new mn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function h6(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(bO(TO(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Wo(r))}normalize(t){return n.stripTrailingSlash(function d6(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,TO(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=Wo;static#t=this.joinWithSlash=nC;static#n=this.stripTrailingSlash=bO;static#r=this.\u0275fac=function(r){return new(r||n)(ne(Ic))};static#i=this.\u0275prov=ye({token:n,factory:function(){return function u6(){return new rC(ne(Ic))}()},providedIn:"root"})}return n})();function TO(n){return n.replace(/\/index.html$/,"")}var ci=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(ci||{}),zt=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(zt||{}),Oi=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Oi||{}),Rn=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Rn||{});function Ky(n,e){return fs(ai(n)[Kt.DateFormat],e)}function Qy(n,e){return fs(ai(n)[Kt.TimeFormat],e)}function Yy(n,e){return fs(ai(n)[Kt.DateTimeFormat],e)}function hs(n,e){const t=ai(n),r=t[Kt.NumberSymbols][e];if(typeof r>"u"){if(e===Rn.CurrencyDecimal)return t[Kt.NumberSymbols][Rn.Decimal];if(e===Rn.CurrencyGroup)return t[Kt.NumberSymbols][Rn.Group]}return r}function SO(n){if(!n[Kt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Kt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function fs(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function sC(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const D6=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Np={},S6=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Zo=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Zo||{}),At=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(At||{}),xt=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(xt||{});function A6(n,e,t,r){let i=function L6(n){if(RO(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,o=1]=n.split("-").map(a=>+a);return Xy(i,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(D6))return function V6(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,l=Number(n[6]||0),u=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,l,u),e}(r)}const e=new Date(n);if(!RO(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Ko(t,e)||e;let a,o=[];for(;e;){if(a=S6.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const h=o.pop();if(!h)break;e=h}}let l=i.getTimezoneOffset();r&&(l=xO(r,l),i=function F6(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function O6(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(xO(e,i)-i))}(i,r,!0));let u="";return o.forEach(h=>{const m=function k6(n){if(aC[n])return aC[n];let e;switch(n){case"G":case"GG":case"GGG":e=Qt(xt.Eras,zt.Abbreviated);break;case"GGGG":e=Qt(xt.Eras,zt.Wide);break;case"GGGGG":e=Qt(xt.Eras,zt.Narrow);break;case"y":e=Un(At.FullYear,1,0,!1,!0);break;case"yy":e=Un(At.FullYear,2,0,!0,!0);break;case"yyy":e=Un(At.FullYear,3,0,!1,!0);break;case"yyyy":e=Un(At.FullYear,4,0,!1,!0);break;case"Y":e=nv(1);break;case"YY":e=nv(2,!0);break;case"YYY":e=nv(3);break;case"YYYY":e=nv(4);break;case"M":case"L":e=Un(At.Month,1,1);break;case"MM":case"LL":e=Un(At.Month,2,1);break;case"MMM":e=Qt(xt.Months,zt.Abbreviated);break;case"MMMM":e=Qt(xt.Months,zt.Wide);break;case"MMMMM":e=Qt(xt.Months,zt.Narrow);break;case"LLL":e=Qt(xt.Months,zt.Abbreviated,ci.Standalone);break;case"LLLL":e=Qt(xt.Months,zt.Wide,ci.Standalone);break;case"LLLLL":e=Qt(xt.Months,zt.Narrow,ci.Standalone);break;case"w":e=oC(1);break;case"ww":e=oC(2);break;case"W":e=oC(1,!0);break;case"d":e=Un(At.Date,1);break;case"dd":e=Un(At.Date,2);break;case"c":case"cc":e=Un(At.Day,1);break;case"ccc":e=Qt(xt.Days,zt.Abbreviated,ci.Standalone);break;case"cccc":e=Qt(xt.Days,zt.Wide,ci.Standalone);break;case"ccccc":e=Qt(xt.Days,zt.Narrow,ci.Standalone);break;case"cccccc":e=Qt(xt.Days,zt.Short,ci.Standalone);break;case"E":case"EE":case"EEE":e=Qt(xt.Days,zt.Abbreviated);break;case"EEEE":e=Qt(xt.Days,zt.Wide);break;case"EEEEE":e=Qt(xt.Days,zt.Narrow);break;case"EEEEEE":e=Qt(xt.Days,zt.Short);break;case"a":case"aa":case"aaa":e=Qt(xt.DayPeriods,zt.Abbreviated);break;case"aaaa":e=Qt(xt.DayPeriods,zt.Wide);break;case"aaaaa":e=Qt(xt.DayPeriods,zt.Narrow);break;case"b":case"bb":case"bbb":e=Qt(xt.DayPeriods,zt.Abbreviated,ci.Standalone,!0);break;case"bbbb":e=Qt(xt.DayPeriods,zt.Wide,ci.Standalone,!0);break;case"bbbbb":e=Qt(xt.DayPeriods,zt.Narrow,ci.Standalone,!0);break;case"B":case"BB":case"BBB":e=Qt(xt.DayPeriods,zt.Abbreviated,ci.Format,!0);break;case"BBBB":e=Qt(xt.DayPeriods,zt.Wide,ci.Format,!0);break;case"BBBBB":e=Qt(xt.DayPeriods,zt.Narrow,ci.Format,!0);break;case"h":e=Un(At.Hours,1,-12);break;case"hh":e=Un(At.Hours,2,-12);break;case"H":e=Un(At.Hours,1);break;case"HH":e=Un(At.Hours,2);break;case"m":e=Un(At.Minutes,1);break;case"mm":e=Un(At.Minutes,2);break;case"s":e=Un(At.Seconds,1);break;case"ss":e=Un(At.Seconds,2);break;case"S":e=Un(At.FractionalSeconds,1);break;case"SS":e=Un(At.FractionalSeconds,2);break;case"SSS":e=Un(At.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=ev(Zo.Short);break;case"ZZZZZ":e=ev(Zo.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ev(Zo.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=ev(Zo.Long);break;default:return null}return aC[n]=e,e}(h);u+=m?m(i,t,l):"''"===h?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Xy(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Ko(n,e){const t=function p6(n){return ai(n)[Kt.LocaleId]}(n);if(Np[t]=Np[t]||{},Np[t][e])return Np[t][e];let r="";switch(e){case"shortDate":r=Ky(n,Oi.Short);break;case"mediumDate":r=Ky(n,Oi.Medium);break;case"longDate":r=Ky(n,Oi.Long);break;case"fullDate":r=Ky(n,Oi.Full);break;case"shortTime":r=Qy(n,Oi.Short);break;case"mediumTime":r=Qy(n,Oi.Medium);break;case"longTime":r=Qy(n,Oi.Long);break;case"fullTime":r=Qy(n,Oi.Full);break;case"short":const i=Ko(n,"shortTime"),s=Ko(n,"shortDate");r=Jy(Yy(n,Oi.Short),[i,s]);break;case"medium":const o=Ko(n,"mediumTime"),a=Ko(n,"mediumDate");r=Jy(Yy(n,Oi.Medium),[o,a]);break;case"long":const l=Ko(n,"longTime"),u=Ko(n,"longDate");r=Jy(Yy(n,Oi.Long),[l,u]);break;case"full":const h=Ko(n,"fullTime"),m=Ko(n,"fullDate");r=Jy(Yy(n,Oi.Full),[h,m])}return r&&(Np[t][e]=r),r}function Jy(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Rs(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Un(n,e,t=0,r=!1,i=!1){return function(s,o){let a=function R6(n,e){switch(n){case At.FullYear:return e.getFullYear();case At.Month:return e.getMonth();case At.Date:return e.getDate();case At.Hours:return e.getHours();case At.Minutes:return e.getMinutes();case At.Seconds:return e.getSeconds();case At.FractionalSeconds:return e.getMilliseconds();case At.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===At.Hours)0===a&&-12===t&&(a=12);else if(n===At.FractionalSeconds)return function x6(n,e){return Rs(n,3).substring(0,e)}(a,e);const l=hs(o,Rn.MinusSign);return Rs(a,e,l,r,i)}}function Qt(n,e,t=ci.Format,r=!1){return function(i,s){return function M6(n,e,t,r,i,s){switch(t){case xt.Months:return function _6(n,e,t){const r=ai(n),s=fs([r[Kt.MonthsFormat],r[Kt.MonthsStandalone]],e);return fs(s,t)}(e,i,r)[n.getMonth()];case xt.Days:return function g6(n,e,t){const r=ai(n),s=fs([r[Kt.DaysFormat],r[Kt.DaysStandalone]],e);return fs(s,t)}(e,i,r)[n.getDay()];case xt.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const u=function w6(n){const e=ai(n);return SO(e),(e[Kt.ExtraData][2]||[]).map(r=>"string"==typeof r?sC(r):[sC(r[0]),sC(r[1])])}(e),h=function b6(n,e,t){const r=ai(n);SO(r);const s=fs([r[Kt.ExtraData][0],r[Kt.ExtraData][1]],e)||[];return fs(s,t)||[]}(e,i,r),m=u.findIndex(g=>{if(Array.isArray(g)){const[y,E]=g,b=o>=y.hours&&a>=y.minutes,C=o<E.hours||o===E.hours&&a<E.minutes;if(y.hours<E.hours){if(b&&C)return!0}else if(b||C)return!0}else if(g.hours===o&&g.minutes===a)return!0;return!1});if(-1!==m)return h[m]}return function m6(n,e,t){const r=ai(n),s=fs([r[Kt.DayPeriodsFormat],r[Kt.DayPeriodsStandalone]],e);return fs(s,t)}(e,i,r)[o<12?0:1];case xt.Eras:return function y6(n,e){return fs(ai(n)[Kt.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function ev(n){return function(e,t,r){const i=-1*r,s=hs(t,Rn.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Zo.Short:return(i>=0?"+":"")+Rs(o,2,s)+Rs(Math.abs(i%60),2,s);case Zo.ShortGMT:return"GMT"+(i>=0?"+":"")+Rs(o,1,s);case Zo.Long:return"GMT"+(i>=0?"+":"")+Rs(o,2,s)+":"+Rs(Math.abs(i%60),2,s);case Zo.Extended:return 0===r?"Z":(i>=0?"+":"")+Rs(o,2,s)+":"+Rs(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const P6=0,tv=4;function AO(n){return Xy(n.getFullYear(),n.getMonth(),n.getDate()+(tv-n.getDay()))}function oC(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{const s=AO(t),o=function N6(n){const e=Xy(n,P6,1).getDay();return Xy(n,0,1+(e<=tv?tv:tv+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Rs(i,n,hs(r,Rn.MinusSign))}}function nv(n,e=!1){return function(t,r){return Rs(AO(t).getFullYear(),n,hs(r,Rn.MinusSign),e)}}const aC={};function xO(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function RO(n){return n instanceof Date&&!isNaN(n.valueOf())}let LO=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new tW,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){VO("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){VO("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(U($r),U(Ir))};static#t=this.\u0275dir=ce({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class tW{constructor(){this.$implicit=null,this.ngIf=null}}function VO(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Mt(e)}'.`)}const pW=new se("DATE_PIPE_DEFAULT_TIMEZONE"),mW=new se("DATE_PIPE_DEFAULT_OPTIONS");let UO=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(null==t||""===t||t!=t)return null;try{return A6(t,r??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw function Ms(n,e){return new k(2100,!1)}()}}static#e=this.\u0275fac=function(r){return new(r||n)(U(fo,16),U(pW,24),U(mW,24))};static#t=this.\u0275pipe=Zn({name:"date",type:n,pure:!0,standalone:!0})}return n})(),$O=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({})}return n})();const HO="browser";function yC(n){return n===HO}function iv(n){return"server"===n}let AW=(()=>{class n{static#e=this.\u0275prov=ye({token:n,providedIn:"root",factory:()=>new xW(ne(tr),window)})}return n})();class xW{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function RW(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class e8 extends o6{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class wC extends e8{static makeCurrent(){!function s6(n){eC||(eC=n)}(new wC)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function t8(){return Fp=Fp||document.querySelector("base"),Fp?Fp.getAttribute("href"):null}();return null==t?null:function n8(n){av=av||document.createElement("a"),av.setAttribute("href",n);const e=av.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Fp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Q6(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let av,Fp=null,i8=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const bC=new se("EventManagerPlugins");let ZO=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new k(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(ne(bC),ne(ut))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();class KO{constructor(e){this._doc=e}}const IC="ng-app-id";let QO=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=iv(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${IC}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(IC),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(IC,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(ne(tr),ne(dy),ne(SI,8),ne(us))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const CC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},TC=/%COMP%/g,l8=new se("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function XO(n,e){return e.map(t=>t.replace(TC,n))}let DC=(()=>{class n{constructor(t,r,i,s,o,a,l,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=iv(a),this.defaultRenderer=new SC(t,o,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ei.ShadowDom&&(r={...r,encapsulation:ei.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof e1?i.applyToHost(t):i instanceof AC&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case ei.Emulated:s=new e1(l,u,r,this.appId,h,o,a,m);break;case ei.ShadowDom:return new h8(l,u,t,r,o,a,this.nonce,m);default:s=new AC(l,u,r,h,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(ne(ZO),ne(QO),ne(dy),ne(l8),ne(tr),ne(us),ne(ut),ne(SI))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();class SC{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(CC[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(JO(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(JO(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new k(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=CC[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=CC[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ba.DashCase|Ba.Important)?e.style.setProperty(t,r,i&Ba.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ba.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Ga().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function JO(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class h8 extends SC{constructor(e,t,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=XO(i.id,i.styles);for(const h of u){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=h,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class AC extends SC{constructor(e,t,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?XO(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class e1 extends AC{constructor(e,t,r,i,s,o,a,l){const u=i+"-"+r.id;super(e,t,r,s,o,a,l,u),this.contentAttr=function c8(n){return"_ngcontent-%COMP%".replace(TC,n)}(u),this.hostAttr=function u8(n){return"_nghost-%COMP%".replace(TC,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let f8=(()=>{class n extends KO{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(ne(tr))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const t1=["alt","control","meta","shift"],p8={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},m8={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let g8=(()=>{class n extends KO{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ga().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),t1.forEach(u=>{const h=r.indexOf(u);h>-1&&(r.splice(h,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=p8[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),t1.forEach(o=>{o!==i&&(0,m8[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(ne(tr))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const r1=[{provide:us,useValue:HO},{provide:iM,useValue:function _8(){wC.makeCurrent()},multi:!0},{provide:tr,useFactory:function v8(){return function XH(n){fI=n}(document),document},deps:[]}],E8=Qk(q9,"browser",r1),w8=new se(""),s1=[{provide:Hy,useClass:class r8{addToWindow(e){Dt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new k(5103,!1);return s},Dt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Dt.getAllAngularRootElements=()=>e.getAllRootElements(),Dt.frameworkStabilizers||(Dt.frameworkStabilizers=[]),Dt.frameworkStabilizers.push(r=>{const i=Dt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Ga().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:qk,useClass:$0,deps:[ut,H0,Hy]},{provide:$0,useClass:$0,deps:[ut,H0,Hy]}],o1=[{provide:II,useValue:"root"},{provide:Ho,useFactory:function y8(){return new Ho},deps:[]},{provide:bC,useClass:f8,multi:!0,deps:[tr,ut,us]},{provide:bC,useClass:g8,multi:!0,deps:[tr]},DC,QO,ZO,{provide:cp,useExisting:DC},{provide:class MW{},useClass:i8,deps:[]},[]];let a1=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:dy,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(ne(w8,12))};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({providers:[...o1,...s1],imports:[$O,G9]})}return n})(),l1=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(ne(tr))};static#t=this.\u0275prov=ye({token:n,factory:function(r){let i=null;return i=r?new r:function I8(){return new l1(ne(tr))}(),i},providedIn:"root"})}return n})();function h1(n){return!!n&&(n instanceof Je||w(n.lift)&&w(n.subscribe))}typeof window<"u"&&window;const{isArray:A8}=Array,{getPrototypeOf:x8,prototype:R8,keys:M8}=Object;function f1(n){if(1===n.length){const e=n[0];if(A8(e))return{args:e,keys:null};if(function P8(n){return n&&"object"==typeof n&&x8(n)===R8}(e)){const t=M8(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:N8}=Array;function RC(n){return _e(e=>function k8(n,e){return N8(e)?n(...e):n(e)}(n,e))}function p1(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function lv(...n){const e=Bs(n),t=pa(n),{args:r,keys:i}=f1(n);if(0===r.length)return S([],e);const s=new Je(function O8(n,e,t=Sn){return r=>{m1(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)m1(e,()=>{const u=S(n[l],e);let h=!1;u.subscribe(fe(r,m=>{s[l]=m,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>p1(i,o):Sn));return t?s.pipe(RC(t)):s}function m1(n,e,t){n?sr(t,n,e):e()}const cv=Oe(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function kd(...n){return function F8(){return xi(1)}()(S(n,Bs(n)))}function uv(n){return new Je(e=>{nn(n()).subscribe(e)})}function Od(n,e){const t=w(n)?n:()=>n,r=i=>i.error(t());return new Je(e?i=>e.schedule(r,0,i):r)}function MC(){return $((n,e)=>{let t=null;n._refCount++;const r=fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class dv extends Je{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ee(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new gt;const t=this.getSubject();e.add(this.source.subscribe(fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=gt.EMPTY)}return e}refCount(){return MC()(this)}}function Dr(n){return n<=0?()=>On:$((e,t)=>{let r=0;e.subscribe(fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Lp(...n){const e=Bs(n);return $((t,r)=>{(e?kd(n,t,e):kd(n,t)).subscribe(r)})}function ur(n,e){return $((t,r)=>{let i=0;t.subscribe(fe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function hv(n){return $((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function g1(n=L8){return $((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function L8(){return new cv}function Za(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ur((i,s)=>n(i,s,r)):Sn,Dr(1),t?hv(e):g1(()=>new cv))}function Vp(n,e){return w(e)?Lt(n,e,1):Lt(n,1)}function dr(n,e,t){const r=w(n)||e||t?{next:n,error:e,complete:t}:n;return r?$((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(fe(s,l=>{var u;null===(u=r.next)||void 0===u||u.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,l),s.error(l)},()=>{var l,u;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):Sn}function Cc(n){return $((e,t)=>{let s,r=null,i=!1;r=e.subscribe(fe(t,void 0,void 0,o=>{s=nn(n(o,Cc(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function fv(n,e){return $(function V8(n,e,t,r,i){return(s,o)=>{let a=t,l=e,u=0;s.subscribe(fe(o,h=>{const m=u++;l=a?n(l,h,m):(a=!0,h),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}function PC(n){return n<=0?()=>On:$((e,t)=>{let r=[];e.subscribe(fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function _1(n){return _e(()=>n)}function NC(n){return $((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Tc(n){return $((e,t)=>{nn(n).subscribe(fe(t,()=>t.complete(),we)),!t.closed&&e.subscribe(t)})}const Ye="primary",Bp=Symbol("RouteTitle");class U8{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Fd(n){return new U8(n)}function j8(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function po(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!y1(n[i],e[i]))return!1;return!0}function y1(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function v1(n){return n.length>0?n[n.length-1]:null}function Ka(n){return h1(n)?n:vp(n)?S(Promise.resolve(n)):q(n)}const H8={exact:function b1(n,e,t){if(!Dc(n.segments,e.segments)||!pv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!b1(n.children[r],e.children[r],t))return!1;return!0},subset:I1},E1={exact:function z8(n,e){return po(n,e)},subset:function q8(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>y1(n[t],e[t]))},ignored:()=>!0};function w1(n,e,t){return H8[t.paths](n.root,e.root,t.matrixParams)&&E1[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function I1(n,e,t){return C1(n,e,e.segments,t)}function C1(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Dc(i,t)||e.hasChildren()||!pv(i,t,r))}if(n.segments.length===t.length){if(!Dc(n.segments,t)||!pv(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!I1(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Dc(n.segments,i)&&pv(n.segments,i,r)&&n.children[Ye])&&C1(n.children[Ye],e,s,r)}}function pv(n,e,t){return e.every((r,i)=>E1[t](n[i].parameters,r.parameters))}class Ld{constructor(e=new Pt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fd(this.queryParams)),this._queryParamMap}toString(){return Z8.serialize(this)}}class Pt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mv(this)}}class Up{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Fd(this.parameters)),this._parameterMap}toString(){return S1(this)}}function Dc(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let jp=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:function(){return new kC},providedIn:"root"})}return n})();class kC{parse(e){const t=new s7(e);return new Ld(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${$p(e.root,!0)}`,r=function Y8(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${gv(t)}=${gv(i)}`).join("&"):`${gv(t)}=${gv(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function K8(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Z8=new kC;function mv(n){return n.segments.map(e=>S1(e)).join("/")}function $p(n,e){if(!n.hasChildren())return mv(n);if(e){const t=n.children[Ye]?$p(n.children[Ye],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Ye&&r.push(`${i}:${$p(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function W8(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ye&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ye&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Ye?[$p(n.children[Ye],!1)]:[`${i}:${$p(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ye]?`${mv(n)}/${t[0]}`:`${mv(n)}/(${t.join("//")})`}}function T1(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gv(n){return T1(n).replace(/%3B/gi,";")}function OC(n){return T1(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _v(n){return decodeURIComponent(n)}function D1(n){return _v(n.replace(/\+/g,"%20"))}function S1(n){return`${OC(n.path)}${function Q8(n){return Object.keys(n).map(e=>`;${OC(e)}=${OC(n[e])}`).join("")}(n.parameters)}`}const X8=/^[^\/()?;#]+/;function FC(n){const e=n.match(X8);return e?e[0]:""}const J8=/^[^\/()?;=#]+/,t7=/^[^=?&#]+/,r7=/^[^&#]+/;class s7{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pt([],{}):new Pt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ye]=new Pt(e,t)),r}parseSegment(){const e=FC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new k(4009,!1);return this.capture(e),new Up(_v(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function e7(n){const e=n.match(J8);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=FC(this.remaining);i&&(r=i,this.capture(r))}e[_v(t)]=_v(r)}parseQueryParam(e){const t=function n7(n){const e=n.match(t7);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function i7(n){const e=n.match(r7);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=D1(t),s=D1(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=FC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new k(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ye);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Ye]:new Pt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new k(4011,!1)}}function A1(n){return n.segments.length>0?new Pt([],{[Ye]:n}):n}function x1(n){const e={};for(const r of Object.keys(n.children)){const s=x1(n.children[r]);if(r===Ye&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function o7(n){if(1===n.numberOfChildren&&n.children[Ye]){const e=n.children[Ye];return new Pt(n.segments.concat(e.segments),e.children)}return n}(new Pt(n.segments,e))}function Sc(n){return n instanceof Ld}function R1(n){let e;const i=A1(function t(s){const o={};for(const l of s.children){const u=t(l);o[l.outlet]=u}const a=new Pt(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function M1(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return LC(i,i,i,t,r);const s=function l7(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new N1(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,u])=>{a[l]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new N1(t,e,r)}(e);if(s.toRoot())return LC(i,i,new Pt([],{}),t,r);const o=function c7(n,e,t){if(n.isAbsolute)return new vv(e,!0,0);if(!t)return new vv(e,!1,NaN);if(null===t.parent)return new vv(t,!0,0);const r=yv(n.commands[0])?0:1;return function u7(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new k(4005,!1);i=r.segments.length}return new vv(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?zp(o.segmentGroup,o.index,s.commands):k1(o.segmentGroup,o.index,s.commands);return LC(i,o.segmentGroup,a,t,r)}function yv(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Hp(n){return"object"==typeof n&&null!=n&&n.outlets}function LC(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`}),o=n===e?t:P1(n,e,t);const a=A1(x1(o));return new Ld(a,s,i)}function P1(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:P1(s,e,t)}),new Pt(n.segments,r)}class N1{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&yv(r[0]))throw new k(4003,!1);const i=r.find(Hp);if(i&&i!==v1(r))throw new k(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class vv{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function k1(n,e,t){if(n||(n=new Pt([],{})),0===n.segments.length&&n.hasChildren())return zp(n,e,t);const r=function h7(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Hp(a))break;const l=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&u&&"object"==typeof u&&void 0===u.outlets){if(!F1(l,u,o))return s;r+=2}else{if(!F1(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Pt(n.segments.slice(0,r.pathIndex),{});return s.children[Ye]=new Pt(n.segments.slice(r.pathIndex),n.children),zp(s,0,i)}return r.match&&0===i.length?new Pt(n.segments,{}):r.match&&!n.hasChildren()?VC(n,e,t):r.match?zp(n,0,i):VC(n,e,t)}function zp(n,e,t){if(0===t.length)return new Pt(n.segments,{});{const r=function d7(n){return Hp(n[0])?n[0].outlets:{[Ye]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Ye)&&n.children[Ye]&&1===n.numberOfChildren&&0===n.children[Ye].segments.length){const s=zp(n.children[Ye],e,t);return new Pt(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=k1(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Pt(n.segments,i)}}function VC(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Hp(s)){const l=f7(s.outlets);return new Pt(r,l)}if(0===i&&yv(t[0])){r.push(new Up(n.segments[e].path,O1(t[0]))),i++;continue}const o=Hp(s)?s.outlets[Ye]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&yv(a)?(r.push(new Up(o,O1(a))),i+=2):(r.push(new Up(o,{})),i++)}return new Pt(r,{})}function f7(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=VC(new Pt([],{}),0,r))}),e}function O1(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function F1(n,e,t){return n==t.path&&po(e,t.parameters)}const qp="imperative";class mo{constructor(e,t){this.id=e,this.url=t}}class Ev extends mo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Qa extends mo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Gp extends mo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vd extends mo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class wv extends mo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class L1 extends mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class p7 extends mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class m7 extends mo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class g7 extends mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _7 extends mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class y7{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class v7{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class E7{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class w7{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class b7{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class I7{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class V1{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class BC{}class UC{constructor(e){this.url=e}}class C7{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Wp,this.attachRef=null}}let Wp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new C7,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class B1{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=jC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=jC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=$C(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $C(e,this._root).map(t=>t.value)}}function jC(n,e){if(n===e.value)return e;for(const t of e.children){const r=jC(n,t);if(r)return r}return null}function $C(n,e){if(n===e.value)return[e];for(const t of e.children){const r=$C(n,t);if(r.length)return r.unshift(e),r}return[]}class Qo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Bd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class U1 extends B1{constructor(e,t){super(e),this.snapshot=t,HC(this,e)}toString(){return this.snapshot.toString()}}function j1(n,e){const t=function T7(n,e){const o=new bv([],{},{},"",{},Ye,e,null,{});return new H1("",new Qo(o,[]))}(0,e),r=new P([new Up("",{})]),i=new P({}),s=new P({}),o=new P({}),a=new P(""),l=new Ud(r,i,o,a,s,Ye,e,t.root);return l.snapshot=t.root,new U1(new Qo(l,[]),t)}class Ud{constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(_e(u=>u[Bp]))??q(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(_e(e=>Fd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(_e(e=>Fd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $1(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function D7(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class bv{get title(){return this.data?.[Bp]}constructor(e,t,r,i,s,o,a,l,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class H1 extends B1{constructor(e,t){super(t),this.url=e,HC(this,t)}toString(){return z1(this._root)}}function HC(n,e){e.value._routerState=n,e.children.forEach(t=>HC(n,t))}function z1(n){const e=n.children.length>0?` { ${n.children.map(z1).join(", ")} } `:"";return`${n.value}${e}`}function zC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,po(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),po(e.params,t.params)||n.paramsSubject.next(t.params),function $8(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!po(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),po(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function qC(n,e){const t=po(n.params,e.params)&&function G8(n,e){return Dc(n,e)&&n.every((t,r)=>po(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||qC(n.parent,e.parent))}let GC=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ye,this.activateEvents=new mn,this.deactivateEvents=new mn,this.attachEvents=new mn,this.detachEvents=new mn,this.parentContexts=me(Wp),this.location=me($r),this.changeDetector=me(Mp),this.environmentInjector=me(cs),this.inputBinder=me(Iv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new k(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new k(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new k(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new k(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new S7(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=ce({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[lr]})}return n})();class S7{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ud?this.route:e===Wp?this.childContexts:this.parent.get(e,t)}}const Iv=new se("");let q1=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=lv([r.queryParams,r.params,r.data]).pipe(ht(([s,o,a],l)=>(a={...s,...o,...a},0===l?q(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function i6(n){const e=lt(n);if(!e)return null;const t=new pp(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();function Zp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function x7(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Zp(n,r,i);return Zp(n,r)})}(n,e,t);return new Qo(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Zp(n,a)),o}}const r=function R7(n){return new Ud(new P(n.url),new P(n.params),new P(n.queryParams),new P(n.fragment),new P(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Zp(n,s));return new Qo(r,i)}}const WC="ngNavigationCancelingError";function G1(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Sc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=W1(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function W1(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[WC]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Z1(n){return n&&n[WC]}let K1=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ar({type:n,selectors:[["ng-component"]],standalone:!0,features:[KN],decls:1,vars:0,template:function(r,i){1&r&&_c(0,"router-outlet")},dependencies:[GC],encapsulation:2})}return n})();function ZC(n){const e=n.children&&n.children.map(ZC),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ye&&(t.component=K1),t}function Ps(n){return n.outlet||Ye}function Kp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class V7{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),zC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Bd(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Bd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Bd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Bd(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new I7(s.value.snapshot))}),e.children.length&&this.forwardEvent(new w7(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(zC(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),zC(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Kp(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class Q1{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Cv{constructor(e,t){this.component=e,this.route=t}}function B7(n,e,t){const r=n._root;return Qp(r,e?e._root:null,t,[r.value])}function jd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function Jw(n){return null!==Ml(n)}(n)?e.get(n):n:r}function Qp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Bd(e);return n.children.forEach(o=>{(function j7(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function $7(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Dc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Dc(n.url,e.url)||!po(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qC(n,e)||!po(n.queryParams,e.queryParams);default:return!qC(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Q1(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Qp(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Cv(a.outlet.component,o))}else o&&Yp(e,a,i),i.canActivateChecks.push(new Q1(r)),Qp(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Yp(a,t.getContext(o),i)),i}function Yp(n,e,t){const r=Bd(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Yp(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Cv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Xp(n){return"function"==typeof n}function Y1(n){return n instanceof cv||"EmptyError"===n?.name}const Tv=Symbol("INITIAL_VALUE");function $d(){return ht(n=>lv(n.map(e=>e.pipe(Dr(1),Lp(Tv)))).pipe(_e(e=>{for(const t of e)if(!0!==t){if(t===Tv)return Tv;if(!1===t||t instanceof Ld)return t}return!0}),ur(e=>e!==Tv),Dr(1)))}function X1(n){return function zi(...n){return qi(n)}(dr(e=>{if(Sc(e))throw G1(0,e)}),_e(e=>!0===e))}class Dv{constructor(e){this.segmentGroup=e||null}}class J1{constructor(e){this.urlTree=e}}function Hd(n){return Od(new Dv(n))}function eF(n){return Od(new J1(n))}class lZ{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new k(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return q(r);if(i.numberOfChildren>1||!i.children[Ye])return Od(new k(4e3,!1));i=i.children[Ye]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Ld(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new Pt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new k(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const KC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cZ(n,e,t,r,i){const s=QC(n,e,t);return s.matched?(r=function P7(n,e){return n.providers&&!n._injector&&(n._injector=T0(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function sZ(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?q(i.map(o=>{const a=jd(o,n);return Ka(function Z7(n){return n&&Xp(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe($d(),X1()):q(!0)}(r,e,t).pipe(_e(o=>!0===o?s:{...KC}))):q(s)}function QC(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...KC}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||j8)(t,n,e);if(!i)return{...KC};const s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function tF(n,e,t,r){return t.length>0&&function hZ(n,e,t){return t.some(r=>Sv(n,e,r)&&Ps(r)!==Ye)}(n,t,r)?{segmentGroup:new Pt(e,dZ(r,new Pt(t,n.children))),slicedSegments:[]}:0===t.length&&function fZ(n,e,t){return t.some(r=>Sv(n,e,r))}(n,t,r)?{segmentGroup:new Pt(n.segments,uZ(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Pt(n.segments,n.children),slicedSegments:t}}function uZ(n,e,t,r,i){const s={};for(const o of r)if(Sv(n,t,o)&&!i[Ps(o)]){const a=new Pt([],{});s[Ps(o)]=a}return{...i,...s}}function dZ(n,e){const t={};t[Ye]=e;for(const r of n)if(""===r.path&&Ps(r)!==Ye){const i=new Pt([],{});t[Ps(r)]=i}return t}function Sv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class _Z{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new lZ(this.urlSerializer,this.urlTree)}noMatchError(e){return new k(4002,!1)}recognize(){const e=tF(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ye).pipe(Cc(t=>{if(t instanceof J1)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Dv?this.noMatchError(t):t}),_e(t=>{const r=new bv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ye,this.rootComponentType,null,{}),i=new Qo(r,t),s=new H1("",i),o=function a7(n,e,t=null,r=null){return M1(R1(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Ye).pipe(Cc(r=>{throw r instanceof Dv?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=$1(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return S(i).pipe(Vp(s=>{const o=r.children[s],a=function F7(n,e){const t=n.filter(r=>Ps(r)===e);return t.push(...n.filter(r=>Ps(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),fv((s,o)=>(s.push(...o),s)),hv(null),function B8(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ur((i,s)=>n(i,s,r)):Sn,PC(1),t?hv(e):g1(()=>new cv))}(),Lt(s=>{if(null===s)return Hd(r);const o=nF(s);return function yZ(n){n.sort((e,t)=>e.value.outlet===Ye?-1:t.value.outlet===Ye?1:e.value.outlet.localeCompare(t.value.outlet))}(o),q(o)}))}processSegment(e,t,r,i,s,o){return S(t).pipe(Vp(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Cc(l=>{if(l instanceof Dv)return q(null);throw l}))),Za(a=>!!a),Cc(a=>{if(Y1(a))return function mZ(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?q([]):Hd(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function pZ(n,e,t,r){return!!(Ps(n)===r||r!==Ye&&Sv(e,t,n))&&("**"===n.path||QC(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Hd(i):Hd(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?eF(s):this.applyRedirects.lineralizeSegments(r,s).pipe(Lt(o=>{const a=new Pt(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:u,positionalParamSegments:h}=QC(t,i,s);if(!a)return Hd(t);const m=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,h);return i.redirectTo.startsWith("/")?eF(m):this.applyRedirects.lineralizeSegments(i,m).pipe(Lt(g=>this.processSegment(e,r,t,g.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const l=i.length>0?v1(i).parameters:{};a=q({snapshot:new bv(i,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rF(r),Ps(r),r.component??r._loadedComponent??null,r,iF(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=cZ(t,r,i,e).pipe(_e(({matched:l,consumedSegments:u,remainingSegments:h,parameters:m})=>l?{snapshot:new bv(u,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rF(r),Ps(r),r.component??r._loadedComponent??null,r,iF(r)),consumedSegments:u,remainingSegments:h}:null));return a.pipe(ht(l=>null===l?Hd(t):this.getChildConfig(e=r._injector??e,r,i).pipe(ht(({routes:u})=>{const h=r._loadedInjector??e,{snapshot:m,consumedSegments:g,remainingSegments:y}=l,{segmentGroup:E,slicedSegments:b}=tF(t,g,y,u);if(0===b.length&&E.hasChildren())return this.processChildren(h,u,E).pipe(_e(N=>null===N?null:[new Qo(m,N)]));if(0===u.length&&0===b.length)return q([new Qo(m,[])]);const C=Ps(r)===s;return this.processSegment(h,u,E,b,C?Ye:s,!0).pipe(_e(N=>[new Qo(m,N)]))}))))}getChildConfig(e,t,r){return t.children?q({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?q({routes:t._loadedRoutes,injector:t._loadedInjector}):function iZ(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?q(!0):q(i.map(o=>{const a=jd(o,n);return Ka(function z7(n){return n&&Xp(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe($d(),X1())}(e,t,r).pipe(Lt(i=>i?this.configLoader.loadChildren(e,t).pipe(dr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function aZ(n){return Od(W1(!1,3))}())):q({routes:[],injector:e})}}function vZ(n){const e=n.value.routeConfig;return e&&""===e.path}function nF(n){const e=[],t=new Set;for(const r of n){if(!vZ(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=nF(r.children);e.push(new Qo(r.value,i))}return e.filter(r=>!t.has(r))}function rF(n){return n.data||{}}function iF(n){return n.resolve||{}}function sF(n){return"string"==typeof n.title||null===n.title}function YC(n){return ht(e=>{const t=n(e);return t?S(t).pipe(_e(()=>e)):q(e)})}const zd=new se("ROUTES");let XC=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=me(jk)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return q(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ka(t.loadComponent()).pipe(_e(oF),dr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),NC(()=>{this.componentLoaders.delete(t)})),i=new dv(r,()=>new j).pipe(MC());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function DZ(n,e,t,r){return Ka(n.loadChildren()).pipe(_e(oF),Lt(i=>i instanceof WN||Array.isArray(i)?q(i):S(e.compileModuleAsync(i))),_e(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(zd,[],{optional:!0,self:!0}).flat()),{routes:o.map(ZC),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(NC(()=>{this.childrenLoaders.delete(r)})),o=new dv(s,()=>new j).pipe(MC());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oF(n){return function SZ(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Av=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new j,this.transitionAbortSubject=new j,this.configLoader=me(XC),this.environmentInjector=me(cs),this.urlSerializer=me(jp),this.rootContexts=me(Wp),this.inputBindingEnabled=null!==me(Iv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>q(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new v7(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new y7(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new P({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:qp,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ur(s=>0!==s.id),_e(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),ht(s=>{this.currentTransition=s;let o=!1,a=!1;return q(s).pipe(dr(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ht(l=>{const u=l.currentBrowserUrl.toString(),h=!t.navigated||l.extractedUrl.toString()!==u||u!==l.currentUrlTree.toString();if(!h&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const g="";return this.events.next(new Vd(l.id,this.urlSerializer.serialize(l.rawUrl),g,0)),l.resolve(null),On}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return q(l).pipe(ht(g=>{const y=this.transitions?.getValue();return this.events.next(new Ev(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),y!==this.transitions?.getValue()?On:Promise.resolve(g)}),function EZ(n,e,t,r,i,s){return Lt(o=>function gZ(n,e,t,r,i,s,o="emptyOnly"){return new _Z(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(_e(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),dr(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects};const y=new L1(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}));if(h&&t.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:g,extractedUrl:y,source:E,restoredState:b,extras:C}=l,N=new Ev(g,this.urlSerializer.serialize(y),E,b);this.events.next(N);const R=j1(0,this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:R,urlAfterRedirects:y,extras:{...C,skipLocationChange:!1,replaceUrl:!1}},q(s)}{const g="";return this.events.next(new Vd(l.id,this.urlSerializer.serialize(l.extractedUrl),g,1)),l.resolve(null),On}}),dr(l=>{const u=new p7(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),_e(l=>(this.currentTransition=s={...l,guards:B7(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function Q7(n,e){return Lt(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?q({...t,guardsResult:!0}):function Y7(n,e,t,r){return S(n).pipe(Lt(i=>function rZ(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?q(s.map(a=>{const l=Kp(e)??i,u=jd(a,l);return Ka(function W7(n){return n&&Xp(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,r):l.runInContext(()=>u(n,e,t,r))).pipe(Za())})).pipe($d()):q(!0)}(i.component,i.route,t,e,r)),Za(i=>!0!==i,!0))}(o,r,i,n).pipe(Lt(a=>a&&function H7(n){return"boolean"==typeof n}(a)?function X7(n,e,t,r){return S(e).pipe(Vp(i=>kd(function eZ(n,e){return null!==n&&e&&e(new E7(n)),q(!0)}(i.route.parent,r),function J7(n,e){return null!==n&&e&&e(new b7(n)),q(!0)}(i.route,r),function nZ(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function U7(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>uv(()=>q(o.guards.map(l=>{const u=Kp(o.node)??t,h=jd(l,u);return Ka(function G7(n){return n&&Xp(n.canActivateChild)}(h)?h.canActivateChild(r,n):u.runInContext(()=>h(r,n))).pipe(Za())})).pipe($d())));return q(s).pipe($d())}(n,i.path,t),function tZ(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return q(!0);const i=r.map(s=>uv(()=>{const o=Kp(e)??t,a=jd(s,o);return Ka(function q7(n){return n&&Xp(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Za())}));return q(i).pipe($d())}(n,i.route,t))),Za(i=>!0!==i,!0))}(r,s,n,e):q(a)),_e(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),dr(l=>{if(s.guardsResult=l.guardsResult,Sc(l.guardsResult))throw G1(0,l.guardsResult);const u=new m7(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),ur(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),YC(l=>{if(l.guards.canActivateChecks.length)return q(l).pipe(dr(u=>{const h=new g7(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),ht(u=>{let h=!1;return q(u).pipe(function wZ(n,e){return Lt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return q(t);let s=0;return S(i).pipe(Vp(o=>function bZ(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!sF(i)&&(s[Bp]=i.title),function IZ(n,e,t,r){const i=function CZ(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return q({});const s={};return S(i).pipe(Lt(o=>function TZ(n,e,t,r){const i=Kp(e)??r,s=jd(n,i);return Ka(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Za(),dr(a=>{s[o]=a}))),PC(1),_1(s),Cc(o=>Y1(o)?On:Od(o)))}(s,n,e,r).pipe(_e(o=>(n._resolvedData=o,n.data=$1(n,t).resolve,i&&sF(i)&&(n.data[Bp]=i.title),null)))}(o.route,r,n,e)),dr(()=>s++),PC(1),Lt(o=>s===i.length?q(t):On))})}(t.paramsInheritanceStrategy,this.environmentInjector),dr({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(u,"",2)}}))}),dr(u=>{const h=new _7(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),YC(l=>{const u=h=>{const m=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(h.routeConfig).pipe(dr(g=>{h.component=g}),_e(()=>{})));for(const g of h.children)m.push(...u(g));return m};return lv(u(l.targetSnapshot.root)).pipe(hv(),Dr(1))}),YC(()=>this.afterPreactivation()),_e(l=>{const u=function A7(n,e,t){const r=Zp(n,e._root,t?t._root:void 0);return new U1(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:u},s}),dr(()=>{this.events.next(new BC)}),((n,e,t,r)=>_e(i=>(new V7(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Dr(1),dr({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Qa(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Tc(this.transitionAbortSubject.pipe(dr(l=>{throw l}))),NC(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Cc(l=>{if(a=!0,Z1(l))this.events.next(new Gp(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function M7(n){return Z1(n)&&Sc(n.url)}(l)?this.events.next(new UC(l.url)):s.resolve(!1);else{this.events.next(new wv(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(l))}catch(u){s.reject(u)}}return On}))}))}cancelNavigationTransition(t,r,i){const s=new Gp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aF(n){return n!==qp}let lF=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ye);return r}getResolvedTitleForRoute(t){return t.data[Bp]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:function(){return me(AZ)},providedIn:"root"})}return n})(),AZ=(()=>{class n extends lF{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(ne(l1))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:function(){return me(MZ)},providedIn:"root"})}return n})();class RZ{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let MZ=(()=>{class n extends RZ{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=yt(n)))(i||n)}}();static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const xv=new se("",{providedIn:"root",factory:()=>({})});let PZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:function(){return me(NZ)},providedIn:"root"})}return n})(),NZ=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Jp=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Jp||{});function cF(n,e){n.events.pipe(ur(t=>t instanceof Qa||t instanceof Gp||t instanceof wv||t instanceof Vd),_e(t=>t instanceof Qa||t instanceof Vd?Jp.COMPLETE:t instanceof Gp&&(0===t.code||1===t.code)?Jp.REDIRECTING:Jp.FAILED),ur(t=>t!==Jp.REDIRECTING),Dr(1)).subscribe(()=>{e()})}function kZ(n){throw n}function OZ(n,e,t){return e.parse("/")}const FZ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LZ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Fi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=me(Bk),this.isNgZoneEnabled=!1,this._events=new j,this.options=me(xv,{optional:!0})||{},this.pendingTasks=me(Uk),this.errorHandler=this.options.errorHandler||kZ,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||OZ,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=me(PZ),this.routeReuseStrategy=me(xZ),this.titleStrategy=me(lF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=me(zd,{optional:!0})?.flat()??[],this.navigationTransitions=me(Av),this.urlSerializer=me(jp),this.location=me(rC),this.componentInputBindingEnabled=!!me(Iv,{optional:!0}),this.eventsSubscription=new gt,this.isNgZoneEnabled=me(ut)instanceof ut&&ut.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ld,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=j1(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(uF(r)&&this._events.next(r));if(r instanceof Ev)aF(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Vd)this.rawUrlTree=i.rawUrl;else if(r instanceof L1){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof BC)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Gp)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof UC){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||aF(i.source)};this.scheduleNavigation(s,qp,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof wv&&this.restoreHistory(i,!0),r instanceof Qa&&(this.navigated=!0),uF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),qp,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ZC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:o;let m,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}null!==h&&(h=this.removeEmptyProps(h));try{m=R1(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return M1(m,t,h,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Sc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,qp,null,r)}navigate(t,r={skipLocationChange:!1}){return function VZ(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new k(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...FZ}:!1===r?{...LZ}:r,Sc(t))return w1(this.currentUrlTree,t,i);const s=this.parseUrl(t);return w1(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,u;o?(a=o.resolve,l=o.reject,u=o.promise):u=new Promise((m,g)=>{a=m,l=g});const h=this.pendingTasks.add();return cF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uF(n){return!(n instanceof BC||n instanceof UC)}class dF{}let jZ=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ur(t=>t instanceof Qa),Vp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=T0(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return S(i).pipe(xi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):q(null);const s=i.pipe(Lt(o=>null===o?q(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?S([s,this.loader.loadComponent(r)]).pipe(xi()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(ne(Fi),ne(jk),ne(cs),ne(dF),ne(XC))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const eT=new se("");let hF=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ev?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Qa?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Vd&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof V1&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new V1(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function FM(){throw new Error("invalid")}()};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();function Yo(n,e){return{\u0275kind:n,\u0275providers:e}}function pF(){const n=me(Ei);return e=>{const t=n.get(qa);if(e!==t.components[0])return;const r=n.get(Fi),i=n.get(mF);1===n.get(tT)&&r.initialNavigation(),n.get(gF,null,at.Optional)?.setUpPreloading(),n.get(eT,null,at.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const mF=new se("",{factory:()=>new j}),tT=new se("",{providedIn:"root",factory:()=>1}),gF=new se("");function qZ(n){return Yo(0,[{provide:gF,useExisting:jZ},{provide:dF,useExisting:n}])}const _F=new se("ROUTER_FORROOT_GUARD"),WZ=[rC,{provide:jp,useClass:kC},Fi,Wp,{provide:Ud,useFactory:function fF(n){return n.routerState.root},deps:[Fi]},XC,[]];function ZZ(){return new Zk("Router",Fi)}let yF=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[WZ,[],{provide:zd,multi:!0,useValue:t},{provide:_F,useFactory:XZ,deps:[[Fi,new hc,new Ju]]},{provide:xv,useValue:r||{}},r?.useHash?{provide:Ic,useClass:c6}:{provide:Ic,useClass:CO},{provide:eT,useFactory:()=>{const n=me(AW),e=me(ut),t=me(xv),r=me(Av),i=me(jp);return t.scrollOffset&&n.setOffset(t.scrollOffset),new hF(i,r,n,e,t)}},r?.preloadingStrategy?qZ(r.preloadingStrategy).\u0275providers:[],{provide:Zk,multi:!0,useFactory:ZZ},r?.initialNavigation?JZ(r):[],r?.bindToComponentInputs?Yo(8,[q1,{provide:Iv,useExisting:q1}]).\u0275providers:[],[{provide:vF,useFactory:pF},{provide:G0,multi:!0,useExisting:vF}]]}}static forChild(t){return{ngModule:n,providers:[{provide:zd,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(ne(_F,8))};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({})}return n})();function XZ(n){return"guarded"}function JZ(n){return["disabled"===n.initialNavigation?Yo(3,[{provide:jy,multi:!0,useFactory:()=>{const e=me(Fi);return()=>{e.setUpLocationChangeListener()}}},{provide:tT,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Yo(2,[{provide:tT,useValue:0},{provide:jy,multi:!0,deps:[Ei],useFactory:e=>{const t=e.get(a6,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Fi),s=e.get(mF);cF(i,()=>{r(!0)}),e.get(Av).afterPreactivation=()=>(r(!0),s.closed?q(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const vF=new se(""),tK=[];let nK=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({imports:[yF.forRoot(tK),yF]})}return n})();var qd=ze(534);(0,qd.registerVersion)("firebase","10.7.0","app");class sK extends gt{constructor(e,t){super()}schedule(e,t=0){return this}}const Rv={setInterval(n,e,...t){const{delegate:r}=Rv;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Rv;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class Mv extends sK{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Rv.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Rv.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Fe(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const nT={now:()=>(nT.delegate||Date).now(),delegate:void 0};class em{constructor(e,t=em.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}em.now=nT.now;class Pv extends em{constructor(e,t=em.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const lK=new class aK extends Pv{}(class oK extends Mv{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),Gd=new Pv(Mv),cK=Gd,EF=new ja("ANGULARFIRE2_VERSION");class wF{constructor(){return((n,e)=>{const t=(0,qd.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(dK)}}const dK="app-check";function Wd(){}class bF{zone;delegate;constructor(e,t=lK){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class hK{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wd,{},Wd,Wd)),t.pipe(dr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let IF=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new bF(Zone.current)),this.insideAngular=t.run(()=>new bF(Zone.current,Gd)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ne(ut))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Li(n){return function pK(n){return function(t){return(t=t.lift(new hK(n.ngZone))).pipe(Or(n.outsideAngular),vr(n.insideAngular))}}(function Zd(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var xc=ze(106);xc.Z.registerVersion("firebase","10.7.0","app-compat");const yK=["ngOnDestroy"];class CF{constructor(e){return e}}const tm=new se("angularfire2.app.options"),Nv=new se("angularfire2.app.name");function rT(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=xc.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>xc.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;wK("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new CF(o)}const wK=(n,...e)=>{},bK={provide:CF,useFactory:rT,deps:[tm,ut,[new hc,Nv]]};let IK=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:tm,useValue:t},{provide:Nv,useValue:r}]}}constructor(t){xc.Z.registerVersion("angularfire",EF.full,"core"),xc.Z.registerVersion("angularfire",EF.full,"app-compat"),xc.Z.registerVersion("angular",dM.full,t.toString())}static \u0275fac=function(r){return new(r||n)(ne(us))};static \u0275mod=$t({type:n});static \u0275inj=jt({providers:[bK]})}return n})();function TF(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function CK(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(DF("error",`${e} was already initialized on the ${t} Firebase App with different settings.${TK?" You may need to reload as Firebase is not HMR aware.":""}`),DF("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const TK=typeof module<"u"&&!!module.hot,DF=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],ze(377);class DK extends j{constructor(e=1/0,t=1/0,r=nT){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}}function SF(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,Le({connector:()=>new DK(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function AF(n,e){return w(e)?ht(()=>n,e):ht(()=>n)}const xF=new se("angularfire2.auth.use-emulator"),RF=new se("angularfire2.auth.settings"),MF=new se("angularfire2.auth.tenant-id"),PF=new se("angularfire2.auth.langugage-code"),NF=new se("angularfire2.auth.use-device-language"),kF=new se("angularfire.auth.persistence"),OF=(n,e,t,r,i,s,o,a)=>TF(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),o)for(const[u,h]of Object.entries(o))l.settings[u]=h;return a&&l.setPersistence(a),l},[t,r,i,s,o,a]);let FF=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,l,u,h,m,g,y){const E=new j,b=q(void 0).pipe(vr(o.outsideAngular),ht(()=>s.runOutsideAngular(()=>Promise.resolve().then(ze.bind(ze,377)))),_e(()=>rT(t,s,r)),_e(C=>OF(C,s,a,u,h,m,l,g)),SF({bufferSize:1,refCount:!1}));if(iv(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=q(null);else{b.pipe(Za()).subscribe();const C=b.pipe(ht(L=>L.getRedirectResult().then(X=>X,()=>null)),Li,SF({bufferSize:1,refCount:!1})),N=b.pipe(ht(L=>new Je(X=>({unsubscribe:s.runOutsideAngular(()=>L.onAuthStateChanged(le=>X.next(le),le=>X.error(le),()=>X.complete()))})))),R=b.pipe(ht(L=>new Je(X=>({unsubscribe:s.runOutsideAngular(()=>L.onIdTokenChanged(le=>X.next(le),le=>X.error(le),()=>X.complete()))}))));this.authState=C.pipe(AF(N),Or(o.outsideAngular),vr(o.insideAngular)),this.user=C.pipe(AF(R),Or(o.outsideAngular),vr(o.insideAngular)),this.idToken=this.user.pipe(ht(L=>L?S(L.getIdToken()):q(null))),this.idTokenResult=this.user.pipe(ht(L=>L?S(L.getIdTokenResult()):q(null))),this.credential=G(C,E,this.authState.pipe(ur(L=>!L))).pipe(_e(L=>L?.user?L:null),Or(o.outsideAngular),vr(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(yK.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(u=>t.run(()=>u)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,u)=>o.then(h=>{const m=h?.(...u);return r?.spy?.apply&&r.spy.apply(s,u,m),m})})})}))(this,b,s,{spy:{apply:(C,N,R)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&R.then(L=>E.next(L))}}})}static \u0275fac=function(r){return new(r||n)(ne(tm),ne(Nv,8),ne(us),ne(ut),ne(IF),ne(xF,8),ne(RF,8),ne(MF,8),ne(PF,8),ne(NF,8),ne(kF,8),ne(wF,8))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function iT(){return $((n,e)=>{let t,r=!1;n.subscribe(fe(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var ge,Q=ze(861),LF=ze(537),go=ze(879),qt=ze(58),AK=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ns={},sT=sT||{},Ge=AK||self;function kv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function nm(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var oT="closure_uid_"+(1e9*Math.random()>>>0),RK=0;function MK(n,e,t){return n.call.apply(n.bind,arguments)}function PK(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Hr(n,e,t){return(Hr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?MK:PK).apply(null,arguments)}function Ov(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function hr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Ya(){this.s=this.s,this.o=this.o}Ya.prototype.s=!1,Ya.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function xK(n){Object.prototype.hasOwnProperty.call(n,oT)&&n[oT]||(n[oT]=++RK)}(this)},Ya.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const VF=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function aT(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function BF(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(kv(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function zr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}zr.prototype.h=function(){this.defaultPrevented=!0};var kK=function(){if(!Ge.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};Ge.addEventListener("test",t,e),Ge.removeEventListener("test",t,e)}catch{}return n}();function rm(n){return/^[\s\xa0]*$/.test(n)}function Fv(){var n=Ge.navigator;return n&&(n=n.userAgent)?n:""}function _o(n){return-1!=Fv().indexOf(n)}function lT(n){return lT[" "](n),n}lT[" "]=function(){};var uT,n,FK=_o("Opera"),Kd=_o("Trident")||_o("MSIE"),UF=_o("Edge"),cT=UF||Kd,jF=_o("Gecko")&&!(-1!=Fv().toLowerCase().indexOf("webkit")&&!_o("Edge"))&&!(_o("Trident")||_o("MSIE"))&&!_o("Edge"),LK=-1!=Fv().toLowerCase().indexOf("webkit")&&!_o("Edge");function $F(){var n=Ge.document;return n?n.documentMode:void 0}e:{var dT="",hT=(n=Fv(),jF?/rv:([^\);]+)(\)|;)/.exec(n):UF?/Edge\/([\d\.]+)/.exec(n):Kd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):LK?/WebKit\/(\S+)/.exec(n):FK?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(hT&&(dT=hT?hT[1]:""),Kd){var fT=$F();if(null!=fT&&fT>parseFloat(dT)){uT=String(fT);break e}}uT=dT}var VK=Ge.document&&Kd&&($F()||parseInt(uT,10))||void 0;function im(n,e){if(zr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(jF){e:{try{lT(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:BK[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&im.$.h.call(this)}}hr(im,zr);var BK={2:"touch",3:"pen",4:"mouse"};im.prototype.h=function(){im.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var sm="closure_listenable_"+(1e6*Math.random()|0),UK=0;function jK(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++UK,this.fa=this.ia=!1}function Lv(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function mT(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function zF(n){const e={};for(const t in n)e[t]=n[t];return e}const qF="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function GF(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<qF.length;s++)t=qF[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Vv(n){this.src=n,this.g={},this.h=0}function gT(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=VF(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Lv(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function _T(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}Vv.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=_T(n,e,r,i);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new jK(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var yT="closure_lm_"+(1e6*Math.random()|0),vT={};function WF(n,e,t,r,i){if(r&&r.once)return KF(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)WF(n,e[s],t,r,i);return null}return t=IT(t),n&&n[sm]?n.O(e,t,nm(r)?!!r.capture:!!r,i):ZF(n,e,t,!1,r,i)}function ZF(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=nm(i)?!!i.capture:!!i,a=wT(n);if(a||(n[yT]=a=new Vv(n)),(t=a.add(e,t,r,o,s)).proxy)return t;if(r=function HK(){const e=zK;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)kK||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(YF(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function KF(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)KF(n,e[s],t,r,i);return null}return t=IT(t),n&&n[sm]?n.P(e,t,nm(r)?!!r.capture:!!r,i):ZF(n,e,t,!0,r,i)}function QF(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)QF(n,e[s],t,r,i);else r=nm(r)?!!r.capture:!!r,t=IT(t),n&&n[sm]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=_T(s=n.g[e],t,r,i))&&(Lv(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=wT(n))&&(e=n.g[e.toString()],n=-1,e&&(n=_T(e,t,r,i)),(t=-1<n?e[n]:null)&&ET(t))}function ET(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[sm])gT(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(YF(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=wT(e))?(gT(t,n),0==t.h&&(t.src=null,e[yT]=null)):Lv(n)}}}function YF(n){return n in vT?vT[n]:vT[n]="on"+n}function zK(n,e){if(n.fa)n=!0;else{e=new im(e,this);var t=n.listener,r=n.la||n.src;n.ia&&ET(n),n=t.call(r,e)}return n}function wT(n){return(n=n[yT])instanceof Vv?n:null}var bT="__closure_events_fn_"+(1e9*Math.random()>>>0);function IT(n){return"function"==typeof n?n:(n[bT]||(n[bT]=function(e){return n.handleEvent(e)}),n[bT])}function fr(){Ya.call(this),this.i=new Vv(this),this.S=this,this.J=null}function Sr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new zr(e,n);else if(e instanceof zr)e.target=e.target||n;else{var i=e;GF(e=new zr(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=Bv(o,r,!0,e)&&i}if(i=Bv(o=e.g=n,r,!0,e)&&i,i=Bv(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=Bv(o=e.g=t[s],r,!1,e)&&i}function Bv(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,l=o.la||o.src;o.ia&&gT(n.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}hr(fr,Ya),fr.prototype[sm]=!0,fr.prototype.removeEventListener=function(n,e,t,r){QF(this,n,e,t,r)},fr.prototype.N=function(){if(fr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Lv(t[r]);delete n.g[e],n.h--}}this.J=null},fr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},fr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var CT=Ge.JSON.stringify;function GK(){var n=TT;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var XF=new class qK{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ZK,n=>n.reset());class ZK{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function KK(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function QK(n){Ge.setTimeout(()=>{throw n},0)}let om,am=!1,TT=new class WK{constructor(){this.h=this.g=null}add(e,t){const r=XF.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},JF=()=>{const n=Ge.Promise.resolve(void 0);om=()=>{n.then(YK)}};var YK=()=>{for(var n;n=GK();){try{n.h.call(n.g)}catch(t){QK(t)}var e=XF;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}am=!1};function Uv(n,e){fr.call(this),this.h=n||1,this.g=e||Ge,this.j=Hr(this.qb,this),this.l=Date.now()}function DT(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function ST(n,e,t){if("function"==typeof n)t&&(n=Hr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Hr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ge.setTimeout(n,e||0)}function eL(n){n.g=ST(()=>{n.g=null,n.i&&(n.i=!1,eL(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}hr(Uv,fr),(ge=Uv.prototype).ga=!1,ge.T=null,ge.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Sr(this,"tick"),this.ga&&(DT(this),this.start()))}},ge.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ge.N=function(){Uv.$.N.call(this),DT(this),delete this.g};class XK extends Ya{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:eL(this)}N(){super.N(),this.g&&(Ge.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lm(n){Ya.call(this),this.h=n,this.g={}}hr(lm,Ya);var tL=[];function nL(n,e,t,r){Array.isArray(t)||(t&&(tL[0]=t.toString()),t=tL);for(var i=0;i<t.length;i++){var s=WF(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function rL(n){mT(n.g,function(e,t){this.g.hasOwnProperty(t)&&ET(e)},n),n.g={}}function jv(){this.g=!0}function Qd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function nQ(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return CT(t)}catch{return e}}(n,t)+(r?" "+r:"")})}lm.prototype.N=function(){lm.$.N.call(this),rL(this)},lm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jv.prototype.Ea=function(){this.g=!1},jv.prototype.info=function(){};var Rc={},iL=null;function $v(){return iL=iL||new fr}function sL(n){zr.call(this,Rc.Ta,n)}function cm(n){const e=$v();Sr(e,new sL(e))}function oL(n,e){zr.call(this,Rc.STAT_EVENT,n),this.stat=e}function ui(n){const e=$v();Sr(e,new oL(e,n))}function aL(n,e){zr.call(this,Rc.Ua,n),this.size=e}function um(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ge.setTimeout(function(){n()},e)}Rc.Ta="serverreachability",hr(sL,zr),Rc.STAT_EVENT="statevent",hr(oL,zr),Rc.Ua="timingevent",hr(aL,zr);var Hv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},lL={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function AT(){}function uL(){}AT.prototype.h=null;var MT,dm={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function xT(){zr.call(this,"d")}function RT(){zr.call(this,"c")}function zv(){}function hm(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new lm(this),this.P=rQ,this.V=new Uv(n=cT?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new dL}function dL(){this.i=null,this.g="",this.h=!1}hr(xT,zr),hr(RT,zr),hr(zv,AT),zv.prototype.g=function(){return new XMLHttpRequest},zv.prototype.i=function(){return{}},MT=new zv;var rQ=45e3,hL={},PT={};function NT(n,e,t){n.L=1,n.A=Zv(Xo(e)),n.u=t,n.S=!0,fL(n,null)}function fL(n,e){n.G=Date.now(),fm(n),n.B=Xo(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),IL(t.i,"t",r),n.o=0,t=n.l.J,n.h=new dL,n.g=WL(n.l,t?e:null,!n.u),0<n.O&&(n.M=new XK(Hr(n.Pa,n,n.g),n.O)),nL(n.U,n.g,"readystatechange",n.nb),e=n.I?zF(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),cm(),function JK(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var h=u[0];u=u[1];var m=h.split("_");o=2<=m.length&&"type"==m[1]?o+(h+"=")+u+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.v,n.B,n.m,n.W,n.u)}function pL(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function mL(n,e,t){let i,r=!0;for(;!n.J&&n.o<t.length;){if(i=iQ(n,t),i==PT){4==e&&(n.s=4,ui(14),r=!1),Qd(n.j,n.m,null,"[Incomplete Response]");break}if(i==hL){n.s=4,ui(15),Qd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Qd(n.j,n.m,i,null),kT(n,i)}pL(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,ui(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),jT(e),e.M=!0,ui(11))):(Qd(n.j,n.m,t,"[Invalid Chunked Response]"),Mc(n),pm(n))}function iQ(n,e){var t=n.o,r=e.indexOf("\n",t);return-1==r?PT:(t=Number(e.substring(t,r)),isNaN(t)?hL:(r+=1)+t>e.length?PT:(e=e.slice(r,r+t),n.o=r+t,e))}function fm(n){n.Y=Date.now()+n.P,gL(n,n.P)}function gL(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=um(Hr(n.lb,n),e)}function qv(n){n.C&&(Ge.clearTimeout(n.C),n.C=null)}function pm(n){0==n.l.H||n.J||HL(n.l,n)}function Mc(n){qv(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,DT(n.V),rL(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function kT(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||OT(t.i,n)))if(!n.K&&OT(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;eE(t),Xv(t)}UT(t),ui(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=um(Hr(t.ib,t),6e3));if(1>=DL(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Nc(t,11)}else if((n.K||t.g==n)&&eE(t),!rm(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(t.V=u[0],u=u[1],2==t.H)if("c"==u[0]){t.K=u[1],t.pa=u[2];const h=u[3];null!=h&&(t.ra=h,t.l.info("VER="+t.ra));const m=u[4];null!=m&&(t.Ga=m,t.l.info("SVER="+t.Ga));const g=u[5];null!=g&&"number"==typeof g&&0<g&&(t.L=r=1.5*g,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const y=n.g;if(y){const E=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=r.i;s.g||-1==E.indexOf("spdy")&&-1==E.indexOf("quic")&&-1==E.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(FT(s,s.h),s.h=null))}if(r.F){const b=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;b&&(r.Da=b,an(r.I,r.F,b))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((r=t).wa=GL(r,r.J?r.pa:null,r.Y),o.K){SL(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(qv(a),fm(a)),r.g=o}else jL(r);0<t.j.length&&Jv(t)}else"stop"!=u[0]&&"close"!=u[0]||Nc(t,7);else 3==t.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Nc(t,7):BT(t):"noop"!=u[0]&&t.h&&t.h.Aa(u),t.A=0)}cm()}catch{}}function _L(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(kv(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function oQ(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(kv(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function sQ(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(kv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(ge=hm.prototype).setTimeout=function(n){this.P=n},ge.nb=function(n){n=n.target;const e=this.M;e&&3==yo(n)?e.l():this.Pa(n)},ge.Pa=function(n){try{if(n==this.g)e:{const h=yo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||cT||this.g&&(this.h.h||this.g.ja()||OL(this.g)))){this.J||4!=h||7==e||cm(),qv(this);var t=this.g.da();this.ca=t;t:if(pL(this)){var r=OL(this.g);n="";var i=r.length,s=4==yo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Mc(this),pm(this);var o="";break t}this.h.i=new Ge.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function eQ(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,h,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rm(a)){var u=a;break t}}u=null}if(!(t=u)){this.i=!1,this.s=3,ui(12),Mc(this),pm(this);break e}Qd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kT(this,t)}this.S?(mL(this,h,o),cT&&this.i&&3==h&&(nL(this.U,this.V,"tick",this.mb),this.V.start())):(Qd(this.j,this.m,o,null),kT(this,o)),4==h&&Mc(this),this.i&&!this.J&&(4==h?HL(this.l,this):(this.i=!1,fm(this)))}else(function CQ(n){const e={};n=(n.g&&2<=yo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(rm(n[r]))continue;var t=KK(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function $K(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.s=3,ui(12)):(this.s=0,ui(13)),Mc(this),pm(this)}}}catch{}},ge.mb=function(){if(this.g){var n=yo(this.g),e=this.g.ja();this.o<e.length&&(qv(this),mL(this,n,e),this.i&&4!=n&&fm(this))}},ge.cancel=function(){this.J=!0,Mc(this)},ge.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function tQ(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(cm(),ui(17)),Mc(this),this.s=2,pm(this)):gL(this,this.Y-n)};var yL=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pc(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Pc){this.h=n.h,Gv(this,n.j),this.s=n.s,this.g=n.g,Wv(this,n.m),this.l=n.l;var e=n.i,t=new _m;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),vL(this,t),this.o=n.o}else n&&(e=String(n).match(yL))?(this.h=!1,Gv(this,e[1]||"",!0),this.s=mm(e[2]||""),this.g=mm(e[3]||"",!0),Wv(this,e[4]),this.l=mm(e[5]||"",!0),vL(this,e[6]||"",!0),this.o=mm(e[7]||"")):(this.h=!1,this.i=new _m(null,this.h))}function Xo(n){return new Pc(n)}function Gv(n,e,t){n.j=t?mm(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Wv(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function vL(n,e,t){e instanceof _m?(n.i=e,function fQ(n,e){e&&!n.j&&(Xa(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(wL(this,r),IL(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=gm(e,dQ)),n.i=new _m(e,n.h))}function an(n,e,t){n.i.set(e,t)}function Zv(n){return an(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function mm(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function gm(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,lQ),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function lQ(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Pc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(gm(e,EL,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(gm(e,EL,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(gm(t,"/"==t.charAt(0)?uQ:cQ,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",gm(t,hQ)),n.join("")};var EL=/[#\/\?@]/g,cQ=/[#\?:]/g,uQ=/[#\?]/g,dQ=/[#\?@]/g,hQ=/#/g;function _m(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Xa(n){n.g||(n.g=new Map,n.h=0,n.i&&function aQ(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function wL(n,e){Xa(n),e=Yd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function bL(n,e){return Xa(n),e=Yd(n,e),n.g.has(e)}function IL(n,e,t){wL(n,e),0<t.length&&(n.i=null,n.g.set(Yd(n,e),aT(t)),n.h+=t.length)}function Yd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function CL(n){this.l=n||mQ,n=Ge.PerformanceNavigationTiming?0<(n=Ge.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ge.g&&Ge.g.Ka&&Ge.g.Ka()&&Ge.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ge=_m.prototype).add=function(n,e){Xa(this),this.i=null,n=Yd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ge.forEach=function(n,e){Xa(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ge.ta=function(){Xa(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},ge.Z=function(n){Xa(this);let e=[];if("string"==typeof n)bL(this,n)&&(e=e.concat(this.g.get(Yd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ge.set=function(n,e){return Xa(this),this.i=null,bL(this,n=Yd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ge.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ge.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var mQ=10;function TL(n){return!!n.h||!!n.g&&n.g.size>=n.j}function DL(n){return n.h?1:n.g?n.g.size:0}function OT(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function FT(n,e){n.g?n.g.add(e):n.h=e}function SL(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function AL(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return aT(n.i)}CL.prototype.cancel=function(){if(this.i=AL(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var gQ=class{stringify(n){return Ge.JSON.stringify(n,void 0)}parse(n){return Ge.JSON.parse(n,void 0)}};function _Q(){this.g=new gQ}function yQ(n,e,t){const r=t||"";try{_L(n,function(i,s){let o=i;nm(i)&&(o=CT(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Kv(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ym(n){this.l=n.ec||null,this.j=n.ob||!1}function Qv(n,e){fr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=LT,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hr(ym,AT),ym.prototype.g=function(){return new Qv(this.l,this.j)},ym.prototype.i=function(n){return function(){return n}}({}),hr(Qv,fr);var LT=0;function xL(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function vm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Em(n)}function Em(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ge=Qv.prototype).open=function(n,e){if(this.readyState!=LT)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Em(this)},ge.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ge).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ge.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,vm(this)),this.readyState=LT},ge.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Em(this)),this.g&&(this.readyState=3,Em(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ge.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xL(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ge.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?vm(this):Em(this),3==this.readyState&&xL(this)}},ge.Za=function(n){this.g&&(this.response=this.responseText=n,vm(this))},ge.Ya=function(n){this.g&&(this.response=n,vm(this))},ge.ka=function(){this.g&&vm(this)},ge.setRequestHeader=function(n,e){this.v.append(n,e)},ge.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ge.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Qv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var EQ=Ge.JSON.parse;function Cn(n){fr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=RL,this.L=this.M=!1}hr(Cn,fr);var RL="",wQ=/^https?$/i,bQ=["POST","PUT"];function ML(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,PL(n),Yv(n)}function PL(n){n.F||(n.F=!0,Sr(n,"complete"),Sr(n,"error"))}function NL(n){if(n.h&&typeof sT<"u"&&(!n.C[1]||4!=yo(n)||2!=n.da()))if(n.v&&4==yo(n))ST(n.La,0,n);else if(Sr(n,"readystatechange"),4==yo(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===o){var i=String(n.I).match(yL)[1]||null;!i&&Ge.self&&Ge.self.location&&(i=Ge.self.location.protocol.slice(0,-1)),r=!wQ.test(i?i.toLowerCase():"")}t=r}if(t)Sr(n,"complete"),Sr(n,"success");else{n.m=6;try{var s=2<yo(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",PL(n)}}finally{Yv(n)}}}function Yv(n,e){if(n.g){kL(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Sr(n,"ready");try{t.onreadystatechange=r}catch{}}}function kL(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ge.clearTimeout(n.A),n.A=null)}function yo(n){return n.g?n.g.readyState:0}function OL(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case RL:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function FL(n){let e="";return mT(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function VT(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=FL(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):an(n,e,t))}function wm(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function LL(n){this.Ga=0,this.j=[],this.l=new jv,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=wm("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=wm("baseRetryDelayMs",5e3,n),this.hb=wm("retryDelaySeedMs",1e4,n),this.eb=wm("forwardChannelMaxRetries",2,n),this.xa=wm("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new CL(n&&n.concurrentRequestLimit),this.Ja=new _Q,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function BT(n){if(VL(n),3==n.H){var e=n.W++,t=Xo(n.I);if(an(t,"SID",n.K),an(t,"RID",e),an(t,"TYPE","terminate"),bm(n,t),(e=new hm(n,n.l,e)).L=2,e.A=Zv(Xo(t)),t=!1,Ge.navigator&&Ge.navigator.sendBeacon)try{t=Ge.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&Ge.Image&&((new Image).src=e.A,t=!0),t||(e.g=WL(e.l,null),e.g.ha(e.A)),e.G=Date.now(),fm(e)}qL(n)}function Xv(n){n.g&&(jT(n),n.g.cancel(),n.g=null)}function VL(n){Xv(n),n.u&&(Ge.clearTimeout(n.u),n.u=null),eE(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ge.clearTimeout(n.m),n.m=null)}function Jv(n){if(!TL(n.i)&&!n.m){n.m=!0;var e=n.Na;om||JF(),am||(om(),am=!0),TT.add(e,n),n.C=0}}function BL(n,e){var t;t=e?e.m:n.W++;const r=Xo(n.I);an(r,"SID",n.K),an(r,"RID",t),an(r,"AID",n.V),bm(n,r),n.o&&n.s&&VT(r,n.o,n.s),t=new hm(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=UL(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),FT(n.i,t),NT(t,r,e)}function bm(n,e){n.na&&mT(n.na,function(t,r){an(e,r,t)}),n.h&&_L({},function(t,r){an(e,r,t)})}function UL(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Hr(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let u=i[l].g;const h=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{yQ(h,o,"req"+u+"_")}catch{r&&r(h)}}if(a){r=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function jL(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;om||JF(),am||(om(),am=!0),TT.add(e,n),n.A=0}}function UT(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=um(Hr(n.Ma,n),zL(n,n.A)),n.A++,0))}function jT(n){null!=n.B&&(Ge.clearTimeout(n.B),n.B=null)}function $L(n){n.g=new hm(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Xo(n.wa);an(e,"RID","rpc"),an(e,"SID",n.K),an(e,"AID",n.V),an(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&an(e,"TO",n.qa),an(e,"TYPE","xmlhttp"),bm(n,e),n.o&&n.s&&VT(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=Zv(Xo(e)),t.u=null,t.S=!0,fL(t,n)}function eE(n){null!=n.v&&(Ge.clearTimeout(n.v),n.v=null)}function HL(n,e){var t=null;if(n.g==e){eE(n),jT(n),n.g=null;var r=2}else{if(!OT(n.i,e))return;t=e.F,SL(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.u?e.u.length:0,e=Date.now()-e.G;var i=n.C;Sr(r=$v(),new aL(r,t)),Jv(n)}else jL(n);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function TQ(n,e){return!(DL(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=um(Hr(n.Na,n,e),zL(n,n.C)),n.C++,0)))}(n,e)||2==r&&UT(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Nc(n,5);break;case 4:Nc(n,10);break;case 3:Nc(n,6);break;default:Nc(n,2)}}function zL(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Nc(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Hr(n.pb,n);t||(t=new Pc("//www.google.com/images/cleardot.gif"),Ge.location&&"http"==Ge.location.protocol||Gv(t,"https"),Zv(t)),function vQ(n,e){const t=new jv;if(Ge.Image){const r=new Image;r.onload=Ov(Kv,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ov(Kv,t,r,"TestLoadImage: error",!1,e),r.onabort=Ov(Kv,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ov(Kv,t,r,"TestLoadImage: timeout",!1,e),Ge.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ui(2);n.H=0,n.h&&n.h.za(e),qL(n),VL(n)}function qL(n){if(n.H=0,n.ma=[],n.h){const e=AL(n.i);(0!=e.length||0!=n.j.length)&&(BF(n.ma,e),BF(n.ma,n.j),n.i.i.length=0,aT(n.j),n.j.length=0),n.h.ya()}}function GL(n,e,t){var r=t instanceof Pc?Xo(t):new Pc(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Wv(r,r.m);else{var i=Ge.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Pc(null);r&&Gv(s,r),e&&(s.g=e),i&&Wv(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&an(r,t,e),an(r,"VER",n.ra),bm(n,r),r}function WL(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Cn(n.Ha&&!n.va?new ym({ob:t}):n.va)).Oa(n.J),e}function ZL(){}function tE(){if(Kd&&!(10<=Number(VK)))throw Error("Environmental error: no available transport.")}function Vi(n,e){fr.call(this),this.g=new LL(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!rm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rm(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Xd(this)}function KL(n){xT.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function QL(){RT.call(this),this.status=1}function Xd(n){this.g=n}function ks(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function $T(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;o=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function Nt(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(ge=Cn.prototype).Oa=function(n){this.M=n},ge.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():MT.g(),this.C=function cL(n){return n.h||(n.h=n.i())}(this.u?this.u:MT),this.g.onreadystatechange=Hr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void ML(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Ge.FormData&&n instanceof Ge.FormData,!(0<=VF(bQ,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{kL(this),0<this.B&&((this.L=function IQ(n){return Kd&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hr(this.ua,this)):this.A=ST(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){ML(this,s)}},ge.ua=function(){typeof sT<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Sr(this,"timeout"),this.abort(8))},ge.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Sr(this,"complete"),Sr(this,"abort"),Yv(this))},ge.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yv(this,!0)),Cn.$.N.call(this)},ge.La=function(){this.s||(this.G||this.v||this.l?NL(this):this.kb())},ge.kb=function(){NL(this)},ge.isActive=function(){return!!this.g},ge.da=function(){try{return 2<yo(this)?this.g.status:-1}catch{return-1}},ge.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ge.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),EQ(e)}},ge.Ia=function(){return this.m},ge.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ge=LL.prototype).ra=8,ge.H=1,ge.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new hm(this,this.l,n);let s=this.s;if(this.U&&(s?(s=zF(s),GF(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=UL(this,i,e),an(t=Xo(this.I),"RID",n),an(t,"CVER",22),this.F&&an(t,"X-HTTP-Session-Id",this.F),bm(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(FL(s)))+"&"+e:this.o&&VT(t,this.o,s)),FT(this.i,i),this.bb&&an(t,"TYPE","init"),this.P?(an(t,"$req",e),an(t,"SID","null"),i.aa=!0,NT(i,t,null)):NT(i,t,e),this.H=2}}else 3==this.H&&(n?BL(this,n):0==this.j.length||TL(this.i)||BL(this))},ge.Ma=function(){if(this.u=null,$L(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=um(Hr(this.jb,this),n)}},ge.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ui(10),Xv(this),$L(this))},ge.ib=function(){null!=this.v&&(this.v=null,Xv(this),UT(this),ui(19))},ge.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ui(2)):(this.l.info("Failed to ping google.com"),ui(1))},ge.isActive=function(){return!!this.h&&this.h.isActive(this)},(ge=ZL.prototype).Ba=function(){},ge.Aa=function(){},ge.za=function(){},ge.ya=function(){},ge.isActive=function(){return!0},ge.Va=function(){},tE.prototype.g=function(n,e){return new Vi(n,e)},hr(Vi,fr),Vi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;ui(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=GL(n,null,n.Y),Jv(n)},Vi.prototype.close=function(){BT(this.g)},Vi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=CT(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Jv(e)},Vi.prototype.N=function(){this.g.h=null,delete this.j,BT(this.g),delete this.g,Vi.$.N.call(this)},hr(KL,xT),hr(QL,RT),hr(Xd,ZL),Xd.prototype.Ba=function(){Sr(this.g,"a")},Xd.prototype.Aa=function(n){Sr(this.g,new KL(n))},Xd.prototype.za=function(n){Sr(this.g,new QL)},Xd.prototype.ya=function(){Sr(this.g,"b")},hr(ks,function DQ(){this.blockSize=-1}),ks.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ks.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)$T(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){$T(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){$T(this,r),i=0;break}}this.h=i,this.i+=e},ks.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var SQ={};function HT(n){return-128<=n&&128>n?function OK(n,e){var t=SQ;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Nt([0|e],0>e?-1:0)}):new Nt([0|n],0>n?-1:0)}function vo(n){if(isNaN(n)||!isFinite(n))return Jd;if(0>n)return Ar(vo(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=zT;return new Nt(e,0)}var zT=4294967296,Jd=HT(0),qT=HT(1),XL=HT(16777216);function Jo(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function ps(n){return-1==n.h}function Ar(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Nt(t,~n.h).add(qT)}function nE(n,e){return n.add(Ar(e))}function rE(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Im(n,e){this.g=n,this.h=e}function iE(n,e){if(Jo(e))throw Error("division by zero");if(Jo(n))return new Im(Jd,Jd);if(ps(n))return e=iE(Ar(n),e),new Im(Ar(e.g),Ar(e.h));if(ps(e))return e=iE(n,Ar(e)),new Im(Ar(e.g),e.h);if(30<n.g.length){if(ps(n)||ps(e))throw Error("slowDivide_ only works with positive integers.");for(var t=qT,r=e;0>=r.X(n);)t=JL(t),r=JL(r);var i=eh(t,1),s=eh(r,1);for(r=eh(r,2),t=eh(t,2);!Jo(r);){var o=s.add(r);0>=o.X(n)&&(i=i.add(t),s=o),r=eh(r,1),t=eh(t,1)}return e=nE(n,i.R(e)),new Im(i,e)}for(i=Jd;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),o=(s=vo(t)).R(e);ps(o)||0<o.X(n);)o=(s=vo(t-=r)).R(e);Jo(s)&&(s=qT),i=i.add(s),n=nE(n,o)}return new Im(i,n)}function JL(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Nt(t,n.h)}function eh(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Nt(i,n.h)}(ge=Nt.prototype).ea=function(){if(ps(this))return-Ar(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:zT+r)*e,e*=zT}return n},ge.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Jo(this))return"0";if(ps(this))return"-"+Ar(this).toString(n);for(var e=vo(Math.pow(n,6)),t=this,r="";;){var i=iE(t,e).g,s=((0<(t=nE(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Jo(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ge.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ge.X=function(n){return ps(n=nE(this,n))?-1:Jo(n)?0:1},ge.abs=function(){return ps(this)?Ar(this):this},ge.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=o>>>16,t[i]=(o&=65535)<<16|(s&=65535)}return new Nt(t,-2147483648&t[t.length-1]?-1:0)},ge.R=function(n){if(Jo(this)||Jo(n))return Jd;if(ps(this))return ps(n)?Ar(this).R(Ar(n)):Ar(Ar(this).R(n));if(ps(n))return Ar(this.R(Ar(n)));if(0>this.X(XL)&&0>n.X(XL))return vo(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=n.D(i)>>>16,l=65535&n.D(i);t[2*r+2*i]+=o*l,rE(t,2*r+2*i),t[2*r+2*i+1]+=s*l,rE(t,2*r+2*i+1),t[2*r+2*i+1]+=o*a,rE(t,2*r+2*i+1),t[2*r+2*i+2]+=s*a,rE(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Nt(t,0)},ge.gb=function(n){return iE(this,n).h},ge.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Nt(t,this.h&n.h)},ge.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Nt(t,this.h|n.h)},ge.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Nt(t,this.h^n.h)},tE.prototype.createWebChannel=tE.prototype.g,Vi.prototype.send=Vi.prototype.u,Vi.prototype.open=Vi.prototype.m,Vi.prototype.close=Vi.prototype.close,Hv.NO_ERROR=0,Hv.TIMEOUT=8,Hv.HTTP_ERROR=6,lL.COMPLETE="complete",uL.EventType=dm,dm.OPEN="a",dm.CLOSE="b",dm.ERROR="c",dm.MESSAGE="d",fr.prototype.listen=fr.prototype.O,Cn.prototype.listenOnce=Cn.prototype.P,Cn.prototype.getLastError=Cn.prototype.Sa,Cn.prototype.getLastErrorCode=Cn.prototype.Ia,Cn.prototype.getStatus=Cn.prototype.da,Cn.prototype.getResponseJson=Cn.prototype.Wa,Cn.prototype.getResponseText=Cn.prototype.ja,Cn.prototype.send=Cn.prototype.ha,Cn.prototype.setWithCredentials=Cn.prototype.Oa,ks.prototype.digest=ks.prototype.l,ks.prototype.reset=ks.prototype.reset,ks.prototype.update=ks.prototype.j,Nt.prototype.add=Nt.prototype.add,Nt.prototype.multiply=Nt.prototype.R,Nt.prototype.modulo=Nt.prototype.gb,Nt.prototype.compare=Nt.prototype.X,Nt.prototype.toNumber=Nt.prototype.ea,Nt.prototype.toString=Nt.prototype.toString,Nt.prototype.getBits=Nt.prototype.D,Nt.fromNumber=vo,Nt.fromString=function YL(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ar(YL(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=vo(Math.pow(e,8)),r=Jd,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),o=parseInt(n.substring(i,i+s),e);8>s?(s=vo(Math.pow(e,s)),r=r.R(s).add(vo(o))):r=(r=r.R(t)).add(vo(o))}return r};var AQ=Ns.createWebChannelTransport=function(){return new tE},xQ=Ns.getStatEventTarget=function(){return $v()},GT=Ns.ErrorCode=Hv,RQ=Ns.EventType=lL,MQ=Ns.Event=Rc,eV=Ns.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},sE=(Ns.FetchXmlHttpFactory=ym,Ns.WebChannel=uL),PQ=Ns.XhrIo=Cn,NQ=Ns.Md5=ks,th=Ns.Integer=Nt;const tV="@firebase/firestore";class pr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pr.UNAUTHENTICATED=new pr(null),pr.GOOGLE_CREDENTIALS=new pr("google-credentials-uid"),pr.FIRST_PARTY=new pr("first-party-uid"),pr.MOCK_USER=new pr("mock-user");let nh="10.7.0";const Ja=new go.Yd("@firebase/firestore");function rh(){return Ja.logLevel}function oe(n,...e){if(Ja.logLevel<=go.in.DEBUG){const t=e.map(WT);Ja.debug(`Firestore (${nh}): ${n}`,...t)}}function Mn(n,...e){if(Ja.logLevel<=go.in.ERROR){const t=e.map(WT);Ja.error(`Firestore (${nh}): ${n}`,...t)}}function Ci(n,...e){if(Ja.logLevel<=go.in.WARN){const t=e.map(WT);Ja.warn(`Firestore (${nh}): ${n}`,...t)}}function WT(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ee(n="Unexpected state"){const e=`FIRESTORE (${nh}) INTERNAL ASSERTION FAILED: `+n;throw Mn(e),new Error(e)}function Ae(n,e){n||Ee()}function ue(n,e){return n}const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends qt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class nr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class nV{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pr.UNAUTHENTICATED))}shutdown(){}}class LQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class VQ{constructor(e){this.t=e,this.currentUser=pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let o=new nr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new nr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable((0,Q.Z)(function*(){yield u.promise,yield s(r.currentUser)}))},l=u=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new nr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae("string"==typeof r.accessToken),new nV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ae(null===e||"string"==typeof e),new pr(e)}}class BQ{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=pr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class UQ{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new BQ(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jQ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ae("string"==typeof t.token),this.R=t.token,new rV(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function $Q(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class iV{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=$Q(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function He(n,e){return n<e?-1:n>e?1:0}function ih(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function sV(n){return n+"\0"}class gn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new re(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new re(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new re(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gn.fromMillis(Date.now())}static fromDate(e){return gn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new gn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xe(e)}static min(){return new xe(new gn(0,0))}static max(){return new xe(new gn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Cm{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ee(),void 0===r?r=e.length-t:r>e.length-t&&Ee(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Cm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class wt extends Cm{construct(e,t,r){return new wt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new wt(t)}static emptyPath(){return new wt([])}}const HQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends Cm{construct(e,t,r){return new ln(e,t,r)}static isValidIdentifier(e){return HQ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ln(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new re(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new re(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new re(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new re(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}class he{constructor(e){this.path=e}static fromPath(e){return new he(wt.fromString(e))}static fromName(e){return new he(wt.fromString(e).popFirst(5))}static empty(){return new he(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new wt(e.slice()))}}class sh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function ZT(n){return n.fields.find(e=>2===e.kind)}function kc(n){return n.fields.filter(e=>2!==e.kind)}sh.UNKNOWN_ID=-1;class Oc{constructor(e,t){this.fieldPath=e,this.kind=t}}class oh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new oh(0,Bi.min())}}function oV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(1e9===r?new gn(t+1,0):new gn(t,r));return new Bi(i,he.empty(),e)}function aV(n){return new Bi(n.readTime,n.key,-1)}class Bi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Bi(xe.min(),he.empty(),-1)}static max(){return new Bi(xe.max(),he.empty(),-1)}}function KT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=he.comparator(n.documentKey,e.documentKey),0!==t?t:He(n.largestBatchId,e.largestBatchId))}const lV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function el(n){return QT.apply(this,arguments)}function QT(){return QT=(0,Q.Z)(function*(n){if(n.code!==B.FAILED_PRECONDITION||n.message!==lV)throw n;oe("LocalStore","Unexpectedly lost primary lease")}),QT.apply(this,arguments)}class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof O?t:O.resolve(t)}catch(t){return O.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):O.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):O.reject(t)}static resolve(e){return new O((t,r)=>{t(e)})}static reject(e){return new O((t,r)=>{r(e)})}static waitFor(e){return new O((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=O.resolve(!1);for(const r of e)t=t.next(i=>i?O.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new O((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new O((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class oE{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new nr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Tm(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=YT(r.target.error);this.V.reject(new Tm(e,i))}}static open(e,t,r,i){try{return new oE(t,e.transaction(i,r))}catch(s){throw new Tm(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new WQ(t)}}class Os{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Os.S((0,qt.z$)())&&Mn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return oe("SimpleDb","Removing database:",e),Fc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,qt.hl)())return!1;if(Os.C())return!0;const e=(0,qt.z$)(),t=Os.S(e),r=0<t&&t<10,i=Os.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,Q.Z)(function*(){return t.db||(oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Tm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new re(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new re(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Tm(e,a))},s.onupgradeneeded=o=>{oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.N(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,Q.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.O(e);const l=oE.open(s.db,e,o?"readonly":"readwrite",r),u=i(l).next(h=>(l.g(),h)).catch(h=>(l.abort(h),O.reject(h))).toPromise();return u.catch(()=>{}),yield l.m,u}catch(l){const u=l,h="FirebaseError"!==u.name&&a<3;if(oe("SimpleDb","Transaction failed with error:",u.message,"Retrying:",h),s.close(),!h)return Promise.reject(u)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class GQ{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Fc(this.k.delete())}}class Tm extends re{constructor(e,t){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function tl(n){return"IndexedDbTransactionError"===n.name}class WQ{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Fc(r)}add(e){return oe("SimpleDb","ADD",this.store.name,e,e),Fc(this.store.add(e))}get(e){return Fc(this.store.get(e)).next(t=>(void 0===t&&(t=null),oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return oe("SimpleDb","DELETE",this.store.name,e),Fc(this.store.delete(e))}count(){return oe("SimpleDb","COUNT",this.store.name),Fc(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new O((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new O((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,t){oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Z(e){const t=this.cursor({});return new O((r,i)=>{t.onerror=s=>{const o=YT(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,t){const r=[];return new O((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new GQ(a),u=t(a.primaryKey,a.value,l);if(u instanceof O){const h=u.catch(m=>(l.done(),O.reject(m)));r.push(h)}l.isDone?i():null===l.$?a.continue():a.continue(l.$)}}).next(()=>O.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Fc(n){return new O((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=YT(r.target.error);t(i)}})}let uV=!1;function YT(n){const e=Os.S((0,qt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return uV||(uV=!0,setTimeout(()=>{throw r},0)),r}}return n}class ZQ{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Q.Z)(function*(){t.task=null;try{oe("IndexBackiller",`Documents written: ${yield t.X.te()}`)}catch(r){tl(r)?oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield el(r)}yield t.ee(6e4)}))}}class KQ{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,Q.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.ne(r,e))})()}ne(e,t){const r=new Set;let i=t,s=!0;return O.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return oe("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}re(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(oe("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}ie(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=aV(s);KT(o,r)>0&&(r=o)}),new Bi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ui=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function Dm(n){return null==n}function Sm(n){return 0===n&&1/n==-1/0}function dV(n){return"number"==typeof n&&Number.isInteger(n)&&!Sm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function qr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hV(e)),e=QQ(n.get(t),e);return hV(e)}function QQ(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function hV(n){return n+"\x01\x01"}function Eo(n){const e=n.length;if(Ae(e>=2),2===e)return Ae("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),wt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Ee(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===i.length?l=a:(i+=a,l=i,i=""),r.push(l);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Ee()}s=o+2}return new wt(r)}const fV=["userId","batchId"];function aE(n,e){return[n,qr(e)]}function pV(n,e,t){return[n,qr(e),t]}const YQ={},XQ=["prefixPath","collectionGroup","readTime","documentId"],JQ=["prefixPath","collectionGroup","documentId"],eY=["collectionGroup","readTime","prefixPath","documentId"],tY=["canonicalId","targetId"],nY=["targetId","path"],rY=["path","targetId"],iY=["collectionId","parent"],sY=["indexId","uid"],oY=["uid","sequenceNumber"],aY=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lY=["indexId","uid","orderedDocumentKey"],cY=["userId","collectionPath","documentId"],uY=["userId","collectionPath","largestBatchId"],dY=["userId","collectionGroup","largestBatchId"],mV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hY=[...mV,"documentOverlays"],gV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_V=gV,fY=[..._V,"indexConfiguration","indexState","indexEntries"];class XT extends cV{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function mr(n,e){const t=ue(n);return Os.M(t.ae,e)}function yV(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function nl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Yt{constructor(e,t){this.comparator=e,this.root=t||xr.EMPTY}insert(e,t){return new Yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xr.BLACK,null,null))}remove(e){return new Yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lE(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lE(this.root,e,this.comparator,!1)}getReverseIterator(){return new lE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lE(this.root,e,this.comparator,!0)}}class lE{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??xr.RED,this.left=i??xr.EMPTY,this.right=s??xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new xr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return xr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}xr.EMPTY=null,xr.RED=!0,xr.BLACK=!1,xr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,t,r,i,s){return this}insert(e,t,r){return new xr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bt{constructor(e){this.comparator=e,this.data=new Yt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new EV(this.data.getIterator())}getIteratorFrom(e){return new EV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class EV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ah(n){return n.hasNext()?n.getNext():void 0}class Ti{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Ti([])}unionWith(e){let t=new Bt(ln.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ti(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ih(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class wV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class rr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new wV("Invalid base64 string: "+s):s}}(e);return new rr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new rr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rr.EMPTY_BYTE_STRING=new rr("");const mY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rl(n){if(Ae(!!n),"string"==typeof n){let e=0;const t=mY.exec(n);if(Ae(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tn(n.seconds),nanos:Tn(n.nanos)}}function Tn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ea(n){return"string"==typeof n?rr.fromBase64String(n):rr.fromUint8Array(n)}function cE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function uE(n){const e=n.mapValue.fields.__previous_value__;return cE(e)?uE(e):e}function Am(n){const e=rl(n.mapValue.fields.__local_write_time__.timestampValue);return new gn(e.seconds,e.nanos)}class gY{constructor(e,t,r,i,s,o,a,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class il{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new il("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof il&&e.projectId===this.projectId&&e.database===this.database}}const sl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dE={nullValue:"NULL_VALUE"};function ol(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cE(n)?4:TV(n)?9007199254740991:10:Ee()}function wo(n,e){if(n===e)return!0;const t=ol(n);if(t!==ol(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Am(n).isEqual(Am(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=rl(i.timestampValue),a=rl(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,ea(n.bytesValue).isEqual(ea(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Tn(i.geoPointValue.latitude)===Tn(s.geoPointValue.latitude)&&Tn(i.geoPointValue.longitude)===Tn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Tn(i.integerValue)===Tn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Tn(i.doubleValue),a=Tn(s.doubleValue);return o===a?Sm(o)===Sm(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return ih(n.arrayValue.values||[],e.arrayValue.values||[],wo);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(yV(o)!==yV(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!wo(o[l],a[l])))return!1;return!0}(n,e);default:return Ee()}var s}function xm(n,e){return void 0!==(n.values||[]).find(t=>wo(t,e))}function al(n,e){if(n===e)return 0;const t=ol(n),r=ol(e);if(t!==r)return He(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Tn(s.integerValue||s.doubleValue),l=Tn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return bV(n.timestampValue,e.timestampValue);case 4:return bV(Am(n),Am(e));case 5:return He(n.stringValue,e.stringValue);case 6:return function(s,o){const a=ea(s),l=ea(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=He(a[u],l[u]);if(0!==h)return h}return He(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=He(Tn(s.latitude),Tn(o.latitude));return 0!==a?a:He(Tn(s.longitude),Tn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const h=al(a[u],l[u]);if(h)return h}return He(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===sl.mapValue&&o===sl.mapValue)return 0;if(s===sl.mapValue)return 1;if(o===sl.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let m=0;m<l.length&&m<h.length;++m){const g=He(l[m],h[m]);if(0!==g)return g;const y=al(a[l[m]],u[h[m]]);if(0!==y)return y}return He(l.length,h.length)}(n.mapValue,e.mapValue);default:throw Ee()}}function bV(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return He(n,e);const t=rl(n),r=rl(e),i=He(t.seconds,r.seconds);return 0!==i?i:He(t.nanos,r.nanos)}function lh(n){return JT(n)}function JT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=rl(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ea(n.bytesValue).toBase64():"referenceValue"in n?he.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=JT(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${JT(t.fields[o])}`;return i+"}"}(n.mapValue):Ee()}function Lc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function eD(n){return!!n&&"integerValue"in n}function Rm(n){return!!n&&"arrayValue"in n}function IV(n){return!!n&&"nullValue"in n}function CV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fE(n){return!!n&&"mapValue"in n}function Mm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return nl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Mm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function TV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function _Y(n){return"nullValue"in n?dE:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Lc(il.empty(),he.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ee()}function yY(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Lc(il.empty(),he.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?sl:Ee()}function DV(n,e){const t=al(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function SV(n,e){const t=al(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Rr{constructor(e){this.value=e}static empty(){return new Rr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!fE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mm(t)}setAll(e){let t=ln.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Mm(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());fE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];fE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){nl(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Rr(Mm(this.value))}}function AV(n){const e=[];return nl(n.fields,(t,r)=>{const i=new ln([t]);if(fE(r)){const s=AV(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ti(e)}class cn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new cn(e,0,xe.min(),xe.min(),xe.min(),Rr.empty(),0)}static newFoundDocument(e,t,r,i){return new cn(e,1,t,xe.min(),r,i,0)}static newNoDocument(e,t){return new cn(e,2,t,xe.min(),xe.min(),Rr.empty(),0)}static newUnknownDocument(e,t){return new cn(e,3,t,xe.min(),xe.min(),Rr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ll{constructor(e,t){this.position=e,this.inclusive=t}}function xV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?he.comparator(he.fromName(o.referenceValue),t.key):al(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function RV(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wo(n.position[t],e.position[t]))return!1;return!0}class Pm{constructor(e,t="asc"){this.field=e,this.dir=t}}function vY(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class MV{}class mt extends MV{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new EY(e,t,r):"array-contains"===t?new IY(e,r):"in"===t?new LV(e,r):"not-in"===t?new CY(e,r):"array-contains-any"===t?new TY(e,r):new mt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new wY(e,r):new bY(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(al(t,this.value)):null!==t&&ol(this.value)===ol(t)&&this.matchesComparison(al(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kt extends MV{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new kt(e,t)}matches(e){return ch(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function ch(n){return"and"===n.op}function tD(n){return"or"===n.op}function nD(n){return PV(n)&&ch(n)}function PV(n){for(const e of n.filters)if(e instanceof kt)return!1;return!0}function rD(n){if(n instanceof mt)return n.field.canonicalString()+n.op.toString()+lh(n.value);if(nD(n))return n.filters.map(e=>rD(e)).join(",");{const e=n.filters.map(t=>rD(t)).join(",");return`${n.op}(${e})`}}function NV(n,e){return n instanceof mt?(r=n,(i=e)instanceof mt&&r.op===i.op&&r.field.isEqual(i.field)&&wo(r.value,i.value)):n instanceof kt?function(r,i){return i instanceof kt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&NV(o,i.filters[a]),!0)}(n,e):void Ee();var r,i}function kV(n,e){const t=n.filters.concat(e);return kt.create(t,n.op)}function OV(n){return n instanceof mt?`${(t=n).field.canonicalString()} ${t.op} ${lh(t.value)}`:n instanceof kt?function(t){return t.op.toString()+" {"+t.getFilters().map(OV).join(" ,")+"}"}(n):"Filter";var t}class EY extends mt{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class wY extends mt{constructor(e,t){super(e,"in",t),this.keys=FV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bY extends mt{constructor(e,t){super(e,"not-in",t),this.keys=FV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function FV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>he.fromName(r.referenceValue))}class IY extends mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rm(t)&&xm(t.arrayValue,this.value)}}class LV extends mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xm(this.value.arrayValue,t)}}class CY extends mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(xm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xm(this.value.arrayValue,t)}}class TY extends mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xm(this.value.arrayValue,r))}}class DY{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function iD(n,e=null,t=[],r=[],i=null,s=null,o=null){return new DY(n,e,t,r,i,s,o)}function Vc(n){const e=ue(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>rD(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Dm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>lh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>lh(r)).join(",")),e.ce=t}return e.ce}function Nm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!vY(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!NV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!RV(n.startAt,e.startAt)&&RV(n.endAt,e.endAt)}function pE(n){return he.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function mE(n,e){return n.filters.filter(t=>t instanceof mt&&t.field.isEqual(e))}function VV(n,e,t){let r=dE,i=!0;for(const s of mE(n,e)){let o=dE,a=!0;switch(s.op){case"<":case"<=":o=_Y(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=dE}DV({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];DV({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function BV(n,e,t){let r=sl,i=!0;for(const s of mE(n,e)){let o=sl,a=!0;switch(s.op){case">=":case">":o=yY(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=sl}SV({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];SV({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class ta{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null}}function UV(n,e,t,r,i,s,o,a){return new ta(n,e,t,r,i,s,o,a)}function uh(n){return new ta(n)}function jV(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function sD(n){return null!==n.collectionGroup}function dh(n){const e=ue(n);if(null===e.le){e.le=[];const t=new Set;for(const s of e.explicitOrderBy)e.le.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Bt(ln.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.le.push(new Pm(s,r))}),t.has(ln.keyField().canonicalString())||e.le.push(new Pm(ln.keyField(),r))}return e.le}function di(n){const e=ue(n);return e.he||(e.he=function $V(n,e){if("F"===n.limitType)return iD(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Pm(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new ll(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ll(n.startAt.position,n.startAt.inclusive):null;return iD(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,dh(n))),e.he}function oD(n,e){const t=n.filters.concat([e]);return new ta(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function gE(n,e,t){return new ta(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function km(n,e){return Nm(di(n),di(e))&&n.limitType===e.limitType}function HV(n){return`${Vc(di(n))}|lt:${n.limitType}`}function hh(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>OV(i)).join(", ")}]`),Dm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>lh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>lh(i)).join(",")),`Target(${r})`}(di(n))}; limitType=${n.limitType})`}function Om(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):he.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of dh(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,l){const u=xV(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,dh(r),i)||r.endAt&&!function(o,a,l){const u=xV(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,dh(r),i)));var r,i}function zV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qV(n){return(e,t)=>{let r=!1;for(const i of dh(n)){const s=SY(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function SY(n,e,t){const r=n.field.isKeyField()?he.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return null!==l&&null!==u?al(l,u):Ee()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ee()}}class na{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){nl(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return vV(this.inner)}size(){return this.innerSize}}const AY=new Yt(he.comparator);function Di(){return AY}const GV=new Yt(he.comparator);function Fm(...n){let e=GV;for(const t of n)e=e.insert(t.key,t);return e}function WV(n){let e=GV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bo(){return Lm()}function ZV(){return Lm()}function Lm(){return new na(n=>n.toString(),(n,e)=>n.isEqual(e))}const xY=new Yt(he.comparator),RY=new Bt(he.comparator);function Xe(...n){let e=RY;for(const t of n)e=e.add(t);return e}const MY=new Bt(He);function aD(){return MY}function KV(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sm(e)?"-0":e}}function QV(n){return{integerValue:""+n}}function YV(n,e){return dV(e)?QV(e):KV(n,e)}class _E{constructor(){this._=void 0}}function PY(n,e,t){return n instanceof fh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&cE(s)&&(s=uE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Bc?JV(n,e):n instanceof Uc?e2(n,e):function(i,s){const o=XV(i,s),a=t2(o)+t2(i.Ie);return eD(o)&&eD(i.Ie)?QV(a):KV(i.serializer,a)}(n,e)}function NY(n,e,t){return n instanceof Bc?JV(n,e):n instanceof Uc?e2(n,e):t}function XV(n,e){return n instanceof ph?eD(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class fh extends _E{}class Bc extends _E{constructor(e){super(),this.elements=e}}function JV(n,e){const t=n2(e);for(const r of n.elements)t.some(i=>wo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Uc extends _E{constructor(e){super(),this.elements=e}}function e2(n,e){let t=n2(e);for(const r of n.elements)t=t.filter(i=>!wo(i,r));return{arrayValue:{values:t}}}class ph extends _E{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function t2(n){return Tn(n.integerValue||n.doubleValue)}function n2(n){return Rm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Vm{constructor(e,t){this.field=e,this.transform=t}}class OY{constructor(e,t){this.version=e,this.transformResults=t}}class _n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yE(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class vE{}function r2(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new gh(n.key,_n.none()):new mh(n.key,n.data,_n.none());{const t=n.data,r=Rr.empty();let i=new Bt(ln.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new ra(n.key,r,new Ti(i.toArray()),_n.none())}}function FY(n,e,t){n instanceof mh?function(i,s,o){const a=i.value.clone(),l=a2(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof ra?function(i,s,o){if(!yE(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=a2(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(o2(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Bm(n,e,t,r){return n instanceof mh?function(s,o,a,l){if(!yE(s.precondition,o))return a;const u=s.value.clone(),h=l2(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof ra?function(s,o,a,l){if(!yE(s.precondition,o))return a;const u=l2(s.fieldTransforms,l,o),h=o.data;return h.setAll(o2(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,yE(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function LY(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=XV(r.transform,i||null);null!=s&&(null===t&&(t=Rr.empty()),t.set(r.field,s))}return t||null}function s2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&ih(r,i,(s,o)=>function kY(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Bc&&i instanceof Bc||r instanceof Uc&&i instanceof Uc?ih(r.elements,i.elements,wo):r instanceof ph&&i instanceof ph?wo(r.Ie,i.Ie):r instanceof fh&&i instanceof fh);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class mh extends vE{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ra extends vE{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function o2(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function a2(n,e,t){const r=new Map;Ae(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,NY(o,a,t[i]))}return r}function l2(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,PY(s,o,e))}return r}class gh extends vE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lD extends vE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class cD{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&FY(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Bm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Bm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ZV();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=r2(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xe())}isEqual(e){return this.batchId===e.batchId&&ih(this.mutations,e.mutations,(t,r)=>s2(t,r))&&ih(this.baseMutations,e.baseMutations,(t,r)=>s2(t,r))}}class uD{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ae(e.mutations.length===r.length);let i=xY;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new uD(e,t,r,i)}}class dD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class BY{constructor(e,t){this.count=e,this.unchangedNames=t}}var jn,bt;function c2(n){switch(n){default:return Ee();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function u2(n){if(void 0===n)return Mn("GRPC error has no .code"),B.UNKNOWN;switch(n){case jn.OK:return B.OK;case jn.CANCELLED:return B.CANCELLED;case jn.UNKNOWN:return B.UNKNOWN;case jn.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case jn.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case jn.INTERNAL:return B.INTERNAL;case jn.UNAVAILABLE:return B.UNAVAILABLE;case jn.UNAUTHENTICATED:return B.UNAUTHENTICATED;case jn.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case jn.NOT_FOUND:return B.NOT_FOUND;case jn.ALREADY_EXISTS:return B.ALREADY_EXISTS;case jn.PERMISSION_DENIED:return B.PERMISSION_DENIED;case jn.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case jn.ABORTED:return B.ABORTED;case jn.OUT_OF_RANGE:return B.OUT_OF_RANGE;case jn.UNIMPLEMENTED:return B.UNIMPLEMENTED;case jn.DATA_LOSS:return B.DATA_LOSS;default:return Ee()}}(bt=jn||(jn={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";function d2(){return new TextEncoder}const UY=new th([4294967295,4294967295],0);function h2(n){const e=d2().encode(n),t=new NQ;return t.update(e),new Uint8Array(t.digest())}function f2(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new th([t,r],0),new th([i,s],0)]}class hD{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Um(`Invalid padding: ${t}`);if(r<0)throw new Um(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Um(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Um(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=th.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(th.fromNumber(r)));return 1===i.compare(UY)&&(i=new th([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=h2(e),[r,i]=f2(t);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new hD(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const t=h2(e),[r,i]=f2(t);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Um extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class jm{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,$m.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new jm(xe.min(),i,new Yt(He),Di(),Xe())}}class $m{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new $m(r,t,Xe(),Xe(),Xe())}}class wE{constructor(e,t,r,i){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=i}}class p2{constructor(e,t){this.targetId=e,this.fe=t}}class m2{constructor(e,t,r=rr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class g2{constructor(){this.ge=0,this.pe=y2(),this.ye=rr.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Xe(),t=Xe(),r=Xe();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ee()}}),new $m(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=y2()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ae(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class jY{constructor(e){this.Le=e,this.ke=new Map,this.qe=Di(),this.Qe=_2(),this.Ke=new Yt(He)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:Ee()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.fe.count,i=this.Ye(t);if(i){const s=i.target;if(pE(s))if(0===r){const o=new he(s.path);this.We(t,o,cn.newNoDocument(o,xe.min()))}else Ae(1===r);else{const o=this.Ze(t);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;0!==l&&(this.He(t),this.Ke=this.Ke.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=ea(r).toUint8Array()}catch(l){if(l instanceof wV)return Ci("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new hD(o,i,s)}catch(l){return Ci(l instanceof Um?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Te?null:a}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),i++)}),i}it(e){const t=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&pE(a.target)){const l=new he(a.target.path);null!==this.qe.get(l)||this.st(o,l)||this.We(o,l,cn.newNoDocument(l,e))}s.De&&(t.set(o,s.ve()),s.Fe())}});let r=Xe();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Ye(l);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new jm(e,t,this.Ke,this.qe,r);return this.qe=Di(),this.Qe=_2(),this.Ke=new Yt(He),i}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,t)?i.Me(t,1):i.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new g2,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Bt(He),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||oe("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new g2),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function _2(){return new Yt(he.comparator)}function y2(){return new Yt(he.comparator)}const $Y={asc:"ASCENDING",desc:"DESCENDING"},HY={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zY={and:"AND",or:"OR"};class qY{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fD(n,e){return n.useProto3Json||Dm(e)?e:{value:e}}function _h(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function v2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function GY(n,e){return _h(n,e.toTimestamp())}function Pn(n){return Ae(!!n),xe.fromTimestamp(function(t){const r=rl(t);return new gn(r.seconds,r.nanos)}(n))}function pD(n,e){return(r=n,new wt(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function E2(n){const e=wt.fromString(n);return Ae(x2(e)),e}function Hm(n,e){return pD(n.databaseId,e.path)}function Io(n,e){const t=E2(e);if(t.get(1)!==n.databaseId.projectId)throw new re(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new re(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(b2(t))}function mD(n,e){return pD(n.databaseId,e)}function w2(n){const e=E2(n);return 4===e.length?wt.emptyPath():b2(e)}function zm(n){return new wt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function b2(n){return Ae(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function I2(n,e,t){return{name:Hm(n,e),fields:t.value.mapValue.fields}}function C2(n,e,t){const r=Io(n,e.name),i=Pn(e.updateTime),s=e.createTime?Pn(e.createTime):xe.min(),o=new Rr({mapValue:{fields:e.fields}}),a=cn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function qm(n,e){let t;if(e instanceof mh)t={update:I2(n,e.key,e.value)};else if(e instanceof gh)t={delete:Hm(n,e.key)};else if(e instanceof ra)t={update:I2(n,e.key,e.data),updateMask:eX(e.fieldMask)};else{if(!(e instanceof lD))return Ee();t={verify:Hm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof fh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Bc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Uc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ph)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Ee()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:GY(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ee()),t;var s}function gD(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?_n.updateTime(Pn(s.updateTime)):void 0!==s.exists?_n.exists(s.exists):_n.none():_n.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;"setToServerValue"in a?(Ae("REQUEST_TIME"===a.setToServerValue),l=new fh):"appendMissingElements"in a?l=new Bc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new Uc(a.removeAllFromArray.values||[]):"increment"in a?l=new ph(o,a.increment):Ee();const u=ln.fromServerFormat(a.fieldPath);return new Vm(u,l)}(n,i)):[];var s;if(e.update){const i=Io(n,e.update.name),s=new Rr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Ti((e.updateMask.fieldPaths||[]).map(h=>ln.fromServerFormat(h)));return new ra(i,s,o,t,r)}return new mh(i,s,t,r)}if(e.delete){const i=Io(n,e.delete);return new gh(i,t)}if(e.verify){const i=Io(n,e.verify);return new lD(i,t)}return Ee()}function T2(n,e){return{documents:[mD(n,e.path)]}}function _D(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=mD(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=mD(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(0!==l.length)return A2(kt.create(l,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(l){if(0!==l.length)return l.map(u=>{return{field:cl((m=u).field),direction:YY(m.dir)};var m})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=fD(n,e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),t;var l}function D2(n){let e=w2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ae(1===r);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(m){const g=S2(m);return g instanceof kt&&nD(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(g=>{return new Pm(yh((E=g).field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;t.limit&&(a=function(m){let g;return g="object"==typeof m?m.value:m,Dm(g)?null:g}(t.limit));let l=null;var m;t.startAt&&(l=new ll((m=t.startAt).values||[],!!m.before));let u=null;return t.endAt&&(u=function(m){return new ll(m.values||[],!m.before)}(t.endAt)),UV(e,i,o,s,a,"F",l,u)}function S2(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=yh(t.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=yh(t.unaryFilter.field);return mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=yh(t.unaryFilter.field);return mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=yh(t.unaryFilter.field);return mt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(n):void 0!==n.fieldFilter?mt.create(yh((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return kt.create(t.compositeFilter.filters.map(r=>S2(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ee()}}(t.compositeFilter.op))}(n):Ee();var t}function YY(n){return $Y[n]}function XY(n){return HY[n]}function JY(n){return zY[n]}function cl(n){return{fieldPath:n.canonicalString()}}function yh(n){return ln.fromServerFormat(n.fieldPath)}function A2(n){return n instanceof mt?function(t){if("=="===t.op){if(CV(t.value))return{unaryFilter:{field:cl(t.field),op:"IS_NAN"}};if(IV(t.value))return{unaryFilter:{field:cl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(CV(t.value))return{unaryFilter:{field:cl(t.field),op:"IS_NOT_NAN"}};if(IV(t.value))return{unaryFilter:{field:cl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cl(t.field),op:XY(t.op),value:t.value}}}(n):n instanceof kt?function(t){const r=t.getFilters().map(i=>A2(i));return 1===r.length?r[0]:{compositeFilter:{op:JY(t.op),filters:r}}}(n):Ee()}function eX(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function x2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ia{constructor(e,t,r,i,s=xe.min(),o=xe.min(),a=rr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ia(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ia(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class R2{constructor(e){this.ut=e}}function M2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:bE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Hm(s=n.ut,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:_h(s,o.version.toTimestamp()),createTime:_h(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:jc(e.version)};else{if(!e.isUnknownDocument())return Ee();r.unknownDocument={path:t.path.toArray(),version:jc(e.version)}}var s,o;return r}function bE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function jc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $c(n){const e=new gn(n.seconds,n.nanoseconds);return xe.fromTimestamp(e)}function Hc(n,e){const t=(e.baseMutations||[]).map(s=>gD(n.ut,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>gD(n.ut,s)),i=gn.fromMillis(e.localWriteTimeMs);return new cD(e.batchId,i,t,r)}function Gm(n){const e=$c(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?$c(n.lastLimboFreeSnapshotVersion):xe.min();let r;return r=void 0!==n.query.documents?(Ae(1===(s=n.query).documents.length),di(uh(w2(s.documents[0])))):function(s){return di(D2(s))}(n.query),new ia(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,rr.fromBase64String(n.resumeToken));var s}function P2(n,e){const t=jc(e.snapshotVersion),r=jc(e.lastLimboFreeSnapshotVersion);let i;i=pE(e.target)?T2(n.ut,e.target):_D(n.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vc(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function yD(n){const e=D2({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?gE(e,e.limit,"L"):e}function vD(n,e){return new dD(e.largestBatchId,gD(n.ut,e.overlayMutation))}function N2(n,e){const t=e.path.lastSegment();return[n,qr(e.path.popLast()),t]}function k2(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:jc(r.readTime),documentKey:qr(r.documentKey.path),largestBatchId:r.largestBatchId}}class nX{getBundleMetadata(e,t){return O2(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:$c(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return O2(e).put({bundleId:(i=t).id,createTime:jc(Pn(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return F2(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:yD(s.bundledQuery),readTime:$c(s.readTime)};var s})}saveNamedQuery(e,t){return F2(e).put({name:(i=t).name,readTime:jc(Pn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function O2(n){return mr(n,"bundles")}function F2(n){return mr(n,"namedQueries")}class IE{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){return new IE(e,t.uid||"")}getOverlay(e,t){return Wm(e).get(N2(this.userId,t)).next(r=>r?vD(this.serializer,r):null)}getOverlays(e,t){const r=bo();return O.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new dD(t,o);i.push(this.lt(e,a))}),O.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(qr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Wm(e).H("collectionPathOverlayIndex",a))}),O.waitFor(s)}getOverlaysForCollection(e,t,r){const i=bo(),s=qr(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Wm(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=vD(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=bo();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wm(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,u,h)=>{const m=vD(this.serializer,u);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):h.done()}).next(()=>s)}lt(e,t){return Wm(e).put(function(i,s,o){const[a,l,u]=N2(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:qm(i.ut,o.mutation)}}(this.serializer,this.userId,t))}}function Wm(n){return mr(n,"documentOverlays")}class zc{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(Tn(e.integerValue));else if("doubleValue"in e){const r=Tn(e.doubleValue);isNaN(r)?this.Tt(t,13):(this.Tt(t,15),Sm(r)?t.Et(0):t.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(t,20),"string"==typeof r?t.dt(r):(t.dt(`${r.seconds||""}`),t.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(ea(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(t,45),t.Et(r.latitude||0),t.Et(r.longitude||0)}else"mapValue"in e?TV(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Ee()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const r=e.fields||{};this.Tt(t,55);for(const i of Object.keys(r))this.At(i,t),this.Pt(r[i],t)}yt(e,t){const r=e.values||[];this.Tt(t,50);for(const i of r)this.Pt(i,t)}ft(e,t){this.Tt(t,37),he.fromName(e).path.forEach(r=>{this.Tt(t,60),this.wt(r,t)})}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function rX(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function L2(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=rX(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}zc.St=new zc;class iX{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Dt(r.value),r=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=t.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const t=this.Bt(e),r=L2(t);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}kt(e){const t=this.Bt(e),r=L2(t);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class sX{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class oX{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Zm{constructor(){this.Wt=new iX,this.Gt=new sX(this.Wt),this.zt=new oX(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class qc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new qc(this.indexId,this.documentKey,this.arrayValue,r)}}function ul(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=V2(n.arrayValue,e.arrayValue),0!==t?t:(t=V2(n.directionalValue,e.directionalValue),0!==t?t:he.comparator(n.documentKey,e.documentKey)))}function V2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class B2{constructor(e){this.Jt=new Bt((t,r)=>ln.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(Ae(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=ZT(e);if(void 0!==t&&!this.tn(t))return!1;const r=kc(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.nn(a,l)||!this.rn(this.Yt[o++],l))return!1}++s}for(;s<r.length;++s)if(o>=this.Yt.length||!this.rn(this.Yt[o++],r[s]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Bt(ln.comparator);const t=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Oc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Oc(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Oc(r.field,"asc"===r.dir?0:1)));return new sh(sh.UNKNOWN_ID,this.collectionId,t,oh.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function U2(n){var e,t;if(Ae(n instanceof mt||n instanceof kt),n instanceof mt){if(n instanceof LV){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>mt.create(n.field,"==",s)))||[];return kt.create(i,"or")}return n}const r=n.filters.map(i=>U2(i));return kt.create(r,n.op)}function aX(n){if(0===n.getFilters().length)return[];const e=bD(U2(n));return Ae(j2(e)),ED(e)||wD(e)?[e]:e.getFilters()}function ED(n){return n instanceof mt}function wD(n){return n instanceof kt&&nD(n)}function j2(n){return ED(n)||wD(n)||function(t){if(t instanceof kt&&tD(t)){for(const r of t.getFilters())if(!ED(r)&&!wD(r))return!1;return!0}return!1}(n)}function bD(n){if(Ae(n instanceof mt||n instanceof kt),n instanceof mt)return n;if(1===n.filters.length)return bD(n.filters[0]);const e=n.filters.map(r=>bD(r));let t=kt.create(e,n.op);return t=CE(t),j2(t)?t:(Ae(t instanceof kt),Ae(ch(t)),Ae(t.filters.length>1),t.filters.reduce((r,i)=>ID(r,i)))}function ID(n,e){let t;return Ae(n instanceof mt||n instanceof kt),Ae(e instanceof mt||e instanceof kt),t=n instanceof mt?e instanceof mt?kt.create([n,e],"and"):$2(n,e):e instanceof mt?$2(e,n):function(i,s){if(Ae(i.filters.length>0&&s.filters.length>0),ch(i)&&ch(s))return kV(i,s.getFilters());const o=tD(i)?i:s,a=tD(i)?s:i,l=o.filters.map(u=>ID(u,a));return kt.create(l,"or")}(n,e),CE(t)}function $2(n,e){if(ch(e))return kV(e,n.getFilters());{const t=e.filters.map(r=>ID(n,r));return kt.create(t,"or")}}function CE(n){if(Ae(n instanceof mt||n instanceof kt),n instanceof mt)return n;const e=n.getFilters();if(1===e.length)return CE(e[0]);if(PV(n))return n;const t=e.map(i=>CE(i)),r=[];return t.forEach(i=>{i instanceof mt?r.push(i):i instanceof kt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:kt.create(r,n.op)}class lX{constructor(){this.on=new CD}addToCollectionParentIndex(e,t){return this.on.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(Bi.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(Bi.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}}class CD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Bt(wt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Bt(wt.comparator)).toArray()}}const TE=new Uint8Array(0);class cX{constructor(e,t){this.user=e,this.databaseId=t,this._n=new CD,this.an=new na(r=>Vc(r),(r,i)=>Nm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this._n.add(t)});const s={collectionId:r,parent:qr(i)};return H2(e).put(s)}return O.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[sV(t),""],!1,!0);return H2(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Eo(o.parent))}return r})}addFieldIndex(e,t){const r=Km(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Eh(e);return s.next(a=>{o.put(k2(a,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Km(e),i=Eh(e),s=vh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Km(e),r=vh(e),i=Eh(e);return t.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,t){return O.forEach(this.un(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new B2(r).sn();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=vh(e);let i=!0;const s=new Map;return O.forEach(this.un(t),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Xe();const a=[];return O.forEach(s,(l,u)=>{var L;oe("IndexedDbIndexManager",`Using index ${L=l,`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map(X=>`${X.fieldPath}:${X.kind}`).join(",")}`} to execute ${Vc(t)}`);const h=function(L,X){const le=ZT(X);if(void 0===le)return null;for(const Re of mE(L,le.fieldPath))switch(Re.op){case"array-contains-any":return Re.value.arrayValue.values||[];case"array-contains":return[Re.value]}return null}(u,l),m=function(L,X){const le=new Map;for(const Re of kc(X))for(const je of mE(L,Re.fieldPath))switch(je.op){case"==":case"in":le.set(Re.fieldPath.canonicalString(),je.value);break;case"not-in":case"!=":return le.set(Re.fieldPath.canonicalString(),je.value),Array.from(le.values())}return null}(u,l),g=function(L,X){const le=[];let Re=!0;for(const je of kc(X)){const Ot=0===je.kind?VV(L,je.fieldPath,L.startAt):BV(L,je.fieldPath,L.startAt);le.push(Ot.value),Re&&(Re=Ot.inclusive)}return new ll(le,Re)}(u,l),y=function(L,X){const le=[];let Re=!0;for(const je of kc(X)){const Ot=0===je.kind?BV(L,je.fieldPath,L.endAt):VV(L,je.fieldPath,L.endAt);le.push(Ot.value),Re&&(Re=Ot.inclusive)}return new ll(le,Re)}(u,l),E=this.ln(l,u,g),b=this.ln(l,u,y),C=this.hn(l,u,m),N=this.Pn(l.indexId,h,E,g.inclusive,b,y.inclusive,C);return O.forEach(N,R=>r.j(R,t.limit).next(L=>{L.forEach(X=>{const le=he.fromSegments(X.documentKey);o.has(le)||(o=o.add(le),a.push(le))})}))}).next(()=>a)}return O.resolve(null)})}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:aX(kt.create(e.filters,"and")).map(r=>iD(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,t),t)}Pn(e,t,r,i,s,o,a){const l=(null!=t?t.length:1)*Math.max(r.length,s.length),u=l/(null!=t?t.length:1),h=[];for(let m=0;m<l;++m){const g=t?this.In(t[m/u]):TE,y=this.Tn(e,g,r[m%u],i),E=this.En(e,g,s[m%u],o),b=a.map(C=>this.Tn(e,g,C,!0));h.push(...this.createRange(y,E,b))}return h}Tn(e,t,r,i){const s=new qc(e,he.empty(),t,r);return i?s:s.Ht()}En(e,t,r,i){const s=new qc(e,he.empty(),t,r);return i?s.Ht():s}cn(e,t){const r=new B2(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.un(t);return O.forEach(i,s=>this.cn(e,s).next(o=>{o?0!==r&&o.fields.length<function(l){let u=new Bt(ln.comparator),h=!1;for(const m of l.filters)for(const g of m.getFlattenedFilters())g.field.isKeyField()||("array-contains"===g.op||"array-contains-any"===g.op?h=!0:u=u.add(g.field));for(const m of l.orderBy)m.field.isKeyField()||(u=u.add(m.field));return u.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}dn(e,t){const r=new Zm;for(const i of kc(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.jt(i.kind);zc.St.ht(s,o)}return r.Ut()}In(e){const t=new Zm;return zc.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const r=new Zm;return zc.St.ht(Lc(this.databaseId,t),r.jt(function(s){const o=kc(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,t,r){if(null===r)return[];let i=[];i.push(new Zm);let s=0;for(const o of kc(e)){const a=r[s++];for(const l of i)if(this.Rn(t,o.fieldPath)&&Rm(a))i=this.Vn(i,o,a);else{const u=l.jt(o.kind);zc.St.ht(a,u)}}return this.mn(i)}ln(e,t,r){return this.hn(e,t,r.position)}mn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Ut();return t}Vn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Zm;l.seed(a.Ut()),zc.St.ht(o,l.jt(t.kind)),s.push(l)}return s}Rn(e,t){return!!e.filters.find(r=>r instanceof mt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Km(e),i=Eh(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const o=[];return O.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,m){const g=m?new oh(m.sequenceNumber,new Bi($c(m.readTime),new he(Eo(m.documentKey)),m.largestBatchId)):oh.empty(),y=h.fields.map(([E,b])=>new Oc(ln.fromServerFormat(E),b));return new sh(h.indexId,h.collectionGroup,y,g)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:He(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Km(e),s=Eh(e);return this.fn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>O.forEach(a,l=>s.put(k2(l.indexId,this.user,o,r)))))}updateIndexEntries(e,t){const r=new Map;return O.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),O.forEach(a,l=>this.gn(e,i,l).next(u=>{const h=this.pn(s,l);return u.isEqual(h)?O.resolve():this.yn(e,s,l,u,h)}))))})}wn(e,t,r,i){return vh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,r,i){return vh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,t.key),t.key.path.toArray()])}gn(e,t,r){const i=vh(e);let s=new Bt(ul);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,t)])},(o,a)=>{s=s.add(new qc(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,t){let r=new Bt(ul);const i=this.dn(t,e);if(null==i)return r;const s=ZT(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Rm(o))for(const a of o.arrayValue.values||[])r=r.add(new qc(t.indexId,e.key,this.In(a),i))}else r=r.add(new qc(t.indexId,e.key,TE,i));return r}yn(e,t,r,i,s){oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,u,h,m,g){const y=l.getIterator(),E=u.getIterator();let b=ah(y),C=ah(E);for(;b||C;){let N=!1,R=!1;if(b&&C){const L=h(b,C);L<0?R=!0:L>0&&(N=!0)}else null!=b?R=!0:N=!0;N?(m(C),C=ah(E)):R?(g(b),b=ah(y)):(b=ah(y),C=ah(E))}}(i,s,ul,a=>{o.push(this.wn(e,t,r,a))},a=>{o.push(this.Sn(e,t,r,a))}),O.waitFor(o)}fn(e){let t=1;return Eh(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>ul(o,a)).filter((o,a,l)=>!a||0!==ul(o,l[a-1]));const i=[];i.push(e);for(const o of r){const a=ul(o,e),l=ul(o,t);if(0===a)i[0]=e.Ht();else if(a>0&&l<0)i.push(o),i.push(o.Ht());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,TE,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,TE,[]]))}return s}bn(e,t){return ul(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(z2)}getMinOffset(e,t){return O.mapArray(this.un(t),r=>this.cn(e,r).next(i=>i||Ee())).next(z2)}}function H2(n){return mr(n,"collectionParents")}function vh(n){return mr(n,"indexEntries")}function Km(n){return mr(n,"indexConfiguration")}function Eh(n){return mr(n,"indexState")}function z2(n){Ae(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;KT(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Bi(e.readTime,e.documentKey,t)}const q2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Gr(e,Gr.DEFAULT_COLLECTION_PERCENTILE,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function G2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.Y({range:o},(h,m,g)=>(a++,g.delete()));s.push(l.next(()=>{Ae(1===a)}));const u=[];for(const h of t.mutations){const m=pV(e,h.key.path,t.batchId);s.push(i.delete(m)),u.push(h.key)}return O.waitFor(s).next(()=>u)}function DE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ee();e=n.noDocument}return JSON.stringify(e).length}Gr.DEFAULT_COLLECTION_PERCENTILE=10,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gr.DEFAULT=new Gr(41943040,Gr.DEFAULT_COLLECTION_PERCENTILE,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gr.DISABLED=new Gr(-1,0,0);class SE{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,t,r,i){Ae(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new SE(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dl(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=wh(e),o=dl(e);return o.add({}).next(a=>{Ae("number"==typeof a);const l=new cD(a,t,r,i),u=function(y,E,b){const C=b.baseMutations.map(R=>qm(y.ut,R)),N=b.mutations.map(R=>qm(y.ut,R));return{userId:E,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:C,mutations:N}}(this.serializer,this.userId,l),h=[];let m=new Bt((g,y)=>He(g.canonicalString(),y.canonicalString()));for(const g of i){const y=pV(this.userId,g.key.path,a);m=m.add(g.key.path.popLast()),h.push(o.put(u)),h.push(s.put(y,YQ))}return m.forEach(g=>{h.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Dn[a]=l.keys()}),O.waitFor(h).next(()=>l)})}lookupMutationBatch(e,t){return dl(e).get(t).next(r=>r?(Ae(r.userId===this.userId),Hc(this.serializer,r)):null)}Cn(e,t){return this.Dn[t]?O.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Dn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return dl(e).Y({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(Ae(a.batchId>=r),s=Hc(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return dl(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dl(e).W("userMutationsIndex",t).next(r=>r.map(i=>Hc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=aE(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return wh(e).Y({range:i},(o,a,l)=>{const[u,h,m]=o,g=Eo(h);if(u===this.userId&&t.path.isEqual(g))return dl(e).get(m).next(y=>{if(!y)throw Ee();Ae(y.userId===this.userId),s.push(Hc(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bt(He);const i=[];return t.forEach(s=>{const o=aE(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=wh(e).Y({range:a},(u,h,m)=>{const[g,y,E]=u,b=Eo(y);g===this.userId&&s.path.isEqual(b)?r=r.add(E):m.done()});i.push(l)}),O.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=aE(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Bt(He);return wh(e).Y({range:o},(l,u,h)=>{const[m,g,y]=l,E=Eo(g);m===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(y)):h.done()}).next(()=>this.vn(e,a))}vn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(dl(e).get(s).next(o=>{if(null===o)throw Ee();Ae(o.userId===this.userId),r.push(Hc(this.serializer,o))}))}),O.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return G2(e.ae,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Fn(t.batchId)}),O.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return O.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return wh(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Eo(s[1]);i.push(l)}else a.done()}).next(()=>{Ae(0===i.length)})})}containsKey(e,t){return W2(e,this.userId,t)}Mn(e){return Z2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function W2(n,e,t){const r=aE(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return wh(n).Y({range:s,J:!0},(a,l,u)=>{const[h,m,g]=a;h===e&&m===i&&(o=!0),u.done()}).next(()=>o)}function dl(n){return mr(n,"mutations")}function wh(n){return mr(n,"documentMutations")}function Z2(n){return mr(n,"mutationQueues")}class Gc{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Gc(0)}static Nn(){return new Gc(-1)}}class uX{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new Gc(t.highestTargetId);return t.highestTargetId=r.next(),this.Ln(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>xe.fromTimestamp(new gn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Ln(e,i)))}addTargetData(e,t){return this.kn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(t,r),this.Ln(e,r))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>bh(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(Ae(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return bh(e).Y((o,a)=>{const l=Gm(a);l.sequenceNumber<=t&&null===r.get(l.targetId)&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>O.waitFor(s)).next(()=>i)}forEachTarget(e,t){return bh(e).Y((r,i)=>{const s=Gm(i);t(s)})}Bn(e){return K2(e).get("targetGlobalKey").next(t=>(Ae(null!==t),t))}Ln(e,t){return K2(e).put("targetGlobalKey",t)}kn(e,t){return bh(e).put(P2(this.serializer,t))}qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Vc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return bh(e).Y({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=Gm(a);Nm(t,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=hl(e);return t.forEach(o=>{const a=qr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),O.waitFor(i)}removeMatchingKeys(e,t,r){const i=hl(e);return O.forEach(t,s=>{const o=qr(s.path);return O.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=hl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=hl(e);let s=Xe();return i.Y({range:r,J:!0},(o,a,l)=>{const u=Eo(o[1]),h=new he(u);s=s.add(h)}).next(()=>s)}containsKey(e,t){const r=qr(t.path),i=IDBKeyRange.bound([r],[sV(r)],!1,!0);let s=0;return hl(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],l,u)=>{0!==o&&(s++,u.done())}).next(()=>s>0)}_t(e,t){return bh(e).get(t).next(r=>r?Gm(r):null)}}function bh(n){return mr(n,"targets")}function K2(n){return mr(n,"targetGlobal")}function hl(n){return mr(n,"targetDocuments")}function Q2([n,e],[t,r]){const i=He(n,t);return 0===i?He(e,r):i}class dX{constructor(e){this.Qn=e,this.buffer=new Bt(Q2),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Q2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Y2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var t=this;oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Q.Z)(function*(){t.Wn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){tl(r)?oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield el(r)}yield t.Gn(3e5)}))}}class hX{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return O.resolve(Ui._e);const r=new dX(t);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(q2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),q2):this.Jn(e,t))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let r,i,s,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),rh()<=go.in.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${m} documents in `+(u-l)+`ms\nTotal Duration: ${u-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class fX{constructor(e,t){this.db=e,this.garbageCollector=function X2(n,e){return new hX(n,e)}(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Yn(e){let t=0;return this.Hn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,(r,i)=>t(i))}addReference(e,t,r){return AE(e,r)}removeReference(e,t,r){return AE(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return AE(e,t)}Xn(e,t){return function(i,s){let o=!1;return Z2(i).Z(a=>W2(i,a,s).next(l=>(l&&(o=!0),O.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Zn(e,(o,a)=>{if(a<=t){const l=this.Xn(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,xe.min()),hl(e).delete([0,qr(o.path)])))});i.push(l)}}).next(()=>O.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return AE(e,t)}Zn(e,t){const r=hl(e);let i,s=Ui._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{0===o?(s!==Ui._e&&t(new he(Eo(i)),s),s=u,i=l):s=Ui._e}).next(()=>{s!==Ui._e&&t(new he(Eo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function AE(n,e){return hl(n).put((i=n.currentSequenceNumber,{targetId:0,path:qr(e.path),sequenceNumber:i}));var i}class J2{constructor(){this.changes=new na(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class pX{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wc(e).put(r)}removeEntry(e,t,r){return Wc(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],bE(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.er(e,r)))}getEntry(e,t){let r=cn.newInvalidDocument(t);return Wc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Qm(t))},(i,s)=>{r=this.tr(t,s)}).next(()=>r)}nr(e,t){let r={size:0,document:cn.newInvalidDocument(t)};return Wc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Qm(t))},(i,s)=>{r={document:this.tr(t,s),size:DE(s)}}).next(()=>r)}getEntries(e,t){let r=Di();return this.rr(e,t,(i,s)=>{const o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,t){let r=Di(),i=new Yt(he.comparator);return this.rr(e,t,(s,o)=>{const a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,DE(o))}).next(()=>({documents:r,sr:i}))}rr(e,t,r){if(t.isEmpty())return O.resolve();let i=new Bt(rB);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Qm(i.first()),Qm(i.last())),o=i.getIterator();let a=o.getNext();return Wc(e).Y({index:"documentKeyIndex",range:s},(l,u,h)=>{const m=he.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&rB(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.U(Qm(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),bE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wc(e).W(IDBKeyRange.bound(a,l,!0)).next(u=>{s?.incrementDocumentReadCount(u.length);let h=Di();for(const m of u){const g=this.tr(he.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);g.isFoundDocument()&&(Om(t,g)||i.has(g.key))&&(h=h.insert(g.key,g))}return h})}getAllFromCollectionGroup(e,t,r,i){let s=Di();const o=nB(t,r),a=nB(t,Bi.max());return Wc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,h)=>{const m=this.tr(he.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(m.key,m),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new mX(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tB(e).get("remoteDocumentGlobalKey").next(t=>(Ae(!!t),t))}er(e,t){return tB(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const r=function tX(n,e){let t;if(e.document)t=C2(n.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=he.fromSegments(e.noDocument.path),i=$c(e.noDocument.readTime);t=cn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ee();{const r=he.fromSegments(e.unknownDocument.path),i=$c(e.unknownDocument.version);t=cn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new gn(i[0],i[1]);return xe.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(xe.min()))return r}return cn.newInvalidDocument(e)}}function eB(n){return new pX(n)}class mX extends J2{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new na(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Bt((s,o)=>He(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(t.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=M2(this._r.serializer,o);i=i.add(s.path.popLast());const u=DE(l);r+=u-a.size,t.push(this._r.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=M2(this._r.serializer,o.convertToNoDocument(xe.min()));t.push(this._r.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),t.push(this._r.updateMetadata(e,r)),O.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next(r=>(this.ar.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this._r.ir(e,t).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function tB(n){return mr(n,"remoteDocumentGlobal")}function Wc(n){return mr(n,"remoteDocumentsV14")}function Qm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nB(n,e){const t=e.documentKey.path.toArray();return[n,bE(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function rB(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=He(t[s],r[s]),i)return i;return i=He(t.length,r.length),i||(i=He(t[t.length-2],r[r.length-2]),i||He(t[t.length-1],r[r.length-1]))}class gX{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class iB{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Bm(r.mutation,i,Ti.empty(),gn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Xe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Xe()){const i=bo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Fm();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=bo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Xe()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Di();const o=Lm(),a=Lm();return t.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(void 0===h||h.mutation instanceof ra)?s=s.insert(u.key,u):void 0!==h?(o.set(u.key,h.mutation.getFieldMask()),Bm(h.mutation,u,h.mutation.getFieldMask(),gn.now())):o.set(u.key,Ti.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),t.forEach((u,h)=>{var m;return a.set(u,new gX(h,null!==(m=o.get(u))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Lm();let i=new Yt((o,a)=>o-a),s=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=t.get(l);if(null===u)return;let h=r.get(l)||Ti.empty();h=a.applyToLocalView(u,h),r.set(l,h);const m=(i.get(a.batchId)||Xe()).add(l);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,m=ZV();h.forEach(g=>{if(!s.has(g)){const y=r2(t.get(g),r.get(g));null!==y&&m.set(g,y),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,m))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return he.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):sD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):O.resolve(bo());let a=-1,l=s;return o.next(u=>O.forEach(u,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{l=l.insert(h,g)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Xe())).next(h=>({batchId:a,changes:WV(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(r=>{let i=Fm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Fm();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,l=>{const u=(m=t,g=l.child(s),new ta(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,g;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();null===o.get(h)&&(o=o.insert(h,cn.newInvalidDocument(h)))});let a=Fm();return o.forEach((l,u)=>{const h=s.get(l);void 0!==h&&Bm(h.mutation,u,Ti.empty(),gn.now()),Om(t,u)&&(a=a.insert(l,u))}),a})}}class _X{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return O.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,{id:(i=t).id,version:i.version,createTime:Pn(i.createTime)}),O.resolve();var i}getNamedQuery(e,t){return O.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,{name:(i=t).name,query:yD(i.bundledQuery),readTime:Pn(i.readTime)}),O.resolve();var i}}class yX{constructor(){this.overlays=new Yt(he.comparator),this.lr=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){const r=bo();return O.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.lt(e,t,s)}),O.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){const i=bo(),s=t.length+1,o=new he(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Yt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=s.get(u.largestBatchId);null===h&&(h=bo(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=bo(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return O.resolve(a)}lt(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new dD(t,r));let s=this.lr.get(t);void 0===s&&(s=Xe(),this.lr.set(t,s)),this.lr.set(t,s.add(r.key))}}class TD{constructor(){this.hr=new Bt(gr.Pr),this.Ir=new Bt(gr.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const r=new gr(e,t);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.dr(new gr(e,t))}Ar(e,t){e.forEach(r=>this.removeReference(r,t))}Rr(e){const t=new he(new wt([])),r=new gr(t,e),i=new gr(t,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new he(new wt([])),r=new gr(t,e),i=new gr(t,e+1);let s=Xe();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new gr(e,0),r=this.hr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class gr{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return he.comparator(e.key,t.key)||He(e.gr,t.gr)}static Tr(e,t){return He(e.gr,t.gr)||he.comparator(e.key,t.key)}}class vX{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Bt(gr.Pr)}checkEmpty(e){return O.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.pr;this.pr++;const o=new cD(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new gr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,t){return O.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Sr(t+1),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new gr(t,0),i=new gr(t,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bt(He);return t.forEach(i=>{const s=new gr(i,0),o=new gr(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),O.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;he.isDocumentKey(s)||(s=s.child(""));const o=new gr(new he(s),0);let a=new Bt(He);return this.yr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.gr)),!0)},o),O.resolve(this.br(a))}br(e){const t=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ae(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return O.forEach(t.mutations,i=>{const s=new gr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,t){const r=new gr(t,0),i=this.yr.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return O.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class EX{constructor(e){this.Cr=e,this.docs=new Yt(he.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(t))}getEntries(e,t){let r=Di();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():cn.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Di();const o=t.path,a=new he(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||KT(aV(h),r)<=0||(i.has(h.key)||Om(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ee()}vr(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new wX(this)}getSize(e){return O.resolve(this.size)}}class wX extends J2{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class bX{constructor(e){this.persistence=e,this.Fr=new na(t=>Vc(t),Nm),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.Mr=0,this.Or=new TD,this.targetCount=0,this.Nr=Gc.On()}forEachTarget(e,t){return this.Fr.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Mr&&(this.Mr=t),O.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new Gc(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.kn(t),O.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fr.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.Or.Er(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.Or.Ar(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),O.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Or.mr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.Or.containsKey(t))}}class DD{constructor(e,t){this.Br={},this.overlays={},this.Lr=new Ui(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new bX(this),this.indexManager=new lX,this.remoteDocumentCache=new EX(r=>this.referenceDelegate.Qr(r)),this.serializer=new R2(t),this.Kr=new _X(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yX,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new vX(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,r){oe("MemoryPersistence","Starting transaction:",e);const i=new IX(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,t){return O.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class IX extends cV{constructor(e){super(),this.currentSequenceNumber=e}}class xE{constructor(e){this.persistence=e,this.Gr=new TD,this.zr=null}static jr(e){return new xE(e)}get Hr(){if(this.zr)return this.zr;throw Ee()}addReference(e,t,r){return this.Gr.addReference(r,t),this.Hr.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Gr.removeReference(r,t),this.Hr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),O.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Hr,r=>{const i=he.fromPath(r);return this.Jr(e,i).next(s=>{s||t.removeEntry(i,xe.min())})}).next(()=>(this.zr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Jr(e,t).next(r=>{r?this.Hr.delete(t.toString()):this.Hr.add(t.toString())})}Qr(e){return 0}Jr(e,t){return O.or([()=>O.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class CX{constructor(e){this.serializer=e}N(e,t,r,i){const s=new oE("createOrUpgrade",t);var l;r<1&&i>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fV,{unique:!0}),l.createObjectStore("documentMutations"),sB(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=O.resolve();return r<3&&i>=3&&(0!==r&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),sB(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xe.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(l,u){return u.store("mutations").W().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fV,{unique:!0});const m=u.store("mutations"),g=h.map(y=>m.put(y));return O.waitFor(g)})}(e,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(l){const u=l.createObjectStore("documentOverlays",{keyPath:cY});u.createIndex("collectionPathOverlayIndex",uY,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",dY,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:XQ});u.createIndex("documentKeyIndex",JQ),u.createIndex("collectionGroupIndex",eY)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:sY}).createIndex("sequenceNumberIndex",oY,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:aY}).createIndex("documentKeyIndex",lY,{unique:!1})}(e))),o}Xr(e){let t=0;return e.store("remoteDocuments").Y((r,i)=>{t+=DE(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>O.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>O.forEach(a,l=>{Ae(l.userId===s.userId);const u=Hc(this.serializer,l);return G2(e,s.userId,u).next(()=>{})}))}))}ei(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const l=new wt(o),u=[0,qr(l)];s.push(t.get(u).next(h=>h?O.resolve():t.put({targetId:0,path:qr(l),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>O.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:iY});const r=t.store("collectionParents"),i=new CD,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:qr(l)})}};return t.store("remoteDocuments").Y({J:!0},(o,a)=>{const l=new wt(o);return s(l.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([o,a,l],u)=>{const h=Eo(a);return s(h.popLast())}))}ni(e){const t=e.store("targets");return t.Y((r,i)=>{const s=Gm(i),o=P2(this.serializer,s);return t.put(o)})}ri(e,t){const r=t.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(m=o,m.document?new he(wt.fromString(m.document.name).popFirst(5)):m.noDocument?he.fromSegments(m.noDocument.path):m.unknownDocument?he.fromSegments(m.unknownDocument.path):Ee()).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(u))}).next(()=>O.waitFor(i))}ii(e,t){const r=t.store("mutations"),i=eB(this.serializer),s=new DD(xE.jr,this.serializer.ut);return r.W().next(o=>{const a=new Map;return o.forEach(l=>{var u;let h=null!==(u=a.get(l.userId))&&void 0!==u?u:Xe();Hc(this.serializer,l).keys().forEach(m=>h=h.add(m)),a.set(l.userId,h)}),O.forEach(a,(l,u)=>{const h=new pr(u),m=IE.ct(this.serializer,h),g=s.getIndexManager(h),y=SE.ct(h,this.serializer,g,s.referenceDelegate);return new iB(i,y,m,g).recalculateAndSaveOverlaysForDocumentKeys(new XT(t,Ui._e),l).next()})})}}function sB(n){n.createObjectStore("targetDocuments",{keyPath:nY}).createIndex("documentTargetsIndex",rY,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",tY,{unique:!0}),n.createObjectStore("targetGlobal")}const SD="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class AD{constructor(e,t,r,i,s,o,a,l,u,h,m=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=u,this._i=h,this.ai=m,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=g=>Promise.resolve(),!AD.D())throw new re(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fX(this,i),this.Ii=t+"main",this.serializer=new R2(l),this.Ti=new Os(this.Ii,this.ai,new CX(this.serializer)),this.qr=new uX(this.referenceDelegate,this.serializer),this.remoteDocumentCache=eB(this.serializer),this.Kr=new nX,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===h&&Mn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new re(B.FAILED_PRECONDITION,SD);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Ui(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var t=this;return this.Pi=function(){var r=(0,Q.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var t=(0,Q.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,Q.Z)(function*(){t.started&&(yield t.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ME(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(t=>this.isPrimary&&!t?this.pi(e).next(()=>!1):!!t&&this.yi(e).next(()=>!0))).catch(e=>{if(tl(e))return oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Ym(e).get("owner").next(t=>O.resolve(this.wi(t)))}Si(e){return ME(e).delete(this.clientId)}bi(){var e=this;return(0,Q.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=mr(r,"clientMetadata");return i.W().next(s=>{const o=e.Ci(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return O.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of t)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?O.resolve(!0):Ym(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new re(B.FAILED_PRECONDITION,SD);return!1}}return!(!this.networkEnabled||!this.inForeground)||ME(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Q.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new XT(t,Ui._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,t){return e.filter(r=>this.Di(r.updateTimeMs,t)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>ME(e).W().next(t=>this.Ci(t,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,t){return SE.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new cX(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return IE.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,r){oe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(l=this.ai)?fY:14===l?_V:13===l?gV:12===l?hY:11===l?mV:void Ee();var l;let o;return this.Ti.runTransaction(e,i,s,a=>(o=new XT(a,this.Lr?this.Lr.next():Ui._e),"readwrite-primary"===t?this.fi(o).next(l=>!!l||this.gi(o)).next(l=>{if(!l)throw Mn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new re(B.FAILED_PRECONDITION,lV);return r(o)}).next(l=>this.yi(o).next(()=>l)):this.Li(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return Ym(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)&&!this.wi(t)&&!(this._i||this.allowTabSynchronization&&t.allowTabSynchronization))throw new re(B.FAILED_PRECONDITION,SD)})}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ym(e).put("owner",t)}static D(){return Os.D()}pi(e){const t=Ym(e);return t.get("owner").next(r=>this.wi(r)?(oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):O.resolve())}Di(e,t){const r=Date.now();return!(e<r-t||e>r&&(Mn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const t=/(?:Version|Mobile)\/1[456]/;(0,qt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const r=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Mn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Mn("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ym(n){return mr(n,"owner")}function ME(n){return mr(n,"clientMetadata")}function xD(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class RD{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ki=r,this.qi=i}static Qi(e,t){let r=Xe(),i=Xe();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new RD(e,t.fromCache,r,i)}}class TX{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class oB{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.zi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new TX;return this.Hi(e,t,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,t,o,a.size)})}).next(()=>s.result)}Ji(e,t,r,i){return r.documentReadCount<this.Ui?(rh()<=go.in.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",hh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),O.resolve()):(rh()<=go.in.DEBUG&&oe("QueryEngine","Query:",hh(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(rh()<=go.in.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",hh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,di(t))):O.resolve())}zi(e,t){if(jV(t))return O.resolve(null);let r=di(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=gE(t,null,"F"),r=di(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Xe(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Yi(t,a);return this.Zi(t,u,o,l.readTime)?this.zi(e,gE(t,null,"F")):this.Xi(e,u,t,l)}))})))}ji(e,t,r,i){return jV(t)||i.isEqual(xe.min())?O.resolve(null):this.Gi.getDocuments(e,r).next(s=>{const o=this.Yi(t,s);return this.Zi(t,o,r,i)?O.resolve(null):(rh()<=go.in.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hh(t)),this.Xi(e,o,t,oV(i,-1)).next(a=>a))})}Yi(e,t){let r=new Bt(qV(e));return t.forEach((i,s)=>{Om(e,s)&&(r=r.add(s))}),r}Zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,t,r){return rh()<=go.in.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",hh(t)),this.Gi.getDocumentsMatchingQuery(e,t,Bi.min(),r)}Xi(e,t,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class DX{constructor(e,t,r,i){this.persistence=e,this.es=t,this.serializer=i,this.ts=new Yt(He),this.ns=new na(s=>Vc(s),Nm),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iB(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ts))}}function aB(n,e,t,r){return new DX(n,e,t,r)}function lB(n,e){return MD.apply(this,arguments)}function MD(){return MD=(0,Q.Z)(function*(n,e){const t=ue(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.os(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Xe();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(u=>({_s:u,removedBatchIds:o,addedBatchIds:a}))})})}),MD.apply(this,arguments)}function cB(n){const e=ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.qr.getLastRemoteSnapshotVersion(t))}function uB(n,e,t){let r=Xe(),i=Xe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Di();return t.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(xe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||0===l.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):oe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{us:o,cs:i}})}function xX(n,e){const t=ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ih(n,e){const t=ue(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.qr.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):t.qr.allocateTargetId(r).next(o=>(i=new ia(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ts=t.ts.insert(r.targetId,r),t.ns.set(e,r.targetId)),r})}function Ch(n,e,t){return PD.apply(this,arguments)}function PD(){return PD=(0,Q.Z)(function*(n,e,t){const r=ue(n),i=r.ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!tl(o))throw o;oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),PD.apply(this,arguments)}function PE(n,e,t){const r=ue(n);let i=xe.min(),s=Xe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const m=ue(l),g=m.ns.get(h);return void 0!==g?O.resolve(m.ts.get(g)):m.qr.getTargetData(u,h)}(r,o,di(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,t?i:xe.min(),t?s:Xe())).next(a=>(fB(r,zV(e),a),{documents:a,ls:s})))}function dB(n,e){const t=ue(n),r=ue(t.qr),i=t.ts.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function hB(n,e){const t=ue(n),r=t.rs.get(e)||xe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ss.getAllFromCollectionGroup(i,e,oV(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(fB(t,e,i),i))}function fB(n,e,t){let r=n.rs.get(e)||xe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.rs.set(e,r)}function ND(){return ND=(0,Q.Z)(function*(n,e,t,r){const i=ue(n);let s=Xe(),o=Di();for(const u of t){const h=e.hs(u.metadata.name);u.document&&(s=s.add(h));const m=e.Ps(u);m.setReadTime(e.Is(u.metadata.readTime)),o=o.insert(h,m)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),l=yield Ih(i,(h=r,di(uh(wt.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>uB(u,a,o).next(h=>(a.apply(u),h)).next(h=>i.qr.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.qr.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,h.us,h.cs)).next(()=>h.us)))}),ND.apply(this,arguments)}function MX(n,e){return kD.apply(this,arguments)}function kD(){return kD=(0,Q.Z)(function*(n,e,t=Xe()){const r=yield Ih(n,di(yD(e.bundledQuery))),i=ue(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Pn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kr.saveNamedQuery(s,e);const a=r.withResumeToken(rr.EMPTY_BYTE_STRING,o);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(s,a).next(()=>i.qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.Kr.saveNamedQuery(s,e))})}),kD.apply(this,arguments)}function pB(n,e){return`firestore_clients_${n}_${e}`}function mB(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function OD(n,e){return`firestore_targets_${n}_${e}`}class NE{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ts(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new re(i.error.code,i.error.message))),o?new NE(e,t,i.state,s):(Mn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xm{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ts(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new re(r.error.code,r.error.message))),s?new Xm(e,r.state,i):(Mn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=aD();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=dV(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new kE(e,s):(Mn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class FD{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new FD(t.clientId,t.onlineState):(Mn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class LD{constructor(){this.activeTargetIds=aD()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VD{constructor(e,t,r,i,s){this.window=e,this.si=t,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Yt(He),this.started=!1,this.ps=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=pB(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new LD),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Q.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Rs)continue;const s=e.getItem(pB(e.persistenceKey,i));if(s){const o=kE.Ts(i,s);o&&(e.gs=e.gs.insert(o.clientId,o))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,r){this.Ns(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(OD(this.persistenceKey,e));if(r){const i=Xm.Ts(e,r);i&&(t=i.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(OD(this.persistenceKey,e))}updateQueryState(e,t,r){this.ks(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return oe("SharedClientState","READ",e,t),t}setItem(e,t){oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void Mn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,Q.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ss.test(r.key)){if(null==r.newValue){const i=t.Ks(r.key);return t.$s(i,null)}{const i=t.Us(r.key,r.newValue);if(i)return t.$s(i.clientId,i)}}else if(t.bs.test(r.key)){if(null!==r.newValue){const i=t.Ws(r.key,r.newValue);if(i)return t.Gs(i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.zs(r.key,r.newValue);if(i)return t.js(i)}}else if(r.key===t.Cs){if(null!==r.newValue){const i=t.Ms(r.newValue);if(i)return t.xs(i)}}else if(r.key===t.ws){const i=function(o){let a=Ui._e;if(null!=o)try{const l=JSON.parse(o);Ae("number"==typeof l),a=l}catch(l){Mn("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(r.newValue);i!==Ui._e&&t.sequenceNumberHandler(i)}else if(r.key===t.vs){const i=t.Hs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Js(s)))}}else t.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,r){const i=new NE(this.currentUser,e,t,r),s=mB(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Bs(e){const t=mB(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,t,r){const i=OD(this.persistenceKey,e),s=new Xm(e,t,r);this.setItem(i,s.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const r=this.Ks(e);return kE.Ts(r,t)}Ws(e,t){const r=this.bs.exec(e),i=Number(r[1]);return NE.Ts(new pr(void 0!==r[2]?r[2]:null),i,t)}zs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return Xm.Ts(i,t)}Ms(e){return FD.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var t=this;return(0,Q.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Ys(e.batchId,e.state,e.error);oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const r=t?this.gs.insert(e,t):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=aD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class gB{constructor(){this.eo=new LD,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,r){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new LD,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class PX{ro(e){}shutdown(){}}class _B{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let OE=null;function BD(){return null===OE?OE=268435456+Math.round(2147483648*Math.random()):OE++,"0x"+OE.toString(16)}const NX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kX{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Wr="WebChannelConnection";class OX extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+t.host,this.fo=`projects/${i}/databases/${s}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(t,r,i,s,o){const a=BD(),l=this.So(t,r);oe("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(u,s,o),this.Do(t,l,u,i).then(h=>(oe("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Ci("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Co(t,r,i,s,o,a){return this.wo(t,r,i,s,o)}bo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+nh,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}So(t,r){return`${this.mo}/v1/${r}:${NX[t]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,r,i){const s=BD();return new Promise((o,a)=>{const l=new PQ;l.setWithCredentials(!0),l.listenOnce(RQ.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case GT.NO_ERROR:const h=l.getResponseJson();oe(Wr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case GT.TIMEOUT:oe(Wr,`RPC '${e}' ${s} timed out`),a(new re(B.DEADLINE_EXCEEDED,"Request time out"));break;case GT.HTTP_ERROR:const m=l.getStatus();if(oe(Wr,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g?.error;if(y&&y.status&&y.message){const E=function(C){const N=C.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(N)>=0?N:B.UNKNOWN}(y.status);a(new re(E,y.message))}else a(new re(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new re(B.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{oe(Wr,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);oe(Wr,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",u,r,15)})}vo(e,t,r){const i=BD(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=AQ(),a=xQ(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.bo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=s.join("");oe(Wr,`Creating RPC '${e}' stream ${i}: ${h}`,l);const m=o.createWebChannel(h,l);let g=!1,y=!1;const E=new kX({co:C=>{y?oe(Wr,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(g||(oe(Wr,`Opening RPC '${e}' stream ${i} transport.`),m.open(),g=!0),oe(Wr,`RPC '${e}' stream ${i} sending:`,C),m.send(C))},lo:()=>m.close()}),b=(C,N,R)=>{C.listen(N,L=>{try{R(L)}catch(X){setTimeout(()=>{throw X},0)}})};return b(m,sE.EventType.OPEN,()=>{y||oe(Wr,`RPC '${e}' stream ${i} transport opened.`)}),b(m,sE.EventType.CLOSE,()=>{y||(y=!0,oe(Wr,`RPC '${e}' stream ${i} transport closed`),E.Ro())}),b(m,sE.EventType.ERROR,C=>{y||(y=!0,Ci(Wr,`RPC '${e}' stream ${i} transport errored:`,C),E.Ro(new re(B.UNAVAILABLE,"The operation could not be completed")))}),b(m,sE.EventType.MESSAGE,C=>{var N;if(!y){const R=C.data[0];Ae(!!R);const X=R.error||(null===(N=R[0])||void 0===N?void 0:N.error);if(X){oe(Wr,`RPC '${e}' stream ${i} received error:`,X);const le=X.status;let Re=function(mi){const Si=jn[mi];if(void 0!==Si)return u2(Si)}(le),je=X.message;void 0===Re&&(Re=B.INTERNAL,je="Unknown error status: "+le+" with message "+X.message),y=!0,E.Ro(new re(Re,je)),m.close()}else oe(Wr,`RPC '${e}' stream ${i} received:`,R),E.Vo(R)}}),b(a,MQ.STAT_EVENT,C=>{C.stat===eV.PROXY?oe(Wr,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===eV.NOPROXY&&oe(Wr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.Ao()},0),E}}function yB(){return typeof window<"u"?window:null}function FE(){return typeof document<"u"?document:null}function Jm(n){return new qY(n,!0)}class UD{constructor(e,t,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=t,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,t-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class vB{constructor(e,t,r,i,s,o,a,l){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new UD(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,Q.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,Q.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,t){var r=this;return(0,Q.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():t&&t.code===B.RESOURCE_EXHAUSTED?(Mn(t.toString()),Mn("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):t&&t.code===B.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(t)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===t&&this.s_(r,i)},r=>{e(()=>{const i=new re(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,t){const r=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,Q.Z)(function*(){e.state=0,e.start()}))}o_(e){return oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget(()=>this.Uo===e?t():(oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FX extends vB{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function ZY(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:Ee(),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Ae(void 0===h||"string"==typeof h),rr.fromBase64String(h||"")):(Ae(void 0===h||h instanceof Uint8Array),rr.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=void 0===u.code?B.UNKNOWN:u2(u.code);return new re(h,u.message||"")}(o);t=new m2(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Io(n,r.document.name),s=Pn(r.document.updateTime),o=r.document.createTime?Pn(r.document.createTime):xe.min(),a=new Rr({mapValue:{fields:r.document.fields}}),l=cn.newFoundDocument(i,s,o,a);t=new wE(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=Io(n,r.document),s=r.readTime?Pn(r.readTime):xe.min(),o=cn.newNoDocument(i,s);t=new wE([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Io(n,r.document);t=new wE([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ee();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new BY(i,s);t=new p2(r.targetId,o)}}var u;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return xe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?xe.min():o.readTime?Pn(o.readTime):xe.min()}(e);return this.listener.a_(t,r)}u_(e){const t={};t.database=zm(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=pE(l)?{documents:T2(s,l)}:{query:_D(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=v2(s,o.resumeToken);const u=fD(s,o.expectedCount);null!==u&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(xe.min())>0){a.readTime=_h(s,o.snapshotVersion.toTimestamp());const u=fD(s,o.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function QY(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.e_(t)}c_(e){const t={};t.database=zm(this.serializer),t.removeTarget=e,this.e_(t)}}class LX extends vB{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function KY(n,e){return n&&n.length>0?(Ae(void 0!==e),n.map(t=>function(i,s){let o=Pn(i.updateTime?i.updateTime:s);return o.isEqual(xe.min())&&(o=Pn(s)),new OY(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Pn(e.commitTime);return this.listener.I_(r,t)}return Ae(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=zm(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>qm(this.serializer,r))};this.e_(t)}}class VX extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new re(B.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new re(B.UNKNOWN,i.toString())})}Co(e,t,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,t,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re(B.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class UX{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Mn(t),this.f_=!1):oe("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class jX{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{r.enqueueAndForget((0,Q.Z)(function*(){var l;fl(o)&&(oe("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,Q.Z)(function*(h){const m=ue(h);m.C_.add(4),yield Th(m),m.M_.set("Unknown"),m.C_.delete(4),yield eg(m)}),function u(h){return l.apply(this,arguments)})(o))}))}),this.M_=new UX(r,i)}}function eg(n){return $D.apply(this,arguments)}function $D(){return $D=(0,Q.Z)(function*(n){if(fl(n))for(const e of n.v_)yield e(!0)}),$D.apply(this,arguments)}function Th(n){return HD.apply(this,arguments)}function HD(){return HD=(0,Q.Z)(function*(n){for(const e of n.v_)yield e(!1)}),HD.apply(this,arguments)}function LE(n,e){const t=ue(n);t.D_.has(e.targetId)||(t.D_.set(e.targetId,e),GD(t)?qD(t):Sh(t).Ho()&&zD(t,e))}function tg(n,e){const t=ue(n),r=Sh(t);t.D_.delete(e),r.Ho()&&EB(t,e),0===t.D_.size&&(r.Ho()?r.Zo():fl(t)&&t.M_.set("Unknown"))}function zD(n,e){if(n.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sh(n).u_(e)}function EB(n,e){n.x_.Oe(e),Sh(n).c_(e)}function qD(n){n.x_=new jY({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.D_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Sh(n).start(),n.M_.g_()}function GD(n){return fl(n)&&!Sh(n).jo()&&n.D_.size>0}function fl(n){return 0===ue(n).C_.size}function wB(n){n.x_=void 0}function $X(n){return WD.apply(this,arguments)}function WD(){return WD=(0,Q.Z)(function*(n){n.D_.forEach((e,t)=>{zD(n,e)})}),WD.apply(this,arguments)}function HX(n,e){return ZD.apply(this,arguments)}function ZD(){return ZD=(0,Q.Z)(function*(n,e){wB(n),GD(n)?(n.M_.w_(e),qD(n)):n.M_.set("Unknown")}),ZD.apply(this,arguments)}function zX(n,e,t){return KD.apply(this,arguments)}function KD(){return KD=(0,Q.Z)(function*(n,e,t){if(n.M_.set("Online"),e instanceof m2&&2===e.state&&e.cause)try{yield(r=(0,Q.Z)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.D_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.D_.delete(l),s.x_.removeTarget(l))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield VE(n,r)}else if(e instanceof wE?n.x_.$e(e):e instanceof p2?n.x_.Je(e):n.x_.Ge(e),!t.isEqual(xe.min()))try{const r=yield cB(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.D_.get(u);h&&s.D_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.D_.get(l);if(!h)return;s.D_.set(l,h.withResumeToken(rr.EMPTY_BYTE_STRING,h.snapshotVersion)),EB(s,l);const m=new ia(h.target,l,u,h.sequenceNumber);zD(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){oe("RemoteStore","Failed to raise snapshot:",r),yield VE(n,r)}var r}),KD.apply(this,arguments)}function VE(n,e,t){return QD.apply(this,arguments)}function QD(){return QD=(0,Q.Z)(function*(n,e,t){if(!tl(e))throw e;n.C_.add(1),yield Th(n),n.M_.set("Offline"),t||(t=()=>cB(n.localStore)),n.asyncQueue.enqueueRetryable((0,Q.Z)(function*(){oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.C_.delete(1),yield eg(n)}))}),QD.apply(this,arguments)}function bB(n,e){return e().catch(t=>VE(n,t,e))}function Dh(n){return YD.apply(this,arguments)}function YD(){return YD=(0,Q.Z)(function*(n){const e=ue(n),t=pl(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;qX(e);)try{const i=yield xX(e.localStore,r);if(null===i){0===e.b_.length&&t.Zo();break}r=i.batchId,GX(e,i)}catch(i){yield VE(e,i)}IB(e)&&CB(e)}),YD.apply(this,arguments)}function qX(n){return fl(n)&&n.b_.length<10}function GX(n,e){n.b_.push(e);const t=pl(n);t.Ho()&&t.h_&&t.P_(e.mutations)}function IB(n){return fl(n)&&!pl(n).jo()&&n.b_.length>0}function CB(n){pl(n).start()}function WX(n){return XD.apply(this,arguments)}function XD(){return XD=(0,Q.Z)(function*(n){pl(n).E_()}),XD.apply(this,arguments)}function ZX(n){return JD.apply(this,arguments)}function JD(){return JD=(0,Q.Z)(function*(n){const e=pl(n);for(const t of n.b_)e.P_(t.mutations)}),JD.apply(this,arguments)}function KX(n,e,t){return eS.apply(this,arguments)}function eS(){return eS=(0,Q.Z)(function*(n,e,t){const r=n.b_.shift(),i=uD.from(r,e,t);yield bB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Dh(n)}),eS.apply(this,arguments)}function QX(n,e){return tS.apply(this,arguments)}function tS(){return tS=(0,Q.Z)(function*(n,e){var t;e&&pl(n).h_&&(yield(t=(0,Q.Z)(function*(i,s){if(c2(a=s.code)&&a!==B.ABORTED){const o=i.b_.shift();pl(i).Yo(),yield bB(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Dh(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),IB(n)&&CB(n)}),tS.apply(this,arguments)}function TB(n,e){return nS.apply(this,arguments)}function nS(){return nS=(0,Q.Z)(function*(n,e){const t=ue(n);t.asyncQueue.verifyOperationInProgress(),oe("RemoteStore","RemoteStore received new credentials");const r=fl(t);t.C_.add(3),yield Th(t),r&&t.M_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.C_.delete(3),yield eg(t)}),nS.apply(this,arguments)}function rS(n,e){return iS.apply(this,arguments)}function iS(){return iS=(0,Q.Z)(function*(n,e){const t=ue(n);e?(t.C_.delete(2),yield eg(t)):e||(t.C_.add(2),yield Th(t),t.M_.set("Unknown"))}),iS.apply(this,arguments)}function Sh(n){return n.O_||(n.O_=function(t,r,i){const s=ue(t);return s.A_(),new FX(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{ho:$X.bind(null,n),Io:HX.bind(null,n),a_:zX.bind(null,n)}),n.v_.push(function(){var e=(0,Q.Z)(function*(t){t?(n.O_.Yo(),GD(n)?qD(n):n.M_.set("Unknown")):(yield n.O_.stop(),wB(n))});return function(t){return e.apply(this,arguments)}}())),n.O_}function pl(n){return n.N_||(n.N_=function(t,r,i){const s=ue(t);return s.A_(),new LX(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{ho:WX.bind(null,n),Io:QX.bind(null,n),T_:ZX.bind(null,n),I_:KX.bind(null,n)}),n.v_.push(function(){var e=(0,Q.Z)(function*(t){t?(n.N_.Yo(),yield Dh(n)):(yield n.N_.stop(),n.b_.length>0&&(oe("RemoteStore",`Stopping write stream with ${n.b_.length} pending writes`),n.b_=[]))});return function(t){return e.apply(this,arguments)}}())),n.N_}class sS{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new sS(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new re(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ah(n,e){if(Mn("AsyncQueue",`${e}: ${n}`),tl(n))return new re(B.UNAVAILABLE,`${e}: ${n}`);throw n}class xh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=Fm(),this.sortedSet=new Yt(this.comparator)}static emptySet(e){return new xh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new xh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class DB{constructor(){this.B_=new Yt(he.comparator)}track(e){const t=e.doc.key,r=this.B_.get(t);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(t):1===e.type&&2===r.type?this.B_=this.B_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Ee():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Rh{constructor(e,t,r,i,s,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Rh(e,t,xh.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&km(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class YX{constructor(){this.k_=void 0,this.listeners=[]}}class XX{constructor(){this.queries=new na(e=>HV(e),km),this.onlineState="Unknown",this.q_=new Set}}function oS(n,e){return aS.apply(this,arguments)}function aS(){return aS=(0,Q.Z)(function*(n,e){const t=ue(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new YX),i)try{s.k_=yield t.onListen(r)}catch(o){const a=Ah(o,`Initialization of query '${hh(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.listeners.push(e),e.Q_(t.onlineState),s.k_&&e.K_(s.k_)&&uS(t)}),aS.apply(this,arguments)}function lS(n,e){return cS.apply(this,arguments)}function cS(){return cS=(0,Q.Z)(function*(n,e){const t=ue(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),cS.apply(this,arguments)}function JX(n,e){const t=ue(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&uS(t)}function eJ(n,e,t){const r=ue(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function uS(n){n.q_.forEach(e=>{e.next()})}class dS{constructor(e,t,r){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Rh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){return!e.fromCache||(!this.options.J_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=Rh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class tJ{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class SB{constructor(e){this.serializer=e}hs(e){return Io(this.serializer,e)}Ps(e){return e.metadata.exists?C2(this.serializer,e.document,!1):cn.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Pn(e)}}class nJ{constructor(e,t,r){this.X_=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=AB(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const r=wt.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,r=new SB(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.hs(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||Xe()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,Q.Z)(function*(){const t=yield function RX(n,e,t,r){return ND.apply(this,arguments)}(e.localStore,new SB(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield MX(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:t}})()}}function AB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class xB{constructor(e){this.key=e}}class RB{constructor(e){this.key=e}}class MB{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Xe(),this.mutatedKeys=Xe(),this._a=qV(e),this.aa=new xh(this._a)}get ua(){return this.ia}ca(e,t){const r=t?t.la:new DB,i=t?t.aa:this.aa;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const g=i.get(h),y=Om(this.query,m)?m:null,E=!!g&&this.mutatedKeys.has(g.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let C=!1;g&&y?g.data.isEqual(y.data)?E!==b&&(r.track({type:3,doc:y}),C=!0):this.ha(g,y)||(r.track({type:2,doc:y}),C=!0,(l&&this._a(y,l)>0||u&&this._a(y,u)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),C=!0):g&&!y&&(r.track({type:1,doc:g}),C=!0,(l||u)&&(a=!0)),C&&(y?(o=o.add(y),s=b?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort((h,m)=>function(y,E){const b=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return b(y)-b(E)}(h.type,m.type)||this._a(h.doc,m.doc)),this.Pa(r),i=null!=i&&i;const a=t&&!i?this.Ia():[],l=0===this.oa.size&&this.current&&!i?1:0,u=l!==this.sa;return this.sa=l,0!==o.length||u?{snapshot:new Rh(this.query,e.aa,s,o,e.mutatedKeys,0===l,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new DB,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(t=>this.ia=this.ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.ia=this.ia.delete(t)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Xe(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const t=[];return e.forEach(r=>{this.oa.has(r)||t.push(new RB(r))}),this.oa.forEach(r=>{e.has(r)||t.push(new xB(r))}),t}da(e){this.ia=e.ls,this.oa=Xe();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return Rh.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class rJ{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class iJ{constructor(e){this.key=e,this.Ra=!1}}class sJ{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new na(a=>HV(a),km),this.fa=new Map,this.ga=new Set,this.pa=new Yt(he.comparator),this.ya=new Map,this.wa=new TD,this.Sa={},this.ba=new Map,this.Da=Gc.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function oJ(n,e){return hS.apply(this,arguments)}function hS(){return hS=(0,Q.Z)(function*(n,e){const t=OS(n);let r,i;const s=t.ma.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=yield Ih(t.localStore,di(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield fS(t,e,r,"current"===a,o.resumeToken),t.isPrimaryClient&&LE(t.remoteStore,o)}return i}),hS.apply(this,arguments)}function fS(n,e,t,r,i){return pS.apply(this,arguments)}function pS(){return pS=(0,Q.Z)(function*(n,e,t,r,i){n.va=(m,g,y)=>{return(E=(0,Q.Z)(function*(C,N,R,L){let X=N.view.ca(R);X.Zi&&(X=yield PE(C.localStore,N.query,!1).then(({documents:Ot})=>N.view.ca(Ot,X)));const le=L&&L.targetChanges.get(N.targetId),Re=L&&null!=L.targetMismatches.get(N.targetId),je=N.view.applyChanges(X,C.isPrimaryClient,le,Re);return CS(C,N.targetId,je.Ta),je.snapshot}),function b(C,N,R,L){return E.apply(this,arguments)})(n,m,g,y);var E};const s=yield PE(n.localStore,e,!0),o=new MB(e,s.ls),a=o.ca(s.documents),l=$m.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),u=o.applyChanges(a,n.isPrimaryClient,l);CS(n,t,u.Ta);const h=new rJ(e,t,o);return n.ma.set(e,h),n.fa.has(t)?n.fa.get(t).push(e):n.fa.set(t,[e]),u.snapshot}),pS.apply(this,arguments)}function aJ(n,e){return mS.apply(this,arguments)}function mS(){return mS=(0,Q.Z)(function*(n,e){const t=ue(n),r=t.ma.get(e),i=t.fa.get(r.targetId);if(i.length>1)return t.fa.set(r.targetId,i.filter(s=>!km(s,e))),void t.ma.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ch(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),tg(t.remoteStore,r.targetId),Mh(t,r.targetId)}).catch(el))):(Mh(t,r.targetId),yield Ch(t.localStore,r.targetId,!0))}),mS.apply(this,arguments)}function gS(){return gS=(0,Q.Z)(function*(n,e,t){const r=FS(n);try{const i=yield function(o,a){const l=ue(o),u=gn.now(),h=a.reduce((y,E)=>y.add(E.key),Xe());let m,g;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=Di(),b=Xe();return l.ss.getEntries(y,h).next(C=>{E=C,E.forEach((N,R)=>{R.isValidDocument()||(b=b.add(N))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,E)).next(C=>{m=C;const N=[];for(const R of a){const L=LY(R,m.get(R.key).overlayedDocument);null!=L&&N.push(new ra(R.key,L,AV(L.value.mapValue),_n.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,N,a)}).next(C=>{g=C;const N=C.applyToLocalDocumentSet(m,b);return l.documentOverlayCache.saveOverlays(y,C.batchId,N)})}).then(()=>({batchId:g.batchId,changes:WV(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Sa[o.currentUser.toKey()];u||(u=new Yt(He)),u=u.insert(a,l),o.Sa[o.currentUser.toKey()]=u}(r,i.batchId,t),yield sa(r,i.changes),yield Dh(r.remoteStore)}catch(i){const s=Ah(i,"Failed to persist write");t.reject(s)}}),gS.apply(this,arguments)}function PB(n,e){return _S.apply(this,arguments)}function _S(){return _S=(0,Q.Z)(function*(n,e){const t=ue(n);try{const r=yield function AX(n,e){const t=ue(n),r=e.snapshotVersion;let i=t.ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.ss.newChangeBuffer({trackRemovals:!0});i=t.ts;const a=[];e.targetChanges.forEach((h,m)=>{const g=i.get(m);if(!g)return;a.push(t.qr.removeMatchingKeys(s,h.removedDocuments,m).next(()=>t.qr.addMatchingKeys(s,h.addedDocuments,m)));let y=g.withSequenceNumber(s.currentSequenceNumber);var b,C,N;null!==e.targetMismatches.get(m)?y=y.withResumeToken(rr.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(m,y),C=y,N=h,(0===(b=g).resumeToken.approximateByteSize()||C.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8||N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0)&&a.push(t.qr.updateTargetData(s,y))});let l=Di(),u=Xe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(uB(s,o,e.documentUpdates).next(h=>{l=h.us,u=h.cs})),!r.isEqual(xe.min())){const h=t.qr.getLastRemoteSnapshotVersion(s).next(m=>t.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.ts=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.ya.get(s);o&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?Ae(o.Ra):i.removedDocuments.size>0&&(Ae(o.Ra),o.Ra=!1))}),yield sa(t,r,e)}catch(r){yield el(r)}}),_S.apply(this,arguments)}function NB(n,e,t){const r=ue(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ue(o);l.onlineState=a;let u=!1;l.queries.forEach((h,m)=>{for(const g of m.listeners)g.Q_(a)&&(u=!0)}),u&&uS(l)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function cJ(n,e,t){return yS.apply(this,arguments)}function yS(){return yS=(0,Q.Z)(function*(n,e,t){const r=ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ya.get(e),s=i&&i.key;if(s){let o=new Yt(he.comparator);o=o.insert(s,cn.newNoDocument(s,xe.min()));const a=Xe().add(s),l=new jm(xe.min(),new Map,new Yt(He),o,a);yield PB(r,l),r.pa=r.pa.remove(s),r.ya.delete(e),TS(r)}else yield Ch(r.localStore,e,!1).then(()=>Mh(r,e,t)).catch(el)}),yS.apply(this,arguments)}function uJ(n,e){return vS.apply(this,arguments)}function vS(){return vS=(0,Q.Z)(function*(n,e){const t=ue(n),r=e.batch.batchId;try{const i=yield function SX(n,e){const t=ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const m=u.batch,g=m.keys();let y=O.resolve();return g.forEach(E=>{y=y.next(()=>h.getEntry(l,E)).next(b=>{const C=u.docVersions.get(E);Ae(null!==C),b.version.compareTo(C)<0&&(m.applyToRemoteDocument(b,u),b.isValidDocument()&&(b.setReadTime(u.commitVersion),h.addEntry(b)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Xe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);IS(t,r,null),bS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield sa(t,i)}catch(i){yield el(i)}}),vS.apply(this,arguments)}function dJ(n,e,t){return ES.apply(this,arguments)}function ES(){return ES=(0,Q.Z)(function*(n,e,t){const r=ue(n);try{const i=yield function(o,a){const l=ue(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(m=>(Ae(null!==m),h=m.keys(),l.mutationQueue.removeMutationBatch(u,m))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);IS(r,e,t),bS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield sa(r,i)}catch(i){yield el(i)}}),ES.apply(this,arguments)}function wS(){return wS=(0,Q.Z)(function*(n,e){const t=ue(n);fl(t.remoteStore)||oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=ue(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ba.get(r)||[];i.push(e),t.ba.set(r,i)}catch(r){const i=Ah(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),wS.apply(this,arguments)}function bS(n,e){(n.ba.get(e)||[]).forEach(t=>{t.resolve()}),n.ba.delete(e)}function IS(n,e,t){const r=ue(n);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function Mh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.fa.get(e))n.ma.delete(r),t&&n.Va.Fa(r,t);n.fa.delete(e),n.isPrimaryClient&&n.wa.Rr(e).forEach(r=>{n.wa.containsKey(r)||kB(n,r)})}function kB(n,e){n.ga.delete(e.path.canonicalString());const t=n.pa.get(e);null!==t&&(tg(n.remoteStore,t),n.pa=n.pa.remove(e),n.ya.delete(t),TS(n))}function CS(n,e,t){for(const r of t)r instanceof xB?(n.wa.addReference(r.key,e),fJ(n,r)):r instanceof RB?(oe("SyncEngine","Document no longer in limbo: "+r.key),n.wa.removeReference(r.key,e),n.wa.containsKey(r.key)||kB(n,r.key)):Ee()}function fJ(n,e){const t=e.key,r=t.path.canonicalString();n.pa.get(t)||n.ga.has(r)||(oe("SyncEngine","New document in limbo: "+t),n.ga.add(r),TS(n))}function TS(n){for(;n.ga.size>0&&n.pa.size<n.maxConcurrentLimboResolutions;){const e=n.ga.values().next().value;n.ga.delete(e);const t=new he(wt.fromString(e)),r=n.Da.next();n.ya.set(r,new iJ(t)),n.pa=n.pa.insert(t,r),LE(n.remoteStore,new ia(di(uh(t.path)),r,"TargetPurposeLimboResolution",Ui._e))}}function sa(n,e,t){return DS.apply(this,arguments)}function DS(){return DS=(0,Q.Z)(function*(n,e,t){const r=ue(n),i=[],s=[],o=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,l)=>{o.push(r.va(l,e,t).then(u=>{if((u||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);const h=RD.Qi(l.targetId,u);s.push(h)}}))}),yield Promise.all(o),r.Va.a_(i),yield(a=(0,Q.Z)(function*(u,h){const m=ue(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>O.forEach(h,y=>O.forEach(y.ki,E=>m.persistence.referenceDelegate.addReference(g,y.targetId,E)).next(()=>O.forEach(y.qi,E=>m.persistence.referenceDelegate.removeReference(g,y.targetId,E)))))}catch(g){if(!tl(g))throw g;oe("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const y=g.targetId;if(!g.fromCache){const E=m.ts.get(y),C=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);m.ts=m.ts.insert(y,C)}}}),function l(u,h){return a.apply(this,arguments)})(r.localStore,s))}),DS.apply(this,arguments)}function pJ(n,e){return SS.apply(this,arguments)}function SS(){return SS=(0,Q.Z)(function*(n,e){const t=ue(n);if(!t.currentUser.isEqual(e)){oe("SyncEngine","User change. New user:",e.toKey());const r=yield lB(t.localStore,e);t.currentUser=e,(s=t).ba.forEach(a=>{a.forEach(l=>{l.reject(new re(B.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ba.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield sa(t,r._s)}var s}),SS.apply(this,arguments)}function mJ(n,e){const t=ue(n),r=t.ya.get(e);if(r&&r.Ra)return Xe().add(r.key);{let i=Xe();const s=t.fa.get(e);if(!s)return i;for(const o of s){const a=t.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function gJ(n,e){return AS.apply(this,arguments)}function AS(){return AS=(0,Q.Z)(function*(n,e){const t=ue(n),r=yield PE(t.localStore,e.query,!0),i=e.view.da(r);return t.isPrimaryClient&&CS(t,e.targetId,i.Ta),i}),AS.apply(this,arguments)}function _J(n,e){return xS.apply(this,arguments)}function xS(){return xS=(0,Q.Z)(function*(n,e){const t=ue(n);return hB(t.localStore,e).then(r=>sa(t,r))}),xS.apply(this,arguments)}function yJ(n,e,t,r){return RS.apply(this,arguments)}function RS(){return RS=(0,Q.Z)(function*(n,e,t,r){const i=ue(n),s=yield function(a,l){const u=ue(a),h=ue(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",m=>h.Cn(m,l).next(g=>g?u.localDocuments.getDocuments(m,g):O.resolve(null)))}(i.localStore,e);var l;null!==s?("pending"===t?yield Dh(i.remoteStore):"acknowledged"===t||"rejected"===t?(IS(i,e,r||null),bS(i,e),l=e,ue(ue(i.localStore).mutationQueue).Fn(l)):Ee(),yield sa(i,s)):oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),RS.apply(this,arguments)}function MS(){return MS=(0,Q.Z)(function*(n,e){const t=ue(n);if(OS(t),FS(t),!0===e&&!0!==t.Ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield OB(t,r.toArray());t.Ca=!0,yield rS(t.remoteStore,!0);for(const s of i)LE(t.remoteStore,s)}else if(!1===e&&!1!==t.Ca){const r=[];let i=Promise.resolve();t.fa.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Mh(t,o),Ch(t.localStore,o,!0))),tg(t.remoteStore,o)}),yield i,yield OB(t,r),function(o){const a=ue(o);a.ya.forEach((l,u)=>{tg(a.remoteStore,u)}),a.wa.Vr(),a.ya=new Map,a.pa=new Yt(he.comparator)}(t),t.Ca=!1,yield rS(t.remoteStore,!1)}}),MS.apply(this,arguments)}function OB(n,e,t){return PS.apply(this,arguments)}function PS(){return PS=(0,Q.Z)(function*(n,e,t){const r=ue(n),i=[],s=[];for(const o of e){let a;const l=r.fa.get(o);if(l&&0!==l.length){a=yield Ih(r.localStore,di(l[0]));for(const u of l){const h=r.ma.get(u),m=yield gJ(r,h);m.snapshot&&s.push(m.snapshot)}}else{const u=yield dB(r.localStore,o);a=yield Ih(r.localStore,u),yield fS(r,FB(u),o,!1,a.resumeToken)}i.push(a)}return r.Va.a_(s),i}),PS.apply(this,arguments)}function FB(n){return UV(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function EJ(n){return t=ue(n).localStore,ue(ue(t).persistence).Bi();var t}function wJ(n,e,t,r){return NS.apply(this,arguments)}function NS(){return NS=(0,Q.Z)(function*(n,e,t,r){const i=ue(n);if(i.Ca)return void oe("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield hB(i.localStore,zV(s[0])),a=jm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,rr.EMPTY_BYTE_STRING);yield sa(i,o,a);break}case"rejected":yield Ch(i.localStore,e,!0),Mh(i,e,r);break;default:Ee()}}),NS.apply(this,arguments)}function bJ(n,e,t){return kS.apply(this,arguments)}function kS(){return kS=(0,Q.Z)(function*(n,e,t){const r=OS(n);if(r.Ca){for(const i of e){if(r.fa.has(i)){oe("SyncEngine","Adding an already active target "+i);continue}const s=yield dB(r.localStore,i),o=yield Ih(r.localStore,s);yield fS(r,FB(s),o.targetId,!1,o.resumeToken),LE(r.remoteStore,o)}for(const i of t)r.fa.has(i)&&(yield Ch(r.localStore,i,!1).then(()=>{tg(r.remoteStore,i),Mh(r,i)}).catch(el))}}),kS.apply(this,arguments)}function OS(n){const e=ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=PB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mJ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cJ.bind(null,e),e.Va.a_=JX.bind(null,e.eventManager),e.Va.Fa=eJ.bind(null,e.eventManager),e}function FS(n){const e=ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dJ.bind(null,e),e}class ng{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Q.Z)(function*(){t.serializer=Jm(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return aB(this.persistence,new oB,e.initialUser,this.serializer)}createPersistence(e){return new DD(xE.jr,this.serializer)}createSharedClientState(e){return new gB}terminate(){var e=this;return(0,Q.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class LS extends ng{constructor(e,t,r){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Q.Z)(function*(){yield t().call(r,e),yield r.xa.initialize(r,e),yield FS(r.xa.syncEngine),yield Dh(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return aB(this.persistence,new oB,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Y2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new KQ(t,this.persistence);return new ZQ(e.asyncQueue,r)}createPersistence(e){const t=xD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Gr.withCacheSize(this.cacheSizeBytes):Gr.DEFAULT;return new AD(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,yB(),FE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new gB}}class LB extends LS{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Q.Z)(function*(){yield t().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof VD&&(r.sharedClientState.syncEngine={Ys:yJ.bind(null,i),Zs:wJ.bind(null,i),Xs:bJ.bind(null,i),Bi:EJ.bind(null,i),Js:_J.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var s=(0,Q.Z)(function*(o){yield function vJ(n,e){return MS.apply(this,arguments)}(r.xa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=yB();if(!VD.D(t))throw new re(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=xD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new VD(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ph{initialize(e,t){var r=this;return(0,Q.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>NB(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=pJ.bind(null,r.syncEngine),yield rS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new XX}createDatastore(e){const t=Jm(e.databaseInfo.databaseId),r=new OX(e.databaseInfo);return new VX(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>NB(this.syncEngine,t,0),a=_B.D()?new _B:new PX,new jX(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,l,u,h){const m=new sJ(i,s,o,a,l,u);return h&&(m.Ca=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Q.Z)(function*(r){const i=ue(r);oe("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield Th(i),i.F_.shutdown(),i.M_.set("Unknown")}),function t(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function VB(n,e=10240){let t=0;return{read:()=>(0,Q.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Q.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class BE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Mn("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class TJ{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new nr,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,Q.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,Q.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,Q.Z)(function*(){const t=yield e.qa();if(null===t)return null;const r=e.La.decode(t),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const s=yield e.Ka(i);return new tJ(JSON.parse(s),t.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,Q.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const t=e.$a();t<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ka(e){var t=this;return(0,Q.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ua())&&t.Qa("Reached the end of bundle when more is expected.");const r=t.La.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,Q.Z)(function*(){const t=yield e.Ba.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class DJ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Q.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new re(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Q.Z)(function*(o,a){const l=ue(o),u=zm(l.serializer)+"/documents",h={documents:a.map(E=>Hm(l.serializer,E))},m=yield l.Co("BatchGetDocuments",u,h,a.length),g=new Map;m.forEach(E=>{const b=function WY(n,e){return"found"in e?function(r,i){Ae(!!i.found);const s=Io(r,i.found.name),o=Pn(i.found.updateTime),a=i.found.createTime?Pn(i.found.createTime):xe.min(),l=new Rr({mapValue:{fields:i.found.fields}});return cn.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){Ae(!!i.missing),Ae(!!i.readTime);const s=Io(r,i.missing),o=Pn(i.readTime);return cn.newNoDocument(s,o)}(n,e):Ee()}(l.serializer,E);g.set(b.key.toString(),b)});const y=[];return a.forEach(E=>{const b=g.get(E.toString());Ae(!!b),y.push(b)}),y}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new gh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Q.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=he.fromPath(i);e.mutations.push(new lD(s,e.precondition(s)))}),yield(r=(0,Q.Z)(function*(s,o){const a=ue(s),l=zm(a.serializer)+"/documents",u={writes:o.map(h=>qm(a.serializer,h))};yield a.wo("Commit",l,u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ee();t=xe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new re(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(xe.min())?_n.exists(!1):_n.updateTime(t):_n.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xe.min()))throw new re(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _n.updateTime(t)}return _n.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class SJ{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Wa=r.maxAttempts,this.zo=new UD(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,Q.Z)(function*(){const t=new DJ(e.datastore),r=e.za(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.ja(s)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const t=this.updateFunction(e);return!Dm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!c2(t)}return!1}}class AJ{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=pr.UNAUTHENTICATED,this.clientId=iV.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,Q.Z)(function*(a){oe("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(oe("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,Q.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new re(B.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Q.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Ah(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function UE(n,e){return VS.apply(this,arguments)}function VS(){return VS=(0,Q.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Q.Z)(function*(s){r.isEqual(s)||(yield lB(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),VS.apply(this,arguments)}function BS(n,e){return US.apply(this,arguments)}function US(){return US=(0,Q.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield jS(n);oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>TB(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>TB(e.remoteStore,s)),n._onlineComponents=e}),US.apply(this,arguments)}function BB(n){return"FirebaseError"===n.name?n.code===B.FAILED_PRECONDITION||n.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function jS(n){return $S.apply(this,arguments)}function $S(){return $S=(0,Q.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){oe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield UE(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!BB(t))throw t;Ci("Error using user provided cache. Falling back to memory cache: "+t),yield UE(n,new ng)}}else oe("FirestoreClient","Using default OfflineComponentProvider"),yield UE(n,new ng);return n._offlineComponents}),$S.apply(this,arguments)}function jE(n){return HS.apply(this,arguments)}function HS(){return HS=(0,Q.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(oe("FirestoreClient","Using user provided OnlineComponentProvider"),yield BS(n,n._uninitializedComponentsProvider._online)):(oe("FirestoreClient","Using default OnlineComponentProvider"),yield BS(n,new Ph))),n._onlineComponents}),HS.apply(this,arguments)}function UB(n){return jS(n).then(e=>e.persistence)}function Nh(n){return jS(n).then(e=>e.localStore)}function jB(n){return jE(n).then(e=>e.remoteStore)}function zS(n){return jE(n).then(e=>e.syncEngine)}function kh(n){return qS.apply(this,arguments)}function qS(){return qS=(0,Q.Z)(function*(n){const e=yield jE(n),t=e.eventManager;return t.onListen=oJ.bind(null,e.syncEngine),t.onUnlisten=aJ.bind(null,e.syncEngine),t}),qS.apply(this,arguments)}function HB(n,e,t={}){const r=new nr;return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function(s,o,a,l,u){const h=new BE({next:g=>{o.enqueueAndForget(()=>lS(s,m));const y=g.docs.has(a);!y&&g.fromCache?u.reject(new re(B.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&l&&"server"===l.source?u.reject(new re(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),m=new dS(uh(a.path),h,{includeMetadataChanges:!0,J_:!0});return oS(s,m)}(yield kh(n),n.asyncQueue,e,t,r)})),r.promise}function zB(n,e,t={}){const r=new nr;return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function(s,o,a,l,u){const h=new BE({next:g=>{o.enqueueAndForget(()=>lS(s,m)),g.fromCache&&"server"===l.source?u.reject(new re(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),m=new dS(a,h,{includeMetadataChanges:!0,J_:!0});return oS(s,m)}(yield kh(n),n.asyncQueue,e,t,r)})),r.promise}function qB(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const GB=new Map;function GS(n,e,t){if(!t)throw new re(B.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function WB(n,e,t,r){if(!0===e&&!0===r)throw new re(B.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ZB(n){if(!he.isDocumentKey(n))throw new re(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function KB(n){if(he.isDocumentKey(n))throw new re(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function $E(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ee()}function ft(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new re(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$E(n);throw new re(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function QB(n,e){if(e<=0)throw new re(B.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class YB{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new re(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new re(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=qB(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new re(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rg{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new re(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new re(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YB(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new FQ;switch(r.type){case"firstParty":return new UQ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=GB.get(t);r&&(oe("ComponentProvider","Removing Datastore"),GB.delete(t),r.terminate())}(this),Promise.resolve()}}class Mr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mr(this.firestore,e,this._query)}}class un{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Co(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new un(this.firestore,e,this._key)}}class Co extends Mr{constructor(e,t,r){super(e,t,uh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new un(this.firestore,null,new he(e))}withConverter(e){return new Co(this.firestore,e,this._path)}}function JB(n,e,...t){if(n=(0,qt.m9)(n),GS("collection","path",e),n instanceof rg){const r=wt.fromString(e,...t);return KB(r),new Co(n,null,r)}{if(!(n instanceof un||n instanceof Co))throw new re(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wt.fromString(e,...t));return KB(r),new Co(n.firestore,null,r)}}function HE(n,e,...t){if(n=(0,qt.m9)(n),1===arguments.length&&(e=iV.newId()),GS("doc","path",e),n instanceof rg){const r=wt.fromString(e,...t);return ZB(r),new un(n,null,new he(r))}{if(!(n instanceof un||n instanceof Co))throw new re(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wt.fromString(e,...t));return ZB(r),new un(n.firestore,n instanceof Co?n.converter:null,new he(r))}}function eU(n,e){return n=(0,qt.m9)(n),e=(0,qt.m9)(e),(n instanceof un||n instanceof Co)&&(e instanceof un||e instanceof Co)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function WS(n,e){return n=(0,qt.m9)(n),e=(0,qt.m9)(e),n instanceof Mr&&e instanceof Mr&&n.firestore===e.firestore&&km(n._query,e._query)&&n.converter===e.converter}class UJ{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new UD(this,"async_queue_retry"),this.iu=()=>{const t=FE();t&&oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};const e=FE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=FE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const t=new nr;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,Q.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(t){if(!tl(t))throw t;oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const t=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,Mn("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=t,t}enqueueAfterDelay(e,t,r){this.su(),this.ru.indexOf(e)>-1&&(t=0);const i=sS.createAndSchedule(this,e,t,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&Ee()}verifyOperationInProgress(){}uu(){var e=this;return(0,Q.Z)(function*(){let t;do{t=e.Ja,yield t}while(t!==e.Ja)})()}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function ZS(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class jJ{constructor(){this._progressObserver={},this._taskCompletionResolver=new nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Xt extends rg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new UJ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||tU(this),this._firestoreClient.terminate()}}function Dn(n){return n._firestoreClient||tU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function tU(n){var e,t,r;const i=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new gY(n._databaseId,l,n._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,qB(h.experimentalLongPollingOptions),h.useFetchStreams));var l,h;n._firestoreClient=new AJ(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function nU(n,e,t){const r=new nr;return n.asyncQueue.enqueue((0,Q.Z)(function*(){try{yield UE(n,t),yield BS(n,e),r.resolve()}catch(i){const s=i;if(!BB(s))throw s;Ci("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function rU(n){if(n._initialized||n._terminated)throw new re(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class To{constructor(e){this._byteString=e}static fromBase64String(e){try{return new To(rr.fromBase64String(e))}catch(t){throw new re(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new To(rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class oa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new re(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zc{constructor(e){this._methodName=e}}class zE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new re(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}const XJ=/^__.*__$/;class JJ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ra(e,this.data,this.fieldMask,t,this.fieldTransforms):new mh(e,this.data,t,this.fieldTransforms)}}class iU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ra(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class qE{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new qE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return ZE(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(sU(this.Iu)&&XJ.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class eee{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Jm(e)}pu(e,t,r,i=!1){return new qE({Iu:e,methodName:t,gu:r,path:ln.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kc(n){const e=n._freezeSettings(),t=Jm(n._databaseId);return new eee(n._databaseId,!!e.ignoreUndefinedProperties,t)}function GE(n,e,t,r,i,s={}){const o=n.pu(s.merge||s.mergeFields?2:0,e,t,i);XS("Data must be an object, but it was:",o,r);const a=lU(r,o);let l,u;if(s.merge)l=new Ti(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const m of s.mergeFields){const g=og(e,m,t);if(!o.contains(g))throw new re(B.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);uU(h,g)||h.push(g)}l=new Ti(h),u=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,u=o.fieldTransforms;return new JJ(new Rr(a),l,u)}class sg extends Zc{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sg}}function oU(n,e,t){return new qE({Iu:3,gu:e.settings.gu,methodName:n._methodName,du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class KS extends Zc{_toFieldTransform(e){return new Vm(e.path,new fh)}isEqual(e){return e instanceof KS}}class tee extends Zc{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=oU(this,e,!0),r=this.yu.map(s=>Qc(s,t)),i=new Bc(r);return new Vm(e.path,i)}isEqual(e){return this===e}}class nee extends Zc{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=oU(this,e,!0),r=this.yu.map(s=>Qc(s,t)),i=new Uc(r);return new Vm(e.path,i)}isEqual(e){return this===e}}class ree extends Zc{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new ph(e.serializer,YV(e.serializer,this.wu));return new Vm(e.path,t)}isEqual(e){return this===e}}function QS(n,e,t,r){const i=n.pu(1,e,t);XS("Data must be an object, but it was:",i,r);const s=[],o=Rr.empty();nl(r,(l,u)=>{const h=WE(e,l,t);u=(0,qt.m9)(u);const m=i.Ru(h);if(u instanceof sg)s.push(h);else{const g=Qc(u,m);null!=g&&(s.push(h),o.set(h,g))}});const a=new Ti(s);return new iU(o,a,i.fieldTransforms)}function YS(n,e,t,r,i,s){const o=n.pu(1,e,t),a=[og(e,r,t)],l=[i];if(s.length%2!=0)throw new re(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(og(e,s[g])),l.push(s[g+1]);const u=[],h=Rr.empty();for(let g=a.length-1;g>=0;--g)if(!uU(u,a[g])){const y=a[g];let E=l[g];E=(0,qt.m9)(E);const b=o.Ru(y);if(E instanceof sg)u.push(y);else{const C=Qc(E,b);null!=C&&(u.push(y),h.set(y,C))}}const m=new Ti(u);return new iU(h,m,o.fieldTransforms)}function aU(n,e,t,r=!1){return Qc(t,n.pu(r?4:3,e))}function Qc(n,e){if(cU(n=(0,qt.m9)(n)))return XS("Unsupported field value:",e,n),lU(n,e);if(n instanceof Zc)return function(r,i){if(!sU(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Qc(a,i.Vu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,qt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return YV(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=gn.fromDate(r);return{timestampValue:_h(i.serializer,s)}}if(r instanceof gn){const s=new gn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_h(i.serializer,s)}}if(r instanceof zE)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof To)return{bytesValue:v2(i.serializer,r._byteString)};if(r instanceof un){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:pD(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${$E(r)}`)}(n,e)}function lU(n,e){const t={};return vV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nl(n,(r,i)=>{const s=Qc(i,e.Eu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function cU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof gn||n instanceof zE||n instanceof To||n instanceof un||n instanceof Zc)}function XS(n,e,t){if(!cU(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=$E(t);throw e.mu("an object"===r?n+" a custom object":n+" "+r)}var i}function og(n,e,t){if((e=(0,qt.m9)(e))instanceof oa)return e._internalPath;if("string"==typeof e)return WE(n,e);throw ZE("Field path arguments must be of type string or ",n,!1,void 0,t)}const iee=new RegExp("[~\\*/\\[\\]]");function WE(n,e,t){if(e.search(iee)>=0)throw ZE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new oa(...e.split("."))._internalPath}catch{throw ZE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ZE(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new re(B.INVALID_ARGUMENT,a+n+l)}function uU(n,e){return n.some(t=>t.isEqual(e))}class ag{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new un(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new see(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(KE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class see extends ag{data(){return super.data()}}function KE(n,e){return"string"==typeof e?WE(n,e):e instanceof oa?e._internalPath:e._delegate._internalPath}function dU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new re(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class JS{}class lg extends JS{}function ml(n,e,...t){let r=[];e instanceof JS&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof Oh).length,a=s.filter(l=>l instanceof cg).length;if(o>1||o>0&&a>0)throw new re(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class cg extends lg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new cg(e,t,r)}_apply(e){const t=this._parse(e);return mU(e._query,t),new Mr(e.firestore,e.converter,oD(e._query,t))}_parse(e){const t=Kc(e.firestore);return function(s,o,a,l,u,h,m){let g;if(u.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new re(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){pU(m,h);const y=[];for(const E of m)y.push(fU(l,s,E));g={arrayValue:{values:y}}}else g=fU(l,s,m)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||pU(m,h),g=aU(a,"where",m,"in"===h||"not-in"===h);return mt.create(u,h,g)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Oh extends JS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Oh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:kt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)mU(o,l),o=oD(o,l)}(e._query,t),new Mr(e.firestore,e.converter,oD(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class eA extends lg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new eA(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new re(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new re(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pm(s,o)}(e._query,this._field,this._direction);return new Mr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ta(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class QE extends lg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new QE(e,t,r)}_apply(e){return new Mr(e.firestore,e.converter,gE(e._query,this._limit,this._limitType))}}class YE extends lg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new YE(e,t,r)}_apply(e){const t=hU(e,this.type,this._docOrFields,this._inclusive);return new Mr(e.firestore,e.converter,(s=t,new ta((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class XE extends lg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new XE(e,t,r)}_apply(e){const t=hU(e,this.type,this._docOrFields,this._inclusive);return new Mr(e.firestore,e.converter,(s=t,new ta((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function hU(n,e,t,r){if(t[0]=(0,qt.m9)(t[0]),t[0]instanceof ag)return function(s,o,a,l,u){if(!l)throw new re(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const m of dh(s))if(m.field.isKeyField())h.push(Lc(o,l.key));else{const g=l.data.field(m.field);if(cE(g))throw new re(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===g){const y=m.field.canonicalString();throw new re(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(g)}return new ll(h,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Kc(n.firestore);return function(o,a,l,u,h,m){const g=o.explicitOrderBy;if(h.length>g.length)throw new re(B.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let E=0;E<h.length;E++){const b=h[E];if(g[E].field.isKeyField()){if("string"!=typeof b)throw new re(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof b}`);if(!sD(o)&&-1!==b.indexOf("/"))throw new re(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${b}' contains a slash.`);const C=o.path.child(wt.fromString(b));if(!he.isDocumentKey(C))throw new re(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const N=new he(C);y.push(Lc(a,N))}else{const C=aU(l,u,b);y.push(C)}}return new ll(y,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function fU(n,e,t){if("string"==typeof(t=(0,qt.m9)(t))){if(""===t)throw new re(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sD(e)&&-1!==t.indexOf("/"))throw new re(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(wt.fromString(t));if(!he.isDocumentKey(r))throw new re(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lc(n,new he(r))}if(t instanceof un)return Lc(n,t._key);throw new re(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$E(t)}.`)}function pU(n,e){if(!Array.isArray(n)||0===n.length)throw new re(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mU(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new re(B.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class tA{convertValue(e,t="none"){switch(ol(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ee()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return nl(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new zE(Tn(e.latitude),Tn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=uE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Am(e));default:return null}}convertTimestamp(e){const t=rl(e);return new gn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=wt.fromString(e);Ae(x2(r));const i=new il(r.get(1),r.get(3)),s=new he(r.popFirst(5));return i.isEqual(t)||Mn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function JE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class pee extends tA{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,t)}}class Yc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class aa extends ag{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ug(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(KE("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ug extends aa{data(e={}){return super.data(e)}}class gl{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Yc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ug(this._firestore,this._userDataWriter,r.key,r,new Yc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new ug(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new ug(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return 0!==a.type&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:gee(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function gee(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}function _U(n,e){return n instanceof aa&&e instanceof aa?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof gl&&e instanceof gl&&n._firestore===e._firestore&&WS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class _l extends tA{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,t)}}function yU(n,e,t){n=ft(n,un);const r=ft(n.firestore,Xt),i=JE(n.converter,e,t);return Fh(r,[GE(Kc(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,_n.none())])}function vU(n,e,t,...r){n=ft(n,un);const i=ft(n.firestore,Xt),s=Kc(i);let o;return o="string"==typeof(e=(0,qt.m9)(e))||e instanceof oa?YS(s,"updateDoc",n._key,e,t,r):QS(s,"updateDoc",n._key,e),Fh(i,[o.toMutation(n._key,_n.exists(!0))])}function EU(n,...e){var t,r,i;n=(0,qt.m9)(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||ZS(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(ZS(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let l,u,h;if(n instanceof un)u=ft(n.firestore,Xt),h=uh(n._key.path),l={next:m=>{e[o]&&e[o](nA(u,n,m))},error:e[o+1],complete:e[o+2]};else{const m=ft(n,Mr);u=ft(m.firestore,Xt),h=m._query;const g=new _l(u);l={next:y=>{e[o]&&e[o](new gl(u,g,m,y))},error:e[o+1],complete:e[o+2]},dU(n._query)}return function(g,y,E,b){const C=new BE(b),N=new dS(y,C,E);return g.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return oS(yield kh(g),N)})),()=>{C.Na(),g.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return lS(yield kh(g),N)}))}}(Dn(u),h,a,l)}function Fh(n,e){return function(r,i){const s=new nr;return r.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function lJ(n,e,t){return gS.apply(this,arguments)}(yield zS(r),i,s)})),s.promise}(Dn(n),e)}function nA(n,e,t){const r=t.docs.get(e._key),i=new _l(n);return new aa(n,i,e._key,r,new Yc(t.hasPendingWrites,t.fromCache),e.converter)}const kee={maxAttempts:5};class wU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Kc(e)}set(e,t,r){this._verifyNotCommitted();const i=yl(e,this._firestore),s=JE(i.converter,t,r),o=GE(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,_n.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=yl(e,this._firestore);let o;return o="string"==typeof(t=(0,qt.m9)(t))||t instanceof oa?YS(this._dataReader,"WriteBatch.update",s._key,t,r,i):QS(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,_n.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yl(e,this._firestore);return this._mutations=this._mutations.concat(new gh(t._key,_n.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new re(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yl(n,e){if((n=(0,qt.m9)(n)).firestore!==e)throw new re(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Oee extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Kc(t)}get(t){const r=yl(t,this._firestore),i=new pee(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Ee();const o=s[0];if(o.isFoundDocument())return new ag(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new ag(this._firestore,i,r._key,null,r.converter);throw Ee()})}set(t,r,i){const s=yl(t,this._firestore),o=JE(s.converter,r,i),a=GE(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=yl(t,this._firestore);let a;return a="string"==typeof(r=(0,qt.m9)(r))||r instanceof oa?YS(this._dataReader,"Transaction.update",o._key,r,i,s):QS(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=yl(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yl(e,this._firestore),r=new _l(this._firestore);return super.get(e).then(i=>new aa(this._firestore,r,t._key,i._document,new Yc(!1,!1),t.converter))}}function iA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function TU(){if(typeof Uint8Array>"u")throw new re("unimplemented","Uint8Arrays are not available in this environment.")}function DU(){if(!function pY(){return typeof atob<"u"}())throw new re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){nh=qd.SDK_VERSION,(0,qd._registerComponent)(new LF.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Xt(new VQ(r.getProvider("auth-internal")),new jQ(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new re(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new il(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,qd.registerVersion)(tV,"4.4.0",e),(0,qd.registerVersion)(tV,"4.4.0","esm2017")}();class dg{constructor(e){this._delegate=e}static fromBase64String(e){return DU(),new dg(To.fromBase64String(e))}static fromUint8Array(e){return TU(),new dg(To.fromUint8Array(e))}toBase64(){return DU(),this._delegate.toBase64()}toUint8Array(){return TU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function sA(n){return function qee(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Gee{enableIndexedDbPersistence(e,t){return function HJ(n,e){rU(n=ft(n,Xt));const t=Dn(n);if(t._uninitializedComponentsProvider)throw new re(B.FAILED_PRECONDITION,"SDK cache is already specified.");Ci("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Ph;return nU(t,i,new LS(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function zJ(n){rU(n=ft(n,Xt));const e=Dn(n);if(e._uninitializedComponentsProvider)throw new re(B.FAILED_PRECONDITION,"SDK cache is already specified.");Ci("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Ph;return nU(e,r,new LB(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function qJ(n){if(n._initialized&&!n._terminated)throw new re(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new nr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Q.Z)(function*(){try{yield(t=(0,Q.Z)(function*(i){if(!Os.D())return Promise.resolve();const s=i+"main";yield Os.delete(s)}),function r(i){return t.apply(this,arguments)})(xD(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class SU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof il||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ci("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function XB(n,e,t,r={}){var i;const s=(n=ft(n,rg))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ci("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=pr.MOCK_USER;else{a=(0,qt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new re(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new pr(u)}n._authCredentials=new LQ(new nV(a,l))}}(this._delegate,e,t,r)}enableNetwork(){return function WJ(n){return function xJ(n){return n.asyncQueue.enqueue((0,Q.Z)(function*(){const e=yield UB(n),t=yield jB(n);return e.setNetworkEnabled(!0),function(i){const s=ue(i);return s.C_.delete(0),eg(s)}(t)}))}(Dn(n=ft(n,Xt)))}(this._delegate)}disableNetwork(){return function ZJ(n){return function RJ(n){return n.asyncQueue.enqueue((0,Q.Z)(function*(){const e=yield UB(n),t=yield jB(n);return e.setNetworkEnabled(!1),(r=(0,Q.Z)(function*(s){const o=ue(s);o.C_.add(0),yield Th(o),o.M_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(Dn(n=ft(n,Xt)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,WB("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function GJ(n){return function(t){const r=new nr;return t.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return function hJ(n,e){return wS.apply(this,arguments)}(yield zS(t),r)})),r.promise}(Dn(n=ft(n,Xt)))}(this._delegate)}onSnapshotsInSync(e){return function Tee(n,e){return function NJ(n,e){const t=new BE(e);return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return i=yield kh(n),s=t,ue(i).q_.add(s),void s.next();var i,s})),()=>{t.Na(),n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return i=yield kh(n),s=t,void ue(i).q_.delete(s);var i,s}))}}(Dn(n=ft(n,Xt)),ZS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Lh(this,JB(this._delegate,e))}catch(t){throw hi(t,"collection()","Firestore.collection()")}}doc(e){try{return new ms(this,HE(this._delegate,e))}catch(t){throw hi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fi(this,function BJ(n,e){if(n=ft(n,rg),GS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new re(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Mr(n,null,(r=e,new ta(wt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw hi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Fee(n,e,t){n=ft(n,Xt);const r=Object.assign(Object.assign({},kee),t);return function(s){if(s.maxAttempts<1)throw new re(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new nr;return s.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){const u=yield function $B(n){return jE(n).then(e=>e.datastore)}(s);new SJ(s.asyncQueue,u,a,o,l).run()})),l.promise}(Dn(n),i=>e(new Oee(n,i)),r)}(this._delegate,t=>e(new AU(this,t)))}batch(){return Dn(this._delegate),new xU(new wU(this._delegate,e=>Fh(this._delegate,e)))}loadBundle(e){return function KJ(n,e){const t=Dn(n=ft(n,Xt)),r=new jJ;return function kJ(n,e,t,r){const i=function(o,a){let l;return l="string"==typeof o?d2().encode(o):o,h=function(h,m){if(h instanceof Uint8Array)return VB(h,m);if(h instanceof ArrayBuffer)return VB(new Uint8Array(h),m);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new TJ(h,a);var h}(t,Jm(e));n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){!function IJ(n,e,t){const r=ue(n);var i;(i=(0,Q.Z)(function*(o,a,l){try{const u=yield a.getMetadata();if(yield function(E,b){const C=ue(E),N=Pn(b.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",R=>C.Kr.getBundleMetadata(R,b.id)).then(R=>!!R&&R.createTime.compareTo(N)>=0)}(o.localStore,u))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(E=u).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);l._updateProgress(AB(u));const h=new nJ(u,o.localStore,a.serializer);let m=yield a.Ma();for(;m;){const y=yield h.ea(m);y&&l._updateProgress(y),m=yield a.Ma()}const g=yield h.complete();return yield sa(o,g.ra,void 0),yield function(E,b){const C=ue(E);return C.persistence.runTransaction("Save bundle","readwrite",N=>C.Kr.saveBundleMetadata(N,b))}(o.localStore,u),l._completeWith(g.progress),Promise.resolve(g.na)}catch(u){return Ci("SyncEngine",`Loading bundle failed with ${u}`),l._failWith(u),Promise.resolve(new Set)}var E}),function s(o,a,l){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield zS(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function QJ(n,e){return function OJ(n,e){return n.asyncQueue.enqueue((0,Q.Z)(function*(){return function(r,i){const s=ue(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(yield Nh(n),e)}))}(Dn(n=ft(n,Xt)),e).then(t=>t?new Mr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new fi(this,t):null)}}class tw extends tA{constructor(e){super(),this.firestore=e}convertBytes(e){return new dg(new To(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ms.forKey(t,this.firestore,null)}}class AU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new tw(e)}get(e){const t=Jc(e);return this._delegate.get(t).then(r=>new hg(this._firestore,new aa(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Jc(e);return r?(iA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Jc(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Jc(e);return this._delegate.delete(t),this}}class xU{constructor(e){this._delegate=e}set(e,t,r){const i=Jc(e);return r?(iA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Jc(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Jc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Xc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new ug(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new fg(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Xc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Xc(e,new tw(e),t),i.set(t,s)),s}}Xc.INSTANCES=new WeakMap;class ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tw(e)}static forPath(e,t,r){if(e.length%2!=0)throw new re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ms(t,new un(t._delegate,r,new he(e)))}static forKey(e,t,r){return new ms(t,new un(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Lh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Lh(this.firestore,JB(this._delegate,e))}catch(t){throw hi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,qt.m9)(e))instanceof un&&eU(this._delegate,e)}set(e,t){t=iA("DocumentReference.set",t);try{return t?yU(this._delegate,e,t):yU(this._delegate,e)}catch(r){throw hi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?vU(this._delegate,e):vU(this._delegate,e,t,...r)}catch(i){throw hi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Iee(n){return Fh(ft(n.firestore,Xt),[new gh(n._key,_n.none())])}(this._delegate)}onSnapshot(...e){const t=RU(e),r=MU(e,i=>new hg(this.firestore,new aa(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return EU(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function yee(n){n=ft(n,un);const e=ft(n.firestore,Xt),t=Dn(e),r=new _l(e);return function MJ(n,e){const t=new nr;return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return(r=(0,Q.Z)(function*(s,o,a){try{const l=yield function(h,m){const g=ue(h);return g.persistence.runTransaction("read document","readonly",y=>g.localDocuments.getDocument(y,m))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new re(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const u=Ah(l,`Failed to get document '${o} from cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Nh(n),e,t);var r})),t.promise}(t,n._key).then(i=>new aa(e,r,n._key,i,new Yc(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function vee(n){n=ft(n,un);const e=ft(n.firestore,Xt);return HB(Dn(e),n._key,{source:"server"}).then(t=>nA(e,n,t))}(this._delegate):function _ee(n){n=ft(n,un);const e=ft(n.firestore,Xt);return HB(Dn(e),n._key).then(t=>nA(e,n,t))}(this._delegate),t.then(r=>new hg(this.firestore,new aa(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ms(this.firestore,this._delegate.withConverter(e?Xc.getInstance(this.firestore,e):null))}}function hi(n,e,t){return n.message=n.message.replace(e,t),n}function RU(n){for(const e of n)if("object"==typeof e&&!sA(e))return e;return{}}function MU(n,e){var t,r;let i;return i=sA(n[0])?n[0]:sA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class hg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ms(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return _U(this._delegate,e._delegate)}}class fg extends hg{data(e){const t=this._delegate.data(e);return this._delegate._converter||function OQ(n,e){n||Ee()}(void 0!==t),t}}class fi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tw(e)}where(e,t,r){try{return new fi(this.firestore,ml(this._delegate,function oee(n,e,t){const r=e,i=KE("where",n);return cg._create(i,r,t)}(e,t,r)))}catch(i){throw hi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new fi(this.firestore,ml(this._delegate,function aee(n,e="asc"){const t=e,r=KE("orderBy",n);return eA._create(r,t)}(e,t)))}catch(r){throw hi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new fi(this.firestore,ml(this._delegate,function lee(n){return QB("limit",n),QE._create("limit",n,"F")}(e)))}catch(t){throw hi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new fi(this.firestore,ml(this._delegate,function cee(n){return QB("limitToLast",n),QE._create("limitToLast",n,"L")}(e)))}catch(t){throw hi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new fi(this.firestore,ml(this._delegate,function uee(...n){return YE._create("startAt",n,!0)}(...e)))}catch(t){throw hi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new fi(this.firestore,ml(this._delegate,function dee(...n){return YE._create("startAfter",n,!1)}(...e)))}catch(t){throw hi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new fi(this.firestore,ml(this._delegate,function hee(...n){return XE._create("endBefore",n,!1)}(...e)))}catch(t){throw hi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new fi(this.firestore,ml(this._delegate,function fee(...n){return XE._create("endAt",n,!0)}(...e)))}catch(t){throw hi(t,"endAt()","Query.endAt()")}}isEqual(e){return WS(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function wee(n){n=ft(n,Mr);const e=ft(n.firestore,Xt),t=Dn(e),r=new _l(e);return function PJ(n,e){const t=new nr;return n.asyncQueue.enqueueAndForget((0,Q.Z)(function*(){return(r=(0,Q.Z)(function*(s,o,a){try{const l=yield PE(s,o,!0),u=new MB(o,l.ls),h=u.ca(l.documents),m=u.applyChanges(h,!1);a.resolve(m.snapshot)}catch(l){const u=Ah(l,`Failed to execute query '${o} against cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Nh(n),e,t);var r})),t.promise}(t,n._query).then(i=>new gl(e,r,n,i))}(this._delegate):"server"===e?.source?function bee(n){n=ft(n,Mr);const e=ft(n.firestore,Xt),t=Dn(e),r=new _l(e);return zB(t,n._query,{source:"server"}).then(i=>new gl(e,r,n,i))}(this._delegate):function Eee(n){n=ft(n,Mr);const e=ft(n.firestore,Xt),t=Dn(e),r=new _l(e);return dU(n._query),zB(t,n._query).then(i=>new gl(e,r,n,i))}(this._delegate),t.then(r=>new oA(this.firestore,new gl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=RU(e),r=MU(e,i=>new oA(this.firestore,new gl(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return EU(this._delegate,t,r)}withConverter(e){return new fi(this.firestore,this._delegate.withConverter(e?Xc.getInstance(this.firestore,e):null))}}class Zee{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new fg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class oA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new fi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new fg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Zee(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new fg(this._firestore,r))})}isEqual(e){return _U(this._delegate,e._delegate)}}class Lh extends fi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ms(this.firestore,e):null}doc(e){try{return new ms(this.firestore,void 0===e?HE(this._delegate):HE(this._delegate,e))}catch(t){throw hi(t,"doc()","CollectionReference.doc()")}}add(e){return function Cee(n,e){const t=ft(n.firestore,Xt),r=HE(n),i=JE(n.converter,e);return Fh(t,[GE(Kc(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,_n.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ms(this.firestore,t))}isEqual(e){return eU(this._delegate,e._delegate)}withConverter(e){return new Lh(this.firestore,this._delegate.withConverter(e?Xc.getInstance(this.firestore,e):null))}}function Jc(n){return ft(n,un)}class aA{constructor(...e){this._delegate=new oa(...e)}static documentId(){return new aA(ln.keyField().canonicalString())}isEqual(e){return(e=(0,qt.m9)(e))instanceof oa&&this._delegate._internalPath.isEqual(e._internalPath)}}class eu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Vee(){return new KS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new eu(e)}static delete(){const e=function Lee(){return new sg("deleteField")}();return e._methodName="FieldValue.delete",new eu(e)}static arrayUnion(...e){const t=function Bee(...n){return new tee("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new eu(t)}static arrayRemove(...e){const t=function Uee(...n){return new nee("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new eu(t)}static increment(e){const t=function jee(n){return new ree("increment",n)}(e);return t._methodName="FieldValue.increment",new eu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Kee={Firestore:SU,GeoPoint:zE,Timestamp:gn,Blob:dg,Transaction:AU,WriteBatch:xU,DocumentReference:ms,DocumentSnapshot:hg,Query:fi,QueryDocumentSnapshot:fg,QuerySnapshot:oA,CollectionReference:Lh,FieldPath:aA,FieldValue:eu,setLogLevel:function Wee(n){!function kQ(n){Ja.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function PU(n,e){return function Xee(n,e=Gd){return new Je(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function lA(n,e){return PU(n,e).pipe(_e(t=>({payload:t,type:"query"})))}!function Yee(n){(function Qee(n,e){n.INTERNAL.registerComponent(new LF.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Kee)))})(n,(e,t)=>new SU(e,t,new Gee)),n.registerVersion("@firebase/firestore-compat","0.3.23")}(xc.Z);class NU{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=LU(r,t);return new FU(i,s,this.afs)}snapshotChanges(){return function Jee(n,e){return PU(n,e).pipe(Lp(void 0),iT(),_e(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Li)}valueChanges(e={}){return this.snapshotChanges().pipe(_e(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return S(this.ref.get(e)).pipe(Li)}}function nw(n,e){return lA(n,e).pipe(Lp(void 0),iT(),_e(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{const u=s.find(m=>m.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function kU(n,e,t){return nw(n,t).pipe(fv((r,i)=>function ete(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function tte(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return cA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return cA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return cA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),rn(),_e(r=>r.map(i=>({type:i.type,payload:i}))))}function cA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function OU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class FU{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=nw(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(_e(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Lp(void 0),iT(),ur(([r,i])=>i.length>0||!r),_e(([,r])=>r),Li)}auditTrail(e){return this.stateChanges(e).pipe(fv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=OU(e);return kU(this.query,t,this.afs.schedulers.outsideAngular).pipe(Li)}valueChanges(e={}){return lA(this.query,this.afs.schedulers.outsideAngular).pipe(_e(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Li)}get(e){return S(this.query.get(e)).pipe(Li)}add(e){return this.ref.add(e)}doc(e){return new NU(this.ref.doc(e),this.afs)}}class nte{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?nw(this.query,this.afs.schedulers.outsideAngular).pipe(_e(t=>t.filter(r=>e.indexOf(r.type)>-1)),ur(t=>t.length>0),Li):nw(this.query,this.afs.schedulers.outsideAngular).pipe(Li)}auditTrail(e){return this.stateChanges(e).pipe(fv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=OU(e);return kU(this.query,t,this.afs.schedulers.outsideAngular).pipe(Li)}valueChanges(e={}){return lA(this.query,this.afs.schedulers.outsideAngular).pipe(_e(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Li)}get(e){return S(this.query.get(e)).pipe(Li)}}const rte=new se("angularfire2.enableFirestorePersistence"),ite=new se("angularfire2.firestore.persistenceSettings"),ste=new se("angularfire2.firestore.settings"),ote=new se("angularfire2.firestore.use-emulator");function LU(n,e=(t=>t)){return{query:e(n),ref:n}}let ate=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,l,u,h,m,g,y,E,b,C,N,R){this.schedulers=l;const L=rT(t,a,r),X=h;m&&OF(L,a,g,E,b,C,y,N),[this.firestore,this.persistenceEnabled$]=TF(`${L.name}.firestore`,"AngularFirestore",L.name,()=>{const le=a.runOutsideAngular(()=>L.firestore());if(s&&le.settings(s),X&&le.useEmulator(...X),i&&!iv(o)){const Re=()=>{try{return S(le.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(je){return typeof console<"u"&&console.warn(je),q(!1)}};return[le,a.runOutsideAngular(Re)]}return[le,q(!1)]},[s,X,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=LU(i,r),a=this.schedulers.ngZone.run(()=>s);return new FU(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new nte(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new NU(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(ne(tm),ne(Nv,8),ne(rte,8),ne(ste,8),ne(us),ne(ut),ne(IF),ne(ite,8),ne(ote,8),ne(FF,8),ne(xF,8),ne(RF,8),ne(MF,8),ne(PF,8),ne(NF,8),ne(kF,8),ne(wF,8))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),lte=(()=>{class n{constructor(t){this.firestore=t,this.notasCollection=t.collection("notas")}getNotas(){return this.notasCollection.valueChanges({obtenerNuevoId:"id"})}agregarNota(t){this.notasCollection.add(t),console.log("Se esta ejecutando")}eliminarNotaPorTitulo(t){this.notasCollection.ref.where("titulo","==",t).get().then(r=>r.empty?(console.log("No se encontr\xf3 ninguna nota con el t\xedtulo proporcionado"),null):r.docs[0].ref.delete()).then(()=>{console.log("Nota eliminada exitosamente")}).catch(r=>{console.error("Error al eliminar la nota:",r)})}editarNota(t,r){this.notasCollection.ref.where("id","==",t).get().then(i=>i.empty?(console.log("No se encontr\xf3 ninguna nota con el t\xedtulo proporcionado"),null):i.docs[0].ref.update(r)).then(()=>{console.log("Nota editada exitosamente")}).catch(i=>{console.error("Error al editar la nota:",i)})}static#e=this.\u0275fac=function(r){return new(r||n)(ne(ate))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),VU=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(U($o),U(bn))};static#t=this.\u0275dir=ce({type:n})}return n})(),tu=(()=>{class n extends VU{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=yt(n)))(i||n)}}();static#t=this.\u0275dir=ce({type:n,features:[ke]})}return n})();const Do=new se("NgValueAccessor"),dte={provide:Do,useExisting:F(()=>rw),multi:!0},fte=new se("CompositionEventMode");let rw=(()=>{class n extends VU{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function hte(){const n=Ga()?Ga().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(U($o),U(bn),U(fte,8))};static#t=this.\u0275dir=ce({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&on("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[it([dte]),ke]})}return n})();const Zr=new se("NgValidators"),El=new se("NgAsyncValidators");function KU(n){return null!=n}function QU(n){return vp(n)?S(n):n}function YU(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function XU(n,e){return e.map(t=>t(n))}function JU(n){return n.map(e=>function mte(n){return!n.validate}(e)?e:t=>e.validate(t))}function uA(n){return null!=n?function ej(n){if(!n)return null;const e=n.filter(KU);return 0==e.length?null:function(t){return YU(XU(t,e))}}(JU(n)):null}function dA(n){return null!=n?function tj(n){if(!n)return null;const e=n.filter(KU);return 0==e.length?null:function(t){return function cte(...n){const e=pa(n),{args:t,keys:r}=f1(n),i=new Je(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,u=o;for(let h=0;h<o;h++){let m=!1;nn(t[h]).subscribe(fe(s,g=>{m||(m=!0,u--),a[h]=g},()=>l--,void 0,()=>{(!l||!m)&&(u||s.next(r?p1(r,a):a),s.complete())}))}});return e?i.pipe(RC(e)):i}(XU(t,e).map(QU)).pipe(_e(YU))}}(JU(n)):null}function nj(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function hA(n){return n?Array.isArray(n)?n:[n]:[]}function sw(n,e){return Array.isArray(n)?n.includes(e):n===e}function sj(n,e){const t=hA(e);return hA(n).forEach(i=>{sw(t,i)||t.push(i)}),t}function oj(n,e){return hA(e).filter(t=>!sw(n,t))}class aj{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=uA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=dA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class pi extends aj{get formDirective(){return null}get path(){return null}}class wl extends aj{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class lj{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let cj=(()=>{class n extends lj{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(U(wl,2))};static#t=this.\u0275dir=ce({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Dd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ke]})}return n})();const pg="VALID",aw="INVALID",Vh="PENDING",mg="DISABLED";function lw(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class fj{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===pg}get invalid(){return this.status===aw}get pending(){return this.status==Vh}get disabled(){return this.status===mg}get enabled(){return this.status!==mg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(sj(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(sj(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(oj(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(oj(e,this._rawAsyncValidators))}hasValidator(e){return sw(this._rawValidators,e)}hasAsyncValidator(e){return sw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Vh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=mg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=pg,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pg||this.status===Vh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mg:pg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Vh,this._hasOwnPendingAsyncValidator=!0;const t=QU(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new mn,this.statusChanges=new mn}_calculateStatus(){return this._allControlsDisabled()?mg:this.errors?aw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vh)?Vh:this._anyControlsHaveStatus(aw)?aw:pg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){lw(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Ete(n){return Array.isArray(n)?uA(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function wte(n){return Array.isArray(n)?dA(n):n||null}(this._rawAsyncValidators)}}const Bh=new se("CallSetDisabledState",{providedIn:"root",factory:()=>cw}),cw="always";function gg(n,e,t=cw){(function yA(n,e){const t=function rj(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(nj(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function ij(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(nj(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();hw(e._rawValidators,i),hw(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Cte(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&pj(n,e)})}(n,e),function Dte(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Tte(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&pj(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Ite(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function hw(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function pj(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function _j(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function yj(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const vj=class extends fj{constructor(e=null,t,r){super(function mA(n){return(lw(n)?n.validators:n)||null}(t),function gA(n,e){return(lw(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),lw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=yj(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_j(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_j(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){yj(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},kte={provide:wl,useExisting:F(()=>IA)},bj=(()=>Promise.resolve())();let IA=(()=>{class n extends wl{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new vj,this._registered=!1,this.name="",this.update=new mn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function wA(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===rw?t=s:function xte(n){return Object.getPrototypeOf(n.constructor)===tu}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function EA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){gg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){bj.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&function Pd(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(r);bj.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function uw(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(U(pi,9),U(Zr,10),U(El,10),U(Do,10),U(Mp,8),U(Bh,8))};static#t=this.\u0275dir=ce({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[it([kte]),ke,lr]})}return n})(),Cj=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({})}return n})(),sne=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({imports:[Cj]})}return n})(),ane=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Bh,useValue:t.callSetDisabledState??cw}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({imports:[sne]})}return n})();const lne=new se("cdk-dir-doc",{providedIn:"root",factory:function cne(){return me(tr)}}),une=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let hne=(()=>{class n{constructor(t){this.value="ltr",this.change=new mn,t&&(this.value=function dne(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?une.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(r){return new(r||n)(ne(lne,8))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pw=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({})}return n})();function mw(n){return null!=n&&"false"!=`${n}`}function $j(n){return Array.isArray(n)?n:[n]}function RA(n){return n&&"function"==typeof n.connect&&!(n instanceof dv)}class zj{applyChanges(e,t,r,i,s){e.forEachOperation((o,a,l)=>{let u,h;if(null==o.previousIndex){const m=r(o,a,l);u=t.createEmbeddedView(m.templateRef,m.context,m.index),h=1}else null==l?(t.remove(a),h=3):(u=t.get(a),t.move(u,l),h=2);s&&s({context:u?.context,operation:h,record:o})})}detach(){}}const yg=new se("_ViewRepeater");let MA;try{MA=typeof Intl<"u"&&Intl.v8BreakIterator}catch{MA=!1}let vg,gw=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?yC(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!MA)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(ne(us))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Eg(n){return function pne(){if(null==vg&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>vg=!0}))}finally{vg=vg||!1}return vg}()?n:!!n.capture}const wg={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=wg;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new gt(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=wg;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=wg;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class vne extends Pv{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class yne extends Mv{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=wg.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(wg.cancelAnimationFrame(t),e._scheduled=void 0)}});let NA,wne=1;const yw={};function Wj(n){return n in yw&&(delete yw[n],!0)}const bne={setImmediate(n){const e=wne++;return yw[e]=!0,NA||(NA=Promise.resolve()),NA.then(()=>Wj(e)&&n()),e},clearImmediate(n){Wj(n)}},{setImmediate:Ine,clearImmediate:Cne}=bne,vw={setImmediate(...n){const{delegate:e}=vw;return(e?.setImmediate||Ine)(...n)},clearImmediate(n){const{delegate:e}=vw;return(e?.clearImmediate||Cne)(n)},delegate:void 0};new class Dne extends Pv{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class Tne extends Mv{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=vw.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(vw.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function Zj(n=0,e,t=cK){let r=-1;return null!=e&&(Yr(e)?t=e:r=e),new Je(i=>{let s=function xne(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}let Pne=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new j,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(function Rne(n,e=Gd){return function Ane(n){return $((e,t)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const u=i;i=null,t.next(u)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(fe(t,u=>{r=!0,i=u,s||nn(n(u)).subscribe(s=fe(t,a,l))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>Zj(n,e))}(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(r){return new(r||n)(ne(gw),ne(ut),ne(tr,8))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Kj=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({})}return n})(),Nne=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({imports:[pw,Kj,pw,Kj]})}return n})();const kne=[[["caption"]],[["colgroup"],["col"]]],One=["caption","colgroup, col"];function kA(n){return class extends n{get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=mw(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}}}const jh=new se("CDK_TABLE");let $h=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(r){return new(r||n)(U(Ir))};static#t=this.\u0275dir=ce({type:n,selectors:[["","cdkCellDef",""]]})}return n})(),Hh=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(r){return new(r||n)(U(Ir))};static#t=this.\u0275dir=ce({type:n,selectors:[["","cdkHeaderCellDef",""]]})}return n})(),Ew=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(r){return new(r||n)(U(Ir))};static#t=this.\u0275dir=ce({type:n,selectors:[["","cdkFooterCellDef",""]]})}return n})();class Bne{}const Une=kA(Bne);let la=(()=>{class n extends Une{get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const r=this._stickyEnd;this._stickyEnd=mw(t),this._hasStickyChanged=r!==this._stickyEnd}constructor(t){super(),this._table=t,this._stickyEnd=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}static#e=this.\u0275fac=function(r){return new(r||n)(U(jh,8))};static#t=this.\u0275dir=ce({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(r,i,s){if(1&r&&(ho(s,$h,5),ho(s,Hh,5),ho(s,Ew,5)),2&r){let o;Cr(o=Tr())&&(i.cell=o.first),Cr(o=Tr())&&(i.headerCell=o.first),Cr(o=Tr())&&(i.footerCell=o.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[it([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),ke]})}return n})();class OA{constructor(e,t){t.nativeElement.classList.add(...e._columnCssClassName)}}let FA=(()=>{class n extends OA{constructor(t,r){super(t,r)}static#e=this.\u0275fac=function(r){return new(r||n)(U(la),U(bn))};static#t=this.\u0275dir=ce({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[ke]})}return n})(),LA=(()=>{class n extends OA{constructor(t,r){if(super(t,r),1===t._table?._elementRef.nativeElement.nodeType){const i=t._table._elementRef.nativeElement.getAttribute("role");r.nativeElement.setAttribute("role","grid"===i||"treegrid"===i?"gridcell":"cell")}}static#e=this.\u0275fac=function(r){return new(r||n)(U(la),U(bn))};static#t=this.\u0275dir=ce({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[ke]})}return n})();class Yj{constructor(){this.tasks=[],this.endTasks=[]}}const VA=new se("_COALESCED_STYLE_SCHEDULER");let Xj=(()=>{class n{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new j}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new Yj,this._getScheduleObservable().pipe(Tc(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new Yj;for(const r of t.tasks)r();for(const r of t.endTasks)r()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?S(Promise.resolve(void 0)):this._ngZone.onStable.pipe(Dr(1))}static#e=this.\u0275fac=function(r){return new(r||n)(ne(ut))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),BA=(()=>{class n{constructor(t,r){this.template=t,this._differs=r}ngOnChanges(t){if(!this._columnsDiffer){const r=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(r).create(),this._columnsDiffer.diff(r)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof bg?t.headerCell.template:this instanceof Ig?t.footerCell.template:t.cell.template}static#e=this.\u0275fac=function(r){return new(r||n)(U(Ir),U(Go))};static#t=this.\u0275dir=ce({type:n,features:[lr]})}return n})();class jne extends BA{}const $ne=kA(jne);let bg=(()=>{class n extends $ne{constructor(t,r,i){super(t,r),this._table=i}ngOnChanges(t){super.ngOnChanges(t)}static#e=this.\u0275fac=function(r){return new(r||n)(U(Ir),U(Go),U(jh,8))};static#t=this.\u0275dir=ce({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[ke,lr]})}return n})();class Hne extends BA{}const zne=kA(Hne);let Ig=(()=>{class n extends zne{constructor(t,r,i){super(t,r),this._table=i}ngOnChanges(t){super.ngOnChanges(t)}static#e=this.\u0275fac=function(r){return new(r||n)(U(Ir),U(Go),U(jh,8))};static#t=this.\u0275dir=ce({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[ke,lr]})}return n})(),ww=(()=>{class n extends BA{constructor(t,r,i){super(t,r),this._table=i}static#e=this.\u0275fac=function(r){return new(r||n)(U(Ir),U(Go),U(jh,8))};static#t=this.\u0275dir=ce({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[ke]})}return n})(),ca=(()=>{class n{static#e=this.mostRecentCellOutlet=null;constructor(t){this._viewContainer=t,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}static#t=this.\u0275fac=function(r){return new(r||n)(U($r))};static#n=this.\u0275dir=ce({type:n,selectors:[["","cdkCellOutlet",""]]})}return n})(),UA=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ar({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(r,i){1&r&&lo(0,0)},dependencies:[ca],encapsulation:2})}return n})(),$A=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ar({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(r,i){1&r&&lo(0,0)},dependencies:[ca],encapsulation:2})}return n})(),bw=(()=>{class n{constructor(t){this.templateRef=t,this._contentClassName="cdk-no-data-row"}static#e=this.\u0275fac=function(r){return new(r||n)(U(Ir))};static#t=this.\u0275dir=ce({type:n,selectors:[["ng-template","cdkNoDataRow",""]]})}return n})();const Jj=["top","bottom","left","right"];class qne{constructor(e,t,r,i,s=!0,o=!0,a){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=r,this._coalescedStyleScheduler=i,this._isBrowser=s,this._needsPositionStickyOnElement=o,this._positionListener=a,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const r=[];for(const i of e)if(i.nodeType===i.ELEMENT_NODE){r.push(i);for(let s=0;s<i.children.length;s++)r.push(i.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const i of r)this._removeStickyStyle(i,t)})}updateStickyColumns(e,t,r,i=!0){if(!e.length||!this._isBrowser||!t.some(g=>g)&&!r.some(g=>g))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=e[0],o=s.children.length,a=this._getCellWidths(s,i),l=this._getStickyStartColumnPositions(a,t),u=this._getStickyEndColumnPositions(a,r),h=t.lastIndexOf(!0),m=r.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const g="rtl"===this.direction,y=g?"right":"left",E=g?"left":"right";for(const b of e)for(let C=0;C<o;C++){const N=b.children[C];t[C]&&this._addStickyStyle(N,y,l[C],C===h),r[C]&&this._addStickyStyle(N,E,u[C],C===m)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===h?[]:a.slice(0,h+1).map((b,C)=>t[C]?b:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===m?[]:a.slice(m).map((b,C)=>r[C+m]?b:null).reverse()}))})}stickRows(e,t,r){if(!this._isBrowser)return;const i="bottom"===r?e.slice().reverse():e,s="bottom"===r?t.slice().reverse():t,o=[],a=[],l=[];for(let h=0,m=0;h<i.length;h++){if(!s[h])continue;o[h]=m;const g=i[h];l[h]=this._isNativeHtmlTable?Array.from(g.children):[g];const y=g.getBoundingClientRect().height;m+=y,a[h]=y}const u=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{for(let h=0;h<i.length;h++){if(!s[h])continue;const m=o[h],g=h===u;for(const y of l[h])this._addStickyStyle(y,r,m,g)}"top"===r?this._positionListener?.stickyHeaderRowsUpdated({sizes:a,offsets:o,elements:l}):this._positionListener?.stickyFooterRowsUpdated({sizes:a,offsets:o,elements:l})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const r=e.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{t.some(i=>!i)?this._removeStickyStyle(r,["bottom"]):this._addStickyStyle(r,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const i of t)e.style[i]="",e.classList.remove(this._borderCellCss[i]);Jj.some(i=>-1===t.indexOf(i)&&e.style[i])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,r,i){e.classList.add(this._stickCellCss),i&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${r}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let r=0;for(const i of Jj)e.style[i]&&(r+=t[i]);return r?`${r}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const r=[],i=e.children;for(let s=0;s<i.length;s++)r.push(i[s].getBoundingClientRect().width);return this._cachedCellWidths=r,r}_getStickyStartColumnPositions(e,t){const r=[];let i=0;for(let s=0;s<e.length;s++)t[s]&&(r[s]=i,i+=e[s]);return r}_getStickyEndColumnPositions(e,t){const r=[];let i=0;for(let s=e.length;s>0;s--)t[s]&&(r[s]=i,i+=e[s]);return r}}const HA=new se("CDK_SPL");let Iw=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}static#e=this.\u0275fac=function(r){return new(r||n)(U($r),U(bn))};static#t=this.\u0275dir=ce({type:n,selectors:[["","rowOutlet",""]]})}return n})(),Cw=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}static#e=this.\u0275fac=function(r){return new(r||n)(U($r),U(bn))};static#t=this.\u0275dir=ce({type:n,selectors:[["","headerRowOutlet",""]]})}return n})(),Tw=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}static#e=this.\u0275fac=function(r){return new(r||n)(U($r),U(bn))};static#t=this.\u0275dir=ce({type:n,selectors:[["","footerRowOutlet",""]]})}return n})(),Dw=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}static#e=this.\u0275fac=function(r){return new(r||n)(U($r),U(bn))};static#t=this.\u0275dir=ce({type:n,selectors:[["","noDataRowOutlet",""]]})}return n})(),Sw=(()=>{class n{get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=mw(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=mw(t),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}constructor(t,r,i,s,o,a,l,u,h,m,g,y){this._differs=t,this._changeDetectorRef=r,this._elementRef=i,this._dir=o,this._platform=l,this._viewRepeater=u,this._coalescedStyleScheduler=h,this._viewportRuler=m,this._stickyPositioningListener=g,this._ngZone=y,this._onDestroy=new j,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new mn,this.viewChange=new P({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=a,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,r)=>this.trackBy?this.trackBy(r.dataIndex,r.data):r),this._viewportRuler.change().pipe(Tc(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const r=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||r,this._forceRecalculateCellWidths=r,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),RA(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const r=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,r,(i,s,o)=>this._getEmbeddedViewArgs(i.item,o),i=>i.item.data,i=>{1===i.operation&&i.context&&this._renderCellTemplateForItem(i.record.item.rowDef,i.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(i=>{r.get(i.currentIndex).context.$implicit=i.item.data}),this._updateNoDataRow(),this._ngZone&&ut.isInAngularZone()?this._ngZone.onStable.pipe(Dr(1),Tc(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),i=this._elementRef.nativeElement.querySelector("thead");i&&(i.style.display=t.length?"":"none");const s=this._headerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,s,"top"),this._headerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),i=this._elementRef.nativeElement.querySelector("tfoot");i&&(i.style.display=t.length?"":"none");const s=this._footerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),r=this._getRenderedRows(this._rowOutlet),i=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...r,...i],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((s,o)=>{this._addStickyColumnStyles([s],this._headerRowDefs[o])}),this._rowDefs.forEach(s=>{const o=[];for(let a=0;a<r.length;a++)this._renderRows[a].rowDef===s&&o.push(r[a]);this._addStickyColumnStyles(o,s)}),i.forEach((s,o)=>{this._addStickyColumnStyles([s],this._footerRowDefs[o])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const t=[],r=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let i=0;i<this._data.length;i++){let s=this._data[i];const o=this._getRenderRowsForData(s,i,r.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let a=0;a<o.length;a++){let l=o[a];const u=this._cachedRenderRowsMap.get(l.data);u.has(l.rowDef)?u.get(l.rowDef).push(l):u.set(l.rowDef,[l]),t.push(l)}}return t}_getRenderRowsForData(t,r,i){return this._getRowDefs(t,r).map(o=>{const a=i&&i.has(o)?i.get(o):[];if(a.length){const l=a.shift();return l.dataIndex=r,l}return{data:t,rowDef:o,dataIndex:r}})}_cacheColumnDefs(){this._columnDefsByName.clear(),Aw(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(r=>{this._columnDefsByName.has(r.name),this._columnDefsByName.set(r.name,r)})}_cacheRowDefs(){this._headerRowDefs=Aw(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=Aw(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=Aw(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(r=>!r.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(o,a)=>o||!!a.getColumnsDiff(),r=this._rowDefs.reduce(t,!1);r&&this._forceRenderDataRows();const i=this._headerRowDefs.reduce(t,!1);i&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(t,!1);return s&&this._forceRenderFooterRows(),r||i||s}_switchDataSource(t){this._data=[],RA(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;RA(this.dataSource)?t=this.dataSource.connect(this):h1(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=q(this.dataSource)),this._renderChangeSubscription=t.pipe(Tc(this._onDestroy)).subscribe(r=>{this._data=r||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,r)=>this._renderRow(this._headerRowOutlet,t,r)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,r)=>this._renderRow(this._footerRowOutlet,t,r)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,r){const i=Array.from(r.columns||[]).map(a=>this._columnDefsByName.get(a)),s=i.map(a=>a.sticky),o=i.map(a=>a.stickyEnd);this._stickyStyler.updateStickyColumns(t,s,o,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const r=[];for(let i=0;i<t.viewContainer.length;i++){const s=t.viewContainer.get(i);r.push(s.rootNodes[0])}return r}_getRowDefs(t,r){if(1==this._rowDefs.length)return[this._rowDefs[0]];let i=[];if(this.multiTemplateDataRows)i=this._rowDefs.filter(s=>!s.when||s.when(r,t));else{let s=this._rowDefs.find(o=>o.when&&o.when(r,t))||this._defaultRowDef;s&&i.push(s)}return i}_getEmbeddedViewArgs(t,r){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:r}}_renderRow(t,r,i,s={}){const o=t.viewContainer.createEmbeddedView(r.template,s,i);return this._renderCellTemplateForItem(r,s),o}_renderCellTemplateForItem(t,r){for(let i of this._getCellTemplates(t))ca.mostRecentCellOutlet&&ca.mostRecentCellOutlet._viewContainer.createEmbeddedView(i,r);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let r=0,i=t.length;r<i;r++){const o=t.get(r).context;o.count=i,o.first=0===r,o.last=r===i-1,o.even=r%2==0,o.odd=!o.even,this.multiTemplateDataRows?(o.dataIndex=this._renderRows[r].dataIndex,o.renderIndex=r):o.index=this._renderRows[r].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,r=>{const i=this._columnDefsByName.get(r);return t.extractCellTemplate(i)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),r=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const i of r){const s=this._document.createElement(i.tag);s.setAttribute("role","rowgroup");for(const o of i.outlets)s.appendChild(o.elementRef.nativeElement);t.appendChild(s)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(r,i)=>r||i.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new qne(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:q()).pipe(Tc(this._onDestroy)).subscribe(r=>{this._stickyStyler.direction=r,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(r=>!r._table||r._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(!t)return;const r=0===this._rowOutlet.viewContainer.length;if(r===this._isShowingNoDataRow)return;const i=this._noDataRowOutlet.viewContainer;if(r){const s=i.createEmbeddedView(t.templateRef),o=s.rootNodes[0];1===s.rootNodes.length&&o?.nodeType===this._document.ELEMENT_NODE&&(o.setAttribute("role","row"),o.classList.add(t._contentClassName))}else i.clear();this._isShowingNoDataRow=r,this._changeDetectorRef.markForCheck()}static#e=this.\u0275fac=function(r){return new(r||n)(U(Go),U(Mp),U(bn),function lc(n){return function Bb(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(qg(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(xn(),n)}("role"),U(hne,8),U(tr),U(gw),U(yg),U(VA),U(Pne),U(HA,12),U(ut,8))};static#t=this.\u0275cmp=ar({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(r,i,s){if(1&r&&(ho(s,bw,5),ho(s,la,5),ho(s,ww,5),ho(s,bg,5),ho(s,Ig,5)),2&r){let o;Cr(o=Tr())&&(i._noDataRow=o.first),Cr(o=Tr())&&(i._contentColumnDefs=o),Cr(o=Tr())&&(i._contentRowDefs=o),Cr(o=Tr())&&(i._contentHeaderRowDefs=o),Cr(o=Tr())&&(i._contentFooterRowDefs=o)}},viewQuery:function(r,i){if(1&r&&(Ha(Iw,7),Ha(Cw,7),Ha(Tw,7),Ha(Dw,7)),2&r){let s;Cr(s=Tr())&&(i._rowOutlet=s.first),Cr(s=Tr())&&(i._headerRowOutlet=s.first),Cr(s=Tr())&&(i._footerRowOutlet=s.first),Cr(s=Tr())&&(i._noDataRowOutlet=s.first)}},hostAttrs:["ngSkipHydration","",1,"cdk-table"],hostVars:2,hostBindings:function(r,i){2&r&&Dd("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[it([{provide:jh,useExisting:n},{provide:yg,useClass:zj},{provide:VA,useClass:Xj},{provide:HA,useValue:null}])],ngContentSelectors:One,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(r,i){1&r&&(d0(kne),Ep(0),Ep(1,1),lo(2,0)(3,1)(4,2)(5,3))},dependencies:[Iw,Cw,Tw,Dw],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2})}return n})();function Aw(n,e){return n.concat(Array.from(e))}let Wne=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({imports:[Nne]})}return n})();const t$=new Set;let iu,tre=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):rre}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function nre(n,e){if(!t$.has(n))try{iu||(iu=document.createElement("style"),e&&(iu.nonce=e),iu.setAttribute("type","text/css"),document.head.appendChild(iu)),iu.sheet&&(iu.sheet.insertRule(`@media ${n} {body{ }}`,0),t$.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ne(gw),ne(SI,8))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rre(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let ire=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new j}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return n$($j(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=lv(n$($j(t)).map(o=>this._registerQuery(o).observable));return s=kd(s.pipe(Dr(1)),s.pipe(function Jne(n){return ur((e,t)=>n<=t)}(1),function ere(n,e=Gd){return $((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const u=s;s=null,r.next(u)}};function l(){const u=o+n,h=e.now();if(h<u)return i=this.schedule(void 0,u-h),void r.add(i);a()}t.subscribe(fe(r,u=>{s=u,o=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}(0))),s.pipe(_e(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:u})=>{a.matches=a.matches||l,a.breakpoints[u]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new Je(o=>{const a=l=>this._zone.run(()=>o.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Lp(r),_e(({matches:o})=>({query:t,matches:o})),Tc(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(r){return new(r||n)(ne(tre),ne(ut))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function n$(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const o$="cdk-high-contrast-black-on-white",a$="cdk-high-contrast-white-on-black",zA="cdk-high-contrast-active";let mre=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=me(ire).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(zA,o$,a$),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(zA,o$):2===r&&t.add(zA,a$)}}static#e=this.\u0275fac=function(r){return new(r||n)(ne(gw),ne(tr))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const _re=new se("mat-sanity-checks",{providedIn:"root",factory:function gre(){return!0}});let zh=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function _ne(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(ne(mre),ne(_re,8),ne(tr))};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({imports:[pw,pw]})}return n})();const u$=Eg({passive:!0,capture:!0});class Ere{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=function gne(n){return n.composedPath?n.composedPath()[0]:n.target}(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,u$)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,u$)))}}class qA{static#e=this._eventManager=new Ere;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Hj(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...d$,...r.animation},o=r.radius||function bre(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,l=t-i.top,u=s.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=a-o+"px",h.style.top=l-o+"px",h.style.height=2*o+"px",h.style.width=2*o+"px",null!=r.color&&(h.style.backgroundColor=r.color),h.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(h);const m=window.getComputedStyle(h),y=m.transitionDuration,E="none"===m.transitionProperty||"0s"===y||"0s, 0s"===y||0===i.width&&0===i.height,b=new vre(this,h,r,E);h.style.transform="scale3d(1, 1, 1)",b.state=0,r.persistent||(this._mostRecentTransientRipple=b);return!E&&(u||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const N=()=>this._finishRippleTransition(b),R=()=>this._destroyRipple(b);h.addEventListener("transitionend",N),h.addEventListener("transitioncancel",R)}),this._activeRipples.set(b,null),(E||!u)&&this._finishRippleTransition(b),b}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...d$,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Hj(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,f$.forEach(r=>{qA._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{p$.forEach(t=>{this._triggerElement.addEventListener(t,this,h$)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function hre(n){return 0===n.buttons||0===n.detail}(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function fre(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(f$.forEach(t=>qA._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&p$.forEach(t=>e.removeEventListener(t,this,h$)))}}const Ire=[[["caption"]],[["colgroup"],["col"]]],Cre=["caption","colgroup, col"];let m$=(()=>{class n extends Sw{constructor(){super(...arguments),this.stickyCssClass="mat-mdc-table-sticky",this.needsPositionStickyOnElement=!1}ngOnInit(){super.ngOnInit(),this._isNativeHtmlTable&&this._elementRef.nativeElement.querySelector("tbody").classList.add("mdc-data-table__content")}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=yt(n)))(i||n)}}();static#t=this.\u0275cmp=ar({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:["ngSkipHydration","",1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(r,i){2&r&&Dd("mdc-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[it([{provide:Sw,useExisting:n},{provide:jh,useExisting:n},{provide:VA,useClass:Xj},{provide:yg,useClass:zj},{provide:HA,useValue:null}]),ke],ngContentSelectors:Cre,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(r,i){1&r&&(d0(Ire),Ep(0),Ep(1,1),lo(2,0)(3,1)(4,2)(5,3))},dependencies:[Iw,Cw,Tw,Dw],styles:[".mat-mdc-table-sticky{position:sticky !important}.mdc-data-table{-webkit-overflow-scrolling:touch;display:inline-flex;flex-direction:column;box-sizing:border-box;position:relative}.mdc-data-table__table-container{-webkit-overflow-scrolling:touch;overflow-x:auto;width:100%}.mdc-data-table__table{min-width:100%;border:0;white-space:nowrap;border-spacing:0;table-layout:fixed}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell,.mdc-data-table__cell[dir=rtl]{text-align:right}.mdc-data-table__cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__cell--numeric,.mdc-data-table__cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell{box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mdc-data-table__header-cell,.mdc-data-table__header-cell[dir=rtl]{text-align:right}.mdc-data-table__header-cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__header-cell--numeric,.mdc-data-table__header-cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell-wrapper{align-items:center;display:inline-flex;vertical-align:middle}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px 0 16px}.mdc-data-table__header-cell--checkbox,.mdc-data-table__cell--checkbox{padding-left:4px;padding-right:0}[dir=rtl] .mdc-data-table__header-cell--checkbox,[dir=rtl] .mdc-data-table__cell--checkbox,.mdc-data-table__header-cell--checkbox[dir=rtl],.mdc-data-table__cell--checkbox[dir=rtl]{padding-left:0;padding-right:4px}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table{--mat-table-row-item-outline-width:1px;table-layout:auto;white-space:normal;background-color:var(--mat-table-background-color)}.mat-mdc-header-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-header-container-height, 56px);color:var(--mat-table-header-headline-color, rgba(0, 0, 0, 0.87));font-family:var(--mat-table-header-headline-font, Roboto, sans-serif);line-height:var(--mat-table-header-headline-line-height);font-size:var(--mat-table-header-headline-size, 14px);font-weight:var(--mat-table-header-headline-weight, 500)}.mat-mdc-row{height:var(--mat-table-row-item-container-height, 52px);color:var(--mat-table-row-item-label-text-color, rgba(0, 0, 0, 0.87))}.mat-mdc-row,.mdc-data-table__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-table-row-item-label-text-font, Roboto, sans-serif);line-height:var(--mat-table-row-item-label-text-line-height);font-size:var(--mat-table-row-item-label-text-size, 14px);font-weight:var(--mat-table-row-item-label-text-weight)}.mat-mdc-footer-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-footer-container-height, 52px);color:var(--mat-table-row-item-label-text-color, rgba(0, 0, 0, 0.87));font-family:var(--mat-table-footer-supporting-text-font, Roboto, sans-serif);line-height:var(--mat-table-footer-supporting-text-line-height);font-size:var(--mat-table-footer-supporting-text-size, 14px);font-weight:var(--mat-table-footer-supporting-text-weight);letter-spacing:var(--mat-table-footer-supporting-text-tracking)}.mat-mdc-header-cell{border-bottom-color:var(--mat-table-row-item-outline-color, rgba(0, 0, 0, 0.12));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-header-headline-tracking);font-weight:inherit;line-height:inherit}.mat-mdc-cell{border-bottom-color:var(--mat-table-row-item-outline-color, rgba(0, 0, 0, 0.12));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-row-item-label-text-tracking);line-height:inherit}.mdc-data-table__row:last-child .mat-mdc-cell{border-bottom:none}.mat-mdc-footer-cell{letter-spacing:var(--mat-table-row-item-label-text-tracking)}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2})}return n})(),GA=(()=>{class n extends $h{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=yt(n)))(i||n)}}();static#t=this.\u0275dir=ce({type:n,selectors:[["","matCellDef",""]],features:[it([{provide:$h,useExisting:n}]),ke]})}return n})(),WA=(()=>{class n extends Hh{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=yt(n)))(i||n)}}();static#t=this.\u0275dir=ce({type:n,selectors:[["","matHeaderCellDef",""]],features:[it([{provide:Hh,useExisting:n}]),ke]})}return n})(),ZA=(()=>{class n extends la{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=yt(n)))(i||n)}}();static#t=this.\u0275dir=ce({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[it([{provide:la,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),ke]})}return n})(),KA=(()=>{class n extends FA{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=yt(n)))(i||n)}}();static#t=this.\u0275dir=ce({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],features:[ke]})}return n})(),QA=(()=>{class n extends LA{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=yt(n)))(i||n)}}();static#t=this.\u0275dir=ce({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],features:[ke]})}return n})(),g$=(()=>{class n extends bg{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=yt(n)))(i||n)}}();static#t=this.\u0275dir=ce({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[it([{provide:bg,useExisting:n}]),ke]})}return n})(),_$=(()=>{class n extends ww{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=yt(n)))(i||n)}}();static#t=this.\u0275dir=ce({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[it([{provide:ww,useExisting:n}]),ke]})}return n})(),y$=(()=>{class n extends UA{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=yt(n)))(i||n)}}();static#t=this.\u0275cmp=ar({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],features:[it([{provide:UA,useExisting:n}]),ke],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(r,i){1&r&&lo(0,0)},dependencies:[ca],encapsulation:2})}return n})(),v$=(()=>{class n extends $A{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=yt(n)))(i||n)}}();static#t=this.\u0275cmp=ar({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],features:[it([{provide:$A,useExisting:n}]),ke],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(r,i){1&r&&lo(0,0)},dependencies:[ca],encapsulation:2})}return n})(),Pre=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({imports:[zh,Wne,zh]})}return n})();function kre(n,e){1&n&&(tt(0,"th",18),St(1,"ID"),vt())}function Ore(n,e){if(1&n&&(tt(0,"td",19),St(1),vt()),2&n){const t=e.$implicit;Bn(1),Sd(t.id)}}function Fre(n,e){1&n&&(tt(0,"th",18),St(1,"T\xedtulo"),vt())}function Lre(n,e){if(1&n&&(tt(0,"td",19),St(1),vt()),2&n){const t=e.$implicit;Bn(1),Sd(t.titulo)}}function Vre(n,e){1&n&&(tt(0,"th",18),St(1,"Descripci\xf3n"),vt())}function Bre(n,e){if(1&n&&(tt(0,"td",19),St(1),vt()),2&n){const t=e.$implicit;Bn(1),Sd(t.descripcion)}}function Ure(n,e){1&n&&(tt(0,"th",18),St(1,"Fecha de Creaci\xf3n"),vt())}function jre(n,e){if(1&n&&(tt(0,"td",19),St(1),function ak(n,e){const t=ct();let r;const i=n+et;t.firstCreatePass?(r=function n5(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=ns(r.type)),a=or(U);try{const l=ic(!1),u=s();return ic(l),function L3(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,te(),i,u),u}finally{or(a)}}(2,"date"),vt()),2&n){const t=e.$implicit;Bn(1),Sd(lk(2,1,t.fechaCreacion,"dd/MM/yyyy"))}}function $re(n,e){1&n&&(tt(0,"th",18),St(1,"Acciones"),vt())}function Hre(n,e){if(1&n){const t=My();tt(0,"td",19)(1,"button",20),on("click",function(){const s=is(t).$implicit;return ss(wi().eliminarNota(s.titulo))}),St(2,"Eliminar"),vt(),tt(3,"button",21),on("click",function(){const s=is(t).$implicit;return ss(wi().seleccionarNota(s))}),St(4,"Editar"),vt()()}}function zre(n,e){1&n&&_c(0,"tr",22)}function qre(n,e){1&n&&_c(0,"tr",23)}function Gre(n,e){if(1&n){const t=My();tt(0,"div")(1,"h3"),St(2,"Editar Nota"),vt(),tt(3,"label"),St(4,"ID: "),tt(5,"input",1),on("ngModelChange",function(i){return is(t),ss(wi().notaSeleccionada.id=i)}),vt()(),tt(6,"label"),St(7,"T\xedtulo: "),tt(8,"input",1),on("ngModelChange",function(i){return is(t),ss(wi().notaSeleccionada.titulo=i)}),vt()(),tt(9,"label"),St(10,"Descripci\xf3n: "),tt(11,"input",1),on("ngModelChange",function(i){return is(t),ss(wi().notaSeleccionada.descripcion=i)}),vt()(),tt(12,"label"),St(13,"Fecha Creaci\xf3n: "),tt(14,"input",1),on("ngModelChange",function(i){return is(t),ss(wi().notaSeleccionada.fechaCreacion=i)}),vt()(),tt(15,"button",6),on("click",function(){return is(t),ss(wi().editarNota())}),St(16,"Guardar Cambios"),vt(),tt(17,"button",6),on("click",function(){return is(t),ss(wi().cancelarEdicion())}),St(18,"Cancelar"),vt()()}if(2&n){const t=wi();Bn(5),ki("ngModel",t.notaSeleccionada.id),Bn(3),ki("ngModel",t.notaSeleccionada.titulo),Bn(3),ki("ngModel",t.notaSeleccionada.descripcion),Bn(3),ki("ngModel",t.notaSeleccionada.fechaCreacion)}}let Wre=(()=>{class n{constructor(t,r){this.notasService=t,this.router=r,this.notas=[],this.notaSeleccionada=null,this.nuevoTitulo="",this.nuevaDescripcion="",this.nuevaFechaCreacion="",this.columnas=["id","titulo","descripcion","fechaCreacion","acciones"]}seleccionarNota(t){this.notaSeleccionada={...t}}agregarNota(t,r,i){const o={id:this.obtenerNuevoId(),titulo:t,descripcion:r,fechaCreacion:this.validarFecha(i)};this.notasService.agregarNota(o),this.cargarNotas(),this.limpiarCampos()}obtenerNuevoId(){const t=this.notas.map(r=>r.id);return 0===t.length?1:Math.max(...t)+1}validarFecha(t){const r=new Date(t);return isNaN(r.getTime())?"":t}editarNota(){if(this.notaSeleccionada){const t=Number(this.notaSeleccionada.id);isNaN(t)||(this.notasService.editarNota(t,this.notaSeleccionada),this.notaSeleccionada=null,this.cargarNotas(),console.log("Editado "+t))}}cancelarEdicion(){this.notaSeleccionada=null}eliminarNota(t){this.notasService.eliminarNotaPorTitulo(t),console.log("Operaci\xf3n de eliminaci\xf3n completada."),this.cargarNotas()}cargarNotas(){this.notasService.getNotas().subscribe(t=>{this.notas=t})}limpiarCampos(){this.nuevoTitulo="",this.nuevaDescripcion="",this.nuevaFechaCreacion="",console.log("Se est\xe1 limpiando")}static#e=this.\u0275fac=function(r){return new(r||n)(U(lte),U(Fi))};static#t=this.\u0275cmp=ar({type:n,selectors:[["app-notas"]],decls:43,vars:7,consts:[[1,"container"],[3,"ngModel","ngModelChange"],["titulo",""],["descripcion",""],["type","date",3,"ngModel","ngModelChange"],["fechaCreacion",""],[3,"click"],[1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","titulo"],["matColumnDef","descripcion"],["matColumnDef","fechaCreacion"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(r,i){if(1&r){const s=My();tt(0,"div",0)(1,"h2"),St(2,"Notas"),vt(),tt(3,"h3"),St(4,"Crear Nota"),vt(),tt(5,"label"),St(6,"T\xedtulo: "),tt(7,"input",1,2),on("ngModelChange",function(a){return i.nuevoTitulo=a}),vt()(),tt(9,"label"),St(10,"Descripci\xf3n: "),tt(11,"input",1,3),on("ngModelChange",function(a){return i.nuevaDescripcion=a}),vt()(),tt(13,"label"),St(14,"Fecha de Creaci\xf3n: "),tt(15,"input",4,5),on("ngModelChange",function(a){return i.nuevaFechaCreacion=a}),vt()(),tt(17,"button",6),on("click",function(){is(s);const a=Ry(8),l=Ry(12),u=Ry(16);return ss(i.agregarNota(a.value,l.value,u.value))}),St(18,"Agregar"),vt(),tt(19,"button",6),on("click",function(){return i.cargarNotas()}),St(20,"Listar"),vt(),_c(21,"br"),tt(22,"h3"),St(23,"Listar Nota"),vt(),tt(24,"mat-table",7),oo(25,8),cr(26,kre,2,0,"th",9),cr(27,Ore,2,1,"td",10),ao(),oo(28,11),cr(29,Fre,2,0,"th",9),cr(30,Lre,2,1,"td",10),ao(),oo(31,12),cr(32,Vre,2,0,"th",9),cr(33,Bre,2,1,"td",10),ao(),oo(34,13),cr(35,Ure,2,0,"th",9),cr(36,jre,3,4,"td",10),ao(),oo(37,14),cr(38,$re,2,0,"th",9),cr(39,Hre,5,0,"td",10),ao(),cr(40,zre,1,0,"tr",15),cr(41,qre,1,0,"tr",16),vt(),cr(42,Gre,19,4,"div",17),vt()}2&r&&(Bn(7),ki("ngModel",i.nuevoTitulo),Bn(4),ki("ngModel",i.nuevaDescripcion),Bn(4),ki("ngModel",i.nuevaFechaCreacion),Bn(9),ki("dataSource",i.notas),Bn(16),ki("matHeaderRowDef",i.columnas),Bn(1),ki("matRowDefColumns",i.columnas),Bn(1),ki("ngIf",i.notaSeleccionada))},dependencies:[LO,rw,cj,IA,m$,WA,g$,ZA,GA,_$,KA,QA,y$,v$,UO],styles:["h2[_ngcontent-%COMP%]{color:#d41616;list-style-type:none;text-align:center}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}input[_ngcontent-%COMP%]{width:100%;padding:8px;box-sizing:border-box;margin-bottom:10px}button[_ngcontent-%COMP%]{background-color:#24ab28;color:#fff;padding:10px;border:none}button[_ngcontent-%COMP%]:hover{background-color:#1e6722}"]})}return n})(),Zre=(()=>{class n{constructor(){this.title="pwa"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ar({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(r,i){1&r&&_c(0,"app-notas")(1,"router-outlet")},dependencies:[GC,Wre]})}return n})();class E${}class Kre{}const ua="*";function w$(n,e=null){return{type:2,steps:n,options:e}}function xw(n){return{type:6,styles:n,offset:null}}class Tg{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class b${constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}let eie=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({providers:[eie]})}return n})(),XA=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({imports:[zh,$O,tie,zh]})}return n})(),lie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({})}return n})(),cie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({imports:[zh,XA,XA,lie,zh]})}return n})();function I$(n){return new k(3e3,!1)}function bl(n){switch(n.length){case 0:return new Tg;case 1:return n[0];default:return new b$(n)}}function C$(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(l=>{const u=l.get("offset"),h=u==o,m=h&&a||new Map;l.forEach((g,y)=>{let E=y,b=g;if("offset"!==y)switch(E=n.normalizePropertyName(E,i),b){case"!":b=t.get(y);break;case ua:b=r.get(y);break;default:b=n.normalizeStyleValue(y,E,b,i)}m.set(E,b)}),h||s.push(m),a=m,o=u}),i.length)throw function Pie(n){return new k(3502,!1)}();return s}function JA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&ex(t,"start",n)));break;case"done":n.onDone(()=>r(t&&ex(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&ex(t,"destroy",n)))}}function ex(n,e,t){const s=tx(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function tx(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function ji(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function T$(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const zie=(()=>typeof document>"u"?null:document.documentElement)();function nx(n){const e=n.parentNode||n.host||null;return e===zie?null:e}let su=null,D$=!1;function S$(n,e){for(;e;){if(e===n)return!0;e=nx(e)}return!1}function A$(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let x$=(()=>{class n{validateStyleProperty(t){return function Gie(n){su||(su=function Wie(){return typeof document<"u"?document.body:null}()||{},D$=!!su.style&&"WebkitAppearance"in su.style);let e=!0;return su.style&&!function qie(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in su.style,!e&&D$&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in su.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return S$(t,r)}getParentElement(t){return nx(t)}query(t,r,i){return A$(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new Tg(i,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),rx=(()=>{class n{static#e=this.NOOP=new x$}return n})();const Zie=1e3,ix="ng-enter",Rw="ng-leave",Mw="ng-trigger",Pw=".ng-trigger",M$="ng-animating",sx=".ng-animating";function da(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:ox(parseFloat(e[1]),e[2])}function ox(n,e){return"s"===e?n*Zie:n}function Nw(n,e,t){return n.hasOwnProperty("duration")?n:function Qie(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(I$()),{duration:0,delay:0,easing:""};i=ox(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=ox(parseFloat(l),a[4]));const u=a[5];u&&(o=u)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(function uie(){return new k(3100,!1)}()),a=!0),s<0&&(e.push(function die(){return new k(3101,!1)}()),a=!0),a&&e.splice(l,0,I$())}return{duration:i,delay:s,easing:o}}(n,e,t)}function Dg(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function P$(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Il(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function So(n,e,t){e.forEach((r,i)=>{const s=lx(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function ou(n,e){e.forEach((t,r)=>{const i=lx(r);n.style[i]=""})}function Sg(n){return Array.isArray(n)?1==n.length?n[0]:w$(n):n}const ax=new RegExp("{{\\s*(.+?)\\s*}}","g");function k$(n){let e=[];if("string"==typeof n){let t;for(;t=ax.exec(n);)e.push(t[1]);ax.lastIndex=0}return e}function Ag(n,e,t){const r=n.toString(),i=r.replace(ax,(s,o)=>{let a=e[o];return null==a&&(t.push(function fie(n){return new k(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function kw(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Jie=/-+([a-z0-9])/g;function lx(n){return n.replace(Jie,(...e)=>e[1].toUpperCase())}function $i(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function pie(n){return new k(3004,!1)}()}}function O$(n,e){return window.getComputedStyle(n)[e]}const Ow="*";function nse(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function rse(n,e,t){if(":"==n[0]){const l=function ise(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Aie(n){return new k(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Sie(n){return new k(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(F$(i,o));"<"==s[0]&&!(i==Ow&&o==Ow)&&e.push(F$(o,i))}(r,t,e)):t.push(n),t}const Fw=new Set(["true","1"]),Lw=new Set(["false","0"]);function F$(n,e){const t=Fw.has(n)||Lw.has(n),r=Fw.has(e)||Lw.has(e);return(i,s)=>{let o=n==Ow||n==i,a=e==Ow||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?Fw.has(n):Lw.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?Fw.has(e):Lw.has(e)),o&&a}}const sse=new RegExp("s*:selfs*,?","g");function cx(n,e,t,r){return new ose(n).build(e,t,r)}class ose{constructor(e){this._driver=e}build(e,t,r){const i=new cse(t);return this._resetContextStyleTimingState(i),$i(this,Sg(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function gie(){return new k(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,u=l.name;u.toString().split(/\s*,\s*/).forEach(h=>{l.name=h,s.push(this.visitState(l,t))}),l.name=u}else if(1==a.type){const l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(function _ie(){return new k(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{k$(l).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&(kw(s.values()),t.errors.push(function yie(n,e){return new k(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=$i(this,Sg(e.animation),t);return{type:1,matchers:nse(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:au(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>$i(this,r,t)),options:au(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=$i(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:au(e.options)}}visitAnimate(e,t){const r=function dse(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return ux(Nw(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=ux(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=Nw(t,e);return ux(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:xw({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const u={};r.easing&&(u.easing=r.easing),o=xw(u)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===ua?r.push(a):t.errors.push(new k(3002,!1)):r.push(P$(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const u=t.collectedStyles.get(t.currentQuerySelector),h=u.get(l);let m=!0;h&&(s!=i&&s>=h.startTime&&i<=h.endTime&&(t.errors.push(function Eie(n,e,t,r,i){return new k(3010,!1)}()),m=!1),s=h.startTime),m&&u.set(l,{startTime:s,endTime:i}),t.options&&function Xie(n,e,t){const r=e.params||{},i=k$(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function hie(n){return new k(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function wie(){return new k(3011,!1)}()),r;let s=0;const o=[];let a=!1,l=!1,u=0;const h=e.steps.map(N=>{const R=this._makeStyleAst(N,t);let L=null!=R.offset?R.offset:function use(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(R.styles),X=0;return null!=L&&(s++,X=R.offset=L),l=l||X<0||X>1,a=a||X<u,u=X,o.push(X),R});l&&t.errors.push(function bie(){return new k(3012,!1)}()),a&&t.errors.push(function Iie(){return new k(3200,!1)}());const m=e.steps.length;let g=0;s>0&&s<m?t.errors.push(function Cie(){return new k(3202,!1)}()):0==s&&(g=1/(m-1));const y=m-1,E=t.currentTime,b=t.currentAnimateTimings,C=b.duration;return h.forEach((N,R)=>{const L=g>0?R==y?1:g*R:o[R],X=L*C;t.currentTime=E+b.delay+X,b.duration=X,this._validateStyleAst(N,t),N.offset=L,r.styles.push(N)}),r}visitReference(e,t){return{type:8,animation:$i(this,Sg(e.animation),t),options:au(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:au(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:au(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function ase(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(sse,"")),n=n.replace(/@\*/g,Pw).replace(/@\w+/g,t=>Pw+"-"+t.slice(1)).replace(/:animating/g,sx),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,ji(t.collectedStyles,t.currentQuerySelector,new Map);const a=$i(this,Sg(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:au(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Tie(){return new k(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Nw(e.timings,t.errors,!0);return{type:12,animation:$i(this,Sg(e.animation),t),timings:r,options:null}}}class cse{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function au(n){return n?(n=Dg(n)).params&&(n.params=function lse(n){return n?Dg(n):null}(n.params)):n={},n}function ux(n,e,t){return{duration:n,delay:e,easing:t}}function dx(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class Vw{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const pse=new RegExp(":enter","g"),gse=new RegExp(":leave","g");function hx(n,e,t,r,i,s=new Map,o=new Map,a,l,u=[]){return(new _se).buildKeyframes(n,e,t,r,i,s,o,a,l,u)}class _se{buildKeyframes(e,t,r,i,s,o,a,l,u,h=[]){u=u||new Vw;const m=new fx(e,t,u,i,s,h,[]);m.options=l;const g=l.delay?da(l.delay):0;m.currentTimeline.delayNextStep(g),m.currentTimeline.setStyles([o],null,m.errors,l),$i(this,r,m);const y=m.timelines.filter(E=>E.containsAnimation());if(y.length&&a.size){let E;for(let b=y.length-1;b>=0;b--){const C=y[b];if(C.element===t){E=C;break}}E&&!E.allowOnlyTimelineStyles()&&E.setStyles([a],null,m.errors,l)}return y.length?y.map(E=>E.buildKeyframes()):[dx(t,[],[],[],0,g,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:da(Ag(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?da(r.duration):null,a=null!=r.delay?da(r.delay):null;return 0!==o&&e.forEach(l=>{const u=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),$i(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Bw);const o=da(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>$i(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?da(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),$i(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Nw(t.params?Ag(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?da(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Bw);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((u,h)=>{t.currentQueryIndex=h;const m=t.createSubContext(e.options,u);s&&m.delayNextStep(s),u===t.element&&(l=m.currentTimeline),$i(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,m.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const h=t.currentTimeline;l&&h.delayNextStep(l);const m=h.currentTime;$i(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}}const Bw={};class fx{constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Bw,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Uw(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=da(r.duration)),null!=r.delay&&(i.delay=da(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Ag(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new fx(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Bw,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new yse(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(pse,"."+this._enterClassName)).replace(gse,"."+this._leaveClassName);let u=this._driver.query(this.element,e,1!=r);0!==r&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&0==a.length&&o.push(function Die(n){return new k(3014,!1)}()),a}}class Uw{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Uw(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||ua),this._currentKeyframe.set(t,ua);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function vse(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,ua)}else Il(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const u=Ag(l,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ua),this._updateStyle(a,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const u=Il(a,new Map,this._backFill);u.forEach((h,m)=>{"!"===h?e.add(m):h===ua&&t.add(m)}),r||u.set("offset",l/this.duration),i.push(u)});const s=e.size?kw(e.values()):[],o=t.size?kw(t.values()):[];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return dx(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class yse extends Uw{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,l=Il(e[0]);l.set("offset",0),s.push(l);const u=Il(e[0]);u.set("offset",B$(a)),s.push(u);const h=e.length-1;for(let m=1;m<=h;m++){let g=Il(e[m]);const y=g.get("offset");g.set("offset",B$((t+y*r)/o)),s.push(g)}r=o,t=0,i="",e=s}return dx(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function B$(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class px{}const Ese=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class wse extends px{normalizePropertyName(e,t){return lx(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(Ese.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function mie(n,e){return new k(3005,!1)}())}return o+s}}function U$(n,e,t,r,i,s,o,a,l,u,h,m,g){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:h,totalTime:m,errors:g}}const mx={};class j${constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function bse(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,l,u,h){const m=[],g=this.ast.options&&this.ast.options.params||mx,E=this.buildStyles(r,a&&a.params||mx,m),b=l&&l.params||mx,C=this.buildStyles(i,b,m),N=new Set,R=new Map,L=new Map,X="void"===i,le={params:Ise(b,g),delay:this.ast.options?.delay},Re=h?[]:hx(e,t,this.ast.animation,s,o,E,C,le,u,m);let je=0;if(Re.forEach(mi=>{je=Math.max(mi.duration+mi.delay,je)}),m.length)return U$(t,this._triggerName,r,i,X,E,C,[],[],R,L,je,m);Re.forEach(mi=>{const Si=mi.element,Gw=ji(R,Si,new Set);mi.preStyleProps.forEach(lu=>Gw.add(lu));const Mg=ji(L,Si,new Set);mi.postStyleProps.forEach(lu=>Mg.add(lu)),Si!==t&&N.add(Si)});const Ot=kw(N.values());return U$(t,this._triggerName,r,i,X,E,C,Re,Ot,R,L,je)}}function Ise(n,e){const t=Dg(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Cse{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Dg(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Ag(o,i,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),r.set(a,o)})}),r}}class Dse{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Cse(i.style,i.options&&i.options.params||{},r))}),$$(this.states,"true","1"),$$(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new j$(e,i,this.states))}),this.fallbackTransition=function Sse(n,e,t){return new j$(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function $$(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Ase=new Vw;class xse{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=cx(this._driver,t,r,[]);if(r.length)throw function Nie(n){return new k(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=C$(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=hx(this._driver,t,s,ix,Rw,new Map,new Map,r,Ase,i),o.forEach(h=>{const m=ji(a,h.element,new Map);h.postStyleProps.forEach(g=>m.set(g,null))})):(i.push(function kie(){return new k(3300,!1)}()),o=[]),i.length)throw function Oie(n){return new k(3504,!1)}();a.forEach((h,m)=>{h.forEach((g,y)=>{h.set(y,this._driver.computeStyle(m,y,ua))})});const u=bl(o.map(h=>{const m=a.get(h.element);return this._buildPlayer(h,new Map,m)}));return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Fie(n){return new k(3301,!1)}();return t}listen(e,t,r,i){const s=tx(t,"","","");return JA(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const H$="ng-animate-queued",gx="ng-animate-disabled",kse=[],z$={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ose={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Fs="__ng_removed";class _x{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Bse(n){return n??null}(r?e.value:e),r){const s=Dg(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const xg="void",yx=new _x(xg);class Fse{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,gs(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function Lie(n,e){return new k(3302,!1)}();if(null==r||0==r.length)throw function Vie(n){return new k(3303,!1)}();if(!function Use(n){return"start"==n||"done"==n}(r))throw function Bie(n,e){return new k(3400,!1)}();const s=ji(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=ji(this._engine.statesByElement,e,new Map);return a.has(t)||(gs(e,Mw),gs(e,Mw+"-"+t),a.set(t,yx)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Uie(n){return new k(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new vx(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(gs(e,Mw),gs(e,Mw+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const u=new _x(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),a.set(t,u),l||(l=yx),u.value!==xg&&l.value===u.value){if(!function Hse(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,u.params)){const b=[],C=s.matchStyles(l.value,l.params,b),N=s.matchStyles(u.value,u.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{ou(e,C),So(e,N)})}return}const g=ji(this._engine.playersByElement,e,[]);g.forEach(b=>{b.namespaceId==this.id&&b.triggerName==t&&b.queued&&b.destroy()});let y=s.matchTransition(l.value,u.value,e,u.params),E=!1;if(!y){if(!i)return;y=s.fallbackTransition,E=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:l,toState:u,player:o,isFallbackTransition:E}),E||(gs(e,H$),o.onStart(()=>{qh(e,H$)})),o.onDone(()=>{let b=this.players.indexOf(o);b>=0&&this.players.splice(b,1);const C=this._engine.playersByElement.get(e);if(C){let N=C.indexOf(o);N>=0&&C.splice(N,1)}}),this.players.push(o),g.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Pw,!0);r.forEach(i=>{if(i[Fs])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,u)=>{if(o.set(u,l.value),this._triggers.has(u)){const h=this.trigger(e,u,xg,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&bl(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers.get(o).fallbackTransition,u=r.get(o)||yx,h=new _x(xg),m=new vx(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:u,toState:h,player:m,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Fs];(!s||s===z$)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){gs(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=tx(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,JA(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class Lse{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Fse(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=i.get(a);if(l){const u=r.indexOf(l);r.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(jw(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!jw(t))return;const s=t[Fs];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),gs(e,gx)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),qh(e,gx))}removeNode(e,t,r){if(jw(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Fs]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return jw(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Pw,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,sx,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return bl(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Fs];if(t&&t.setForRemoval){if(e[Fs]=z$,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(gx)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)gs(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?bl(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function jie(n){return new k(3402,!1)}()}_flushAnimations(e,t){const r=new Vw,i=[],s=new Map,o=[],a=new Map,l=new Map,u=new Map,h=new Set;this.disabledNodes.forEach(Se=>{h.add(Se);const Pe=this.driver.query(Se,".ng-animate-queued",!0);for(let Be=0;Be<Pe.length;Be++)h.add(Pe[Be])});const m=this.bodyNode,g=Array.from(this.statesByElement.keys()),y=W$(g,this.collectedEnterElements),E=new Map;let b=0;y.forEach((Se,Pe)=>{const Be=ix+b++;E.set(Pe,Be),Se.forEach(Tt=>gs(Tt,Be))});const C=[],N=new Set,R=new Set;for(let Se=0;Se<this.collectedLeaveElements.length;Se++){const Pe=this.collectedLeaveElements[Se],Be=Pe[Fs];Be&&Be.setForRemoval&&(C.push(Pe),N.add(Pe),Be.hasAnimation?this.driver.query(Pe,".ng-star-inserted",!0).forEach(Tt=>N.add(Tt)):R.add(Pe))}const L=new Map,X=W$(g,Array.from(N));X.forEach((Se,Pe)=>{const Be=Rw+b++;L.set(Pe,Be),Se.forEach(Tt=>gs(Tt,Be))}),e.push(()=>{y.forEach((Se,Pe)=>{const Be=E.get(Pe);Se.forEach(Tt=>qh(Tt,Be))}),X.forEach((Se,Pe)=>{const Be=L.get(Pe);Se.forEach(Tt=>qh(Tt,Be))}),C.forEach(Se=>{this.processLeaveNode(Se)})});const le=[],Re=[];for(let Se=this._namespaceList.length-1;Se>=0;Se--)this._namespaceList[Se].drainQueuedTransitions(t).forEach(Be=>{const Tt=Be.player,_r=Be.element;if(le.push(Tt),this.collectedEnterElements.length){const Kr=_r[Fs];if(Kr&&Kr.setForMove){if(Kr.previousTriggersValues&&Kr.previousTriggersValues.has(Be.triggerName)){const cu=Kr.previousTriggersValues.get(Be.triggerName),_s=this.statesByElement.get(Be.element);if(_s&&_s.has(Be.triggerName)){const Ww=_s.get(Be.triggerName);Ww.value=cu,_s.set(Be.triggerName,Ww)}}return void Tt.destroy()}}const Ao=!m||!this.driver.containsElement(m,_r),Hi=L.get(_r),Tl=E.get(_r),wn=this._buildInstruction(Be,r,Tl,Hi,Ao);if(wn.errors&&wn.errors.length)return void Re.push(wn);if(Ao)return Tt.onStart(()=>ou(_r,wn.fromStyles)),Tt.onDestroy(()=>So(_r,wn.toStyles)),void i.push(Tt);if(Be.isFallbackTransition)return Tt.onStart(()=>ou(_r,wn.fromStyles)),Tt.onDestroy(()=>So(_r,wn.toStyles)),void i.push(Tt);const fH=[];wn.timelines.forEach(Kr=>{Kr.stretchStartingKeyframe=!0,this.disabledNodes.has(Kr.element)||fH.push(Kr)}),wn.timelines=fH,r.append(_r,wn.timelines),o.push({instruction:wn,player:Tt,element:_r}),wn.queriedElements.forEach(Kr=>ji(a,Kr,[]).push(Tt)),wn.preStyleProps.forEach((Kr,cu)=>{if(Kr.size){let _s=l.get(cu);_s||l.set(cu,_s=new Set),Kr.forEach((Ww,Ix)=>_s.add(Ix))}}),wn.postStyleProps.forEach((Kr,cu)=>{let _s=u.get(cu);_s||u.set(cu,_s=new Set),Kr.forEach((Ww,Ix)=>_s.add(Ix))})});if(Re.length){const Se=[];Re.forEach(Pe=>{Se.push(function $ie(n,e){return new k(3505,!1)}())}),le.forEach(Pe=>Pe.destroy()),this.reportError(Se)}const je=new Map,Ot=new Map;o.forEach(Se=>{const Pe=Se.element;r.has(Pe)&&(Ot.set(Pe,Pe),this._beforeAnimationBuild(Se.player.namespaceId,Se.instruction,je))}),i.forEach(Se=>{const Pe=Se.element;this._getPreviousPlayers(Pe,!1,Se.namespaceId,Se.triggerName,null).forEach(Tt=>{ji(je,Pe,[]).push(Tt),Tt.destroy()})});const mi=C.filter(Se=>K$(Se,l,u)),Si=new Map;G$(Si,this.driver,R,u,ua).forEach(Se=>{K$(Se,l,u)&&mi.push(Se)});const Mg=new Map;y.forEach((Se,Pe)=>{G$(Mg,this.driver,new Set(Se),l,"!")}),mi.forEach(Se=>{const Pe=Si.get(Se),Be=Mg.get(Se);Si.set(Se,new Map([...Pe?.entries()??[],...Be?.entries()??[]]))});const lu=[],dH=[],hH={};o.forEach(Se=>{const{element:Pe,player:Be,instruction:Tt}=Se;if(r.has(Pe)){if(h.has(Pe))return Be.onDestroy(()=>So(Pe,Tt.toStyles)),Be.disabled=!0,Be.overrideTotalTime(Tt.totalTime),void i.push(Be);let _r=hH;if(Ot.size>1){let Hi=Pe;const Tl=[];for(;Hi=Hi.parentNode;){const wn=Ot.get(Hi);if(wn){_r=wn;break}Tl.push(Hi)}Tl.forEach(wn=>Ot.set(wn,_r))}const Ao=this._buildAnimation(Be.namespaceId,Tt,je,s,Mg,Si);if(Be.setRealPlayer(Ao),_r===hH)lu.push(Be);else{const Hi=this.playersByElement.get(_r);Hi&&Hi.length&&(Be.parentPlayer=bl(Hi)),i.push(Be)}}else ou(Pe,Tt.fromStyles),Be.onDestroy(()=>So(Pe,Tt.toStyles)),dH.push(Be),h.has(Pe)&&i.push(Be)}),dH.forEach(Se=>{const Pe=s.get(Se.element);if(Pe&&Pe.length){const Be=bl(Pe);Se.setRealPlayer(Be)}}),i.forEach(Se=>{Se.parentPlayer?Se.syncPlayerEvents(Se.parentPlayer):Se.destroy()});for(let Se=0;Se<C.length;Se++){const Pe=C[Se],Be=Pe[Fs];if(qh(Pe,Rw),Be&&Be.hasAnimation)continue;let Tt=[];if(a.size){let Ao=a.get(Pe);Ao&&Ao.length&&Tt.push(...Ao);let Hi=this.driver.query(Pe,sx,!0);for(let Tl=0;Tl<Hi.length;Tl++){let wn=a.get(Hi[Tl]);wn&&wn.length&&Tt.push(...wn)}}const _r=Tt.filter(Ao=>!Ao.destroyed);_r.length?jse(this,Pe,_r):this.processLeaveNode(Pe)}return C.length=0,lu.forEach(Se=>{this.players.push(Se),Se.onDone(()=>{Se.destroy();const Pe=this.players.indexOf(Se);this.players.splice(Pe,1)}),Se.play()}),lu}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==xg;a.forEach(u=>{u.queued||!l&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const u=l.element,h=u!==s,m=ji(r,u,[]);this._getPreviousPlayers(u,h,o,a,t.toState).forEach(y=>{const E=y.getRealPlayer();E.beforeDestroy&&E.beforeDestroy(),y.destroy(),m.push(y)})}ou(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,l=t.element,u=[],h=new Set,m=new Set,g=t.timelines.map(E=>{const b=E.element;h.add(b);const C=b[Fs];if(C&&C.removedBeforeQueried)return new Tg(E.duration,E.delay);const N=b!==l,R=function $se(n){const e=[];return Z$(n,e),e}((r.get(b)||kse).map(je=>je.getRealPlayer())).filter(je=>!!je.element&&je.element===b),L=s.get(b),X=o.get(b),le=C$(this._normalizer,E.keyframes,L,X),Re=this._buildPlayer(E,le,R);if(E.subTimeline&&i&&m.add(b),N){const je=new vx(e,a,b);je.setRealPlayer(Re),u.push(je)}return Re});u.forEach(E=>{ji(this.playersByQueriedElement,E.element,[]).push(E),E.onDone(()=>function Vse(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,E.element,E))}),h.forEach(E=>gs(E,M$));const y=bl(g);return y.onDestroy(()=>{h.forEach(E=>qh(E,M$)),So(l,t.toStyles)}),m.forEach(E=>{ji(i,E,[]).push(y)}),y}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Tg(e.duration,e.delay)}}class vx{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Tg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>JA(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ji(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function jw(n){return n&&1===n.nodeType}function q$(n,e){const t=n.style.display;return n.style.display=e??"none",t}function G$(n,e,t,r,i){const s=[];t.forEach(l=>s.push(q$(l)));const o=[];r.forEach((l,u)=>{const h=new Map;l.forEach(m=>{const g=e.computeStyle(u,m,i);h.set(m,g),(!g||0==g.length)&&(u[Fs]=Ose,o.push(u))}),n.set(u,h)});let a=0;return t.forEach(l=>q$(l,s[a++])),o}function W$(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const u=a.parentNode;return l=t.has(u)?u:i.has(u)?1:o(u),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function gs(n,e){n.classList?.add(e)}function qh(n,e){n.classList?.remove(e)}function jse(n,e,t){bl(t).onDone(()=>n.processLeaveNode(e))}function Z$(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof b$?Z$(r.players,e):e.push(r)}}function K$(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class $w{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Lse(e,t,r),this._timelineEngine=new xse(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],h=cx(this._driver,s,l,[]);if(l.length)throw function Mie(n,e){return new k(3404,!1)}();a=function Tse(n,e,t){return new Dse(n,e,t)}(i,h,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=T$(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=T$(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let qse=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&So(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(So(this._element,this._initialStyles),this._endStyles&&(So(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ou(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ou(this._element,this._endStyles),this._endStyles=null),So(this._element,this._initialStyles),this._state=3)}}return n})();function Ex(n){let e=null;return n.forEach((t,r)=>{(function Gse(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Q${constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:O$(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Wse{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return S$(e,t)}getParentElement(e){return nx(e)}query(e,t,r){return A$(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const u=new Map,h=o.filter(y=>y instanceof Q$);(function ese(n,e){return 0===n||0===e})(r,i)&&h.forEach(y=>{y.currentSnapshot.forEach((E,b)=>u.set(b,E))});let m=function Yie(n){return n.length?n[0]instanceof Map?n:n.map(e=>P$(e)):[]}(t).map(y=>Il(y));m=function tse(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,O$(n,a)))}}return e}(e,m,u);const g=function zse(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Ex(e[0]),e.length>1&&(r=Ex(e[e.length-1]))):e instanceof Map&&(t=Ex(e)),t||r?new qse(n,t,r):null}(e,m);return new Q$(e,m,l,g)}}let Zse=(()=>{class n extends E${constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:ei.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?w$(t):t;return Y$(this._renderer,null,r,"register",[i]),new Kse(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(ne(cp),ne(tr))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();class Kse extends Kre{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Qse(this._id,e,t||{},this._renderer)}}class Qse{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Y$(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Y$(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const X$="@.disabled";let Yse=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let h=this._rendererCache.get(s);return h||(h=new J$("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,h)),h}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=h=>{Array.isArray(h)?h.forEach(l):this.engine.registerTrigger(o,a,t,h.name,h)};return r.data.animation.forEach(l),new Xse(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(ne(cp),ne($w),ne(ut))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();class J${constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==X$?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Xse extends J${constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==X$?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Jse(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function eoe(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}let toe=(()=>{class n extends $w{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(ne(tr),ne(rx),ne(px),ne(qa))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const eH=[{provide:E$,useClass:Zse},{provide:px,useFactory:function noe(){return new wse}},{provide:$w,useClass:toe},{provide:cp,useFactory:function roe(n,e,t){return new Yse(n,e,t)},deps:[DC,$w,ut]}],wx=[{provide:rx,useFactory:()=>new Wse},{provide:sM,useValue:"BrowserAnimations"},...eH],tH=[{provide:rx,useClass:x$},{provide:sM,useValue:"NoopAnimations"},...eH];let ioe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?tH:wx}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({providers:wx,imports:[a1]})}return n})();const soe=["addListener","removeListener"],ooe=["addEventListener","removeEventListener"],aoe=["on","off"];function zw(n,e,t,r){if(w(t)&&(r=t,t=void 0),r)return zw(n,e,t).pipe(RC(r));const[i,s]=function uoe(n){return w(n.addEventListener)&&w(n.removeEventListener)}(n)?ooe.map(o=>a=>n[o](e,a,t)):function loe(n){return w(n.addListener)&&w(n.removeListener)}(n)?soe.map(nH(n,e)):function coe(n){return w(n.on)&&w(n.off)}(n)?aoe.map(nH(n,e)):[];if(!i&&pt(n))return Lt(o=>zw(o,e,t))(nn(n));if(!i)throw new TypeError("Invalid event target");return new Je(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function nH(n,e){return t=>r=>n[t](e,r)}const Cl=new Je(we),hoe={connector:()=>new j};function rH(n,e=hoe){const{connector:t}=e;return $((r,i)=>{const s=t();nn(n(function doe(n){return new Je(e=>n.subscribe(e))}(s))).subscribe(i),i.add(r.subscribe(s))})}function iH(n,e){return e?t=>kd(e.pipe(Dr(1),function moe(){return $((n,e)=>{n.subscribe(fe(e,we))})}()),t.pipe(iH(n))):Lt((t,r)=>nn(n(t,r)).pipe(Dr(1),_1(t)))}const Rg="Service workers are disabled or not supported by this browser";class qw{constructor(e){if(this.serviceWorker=e,e){const r=zw(e,"controllerchange").pipe(_e(()=>e.controller)),s=kd(uv(()=>q(e.controller)),r);this.worker=s.pipe(ur(h=>!!h)),this.registration=this.worker.pipe(ht(()=>e.getRegistration()));const u=zw(e,"message").pipe(_e(h=>h.data)).pipe(ur(h=>h&&h.type)).pipe(function poe(n){return n?e=>rH(n)(e):e=>function foe(n,e){const t=w(n)?n:()=>n;return w(e)?rH(e,{connector:t}):r=>new dv(r,t)}(new j)(e)}());u.connect(),this.events=u}else this.worker=this.events=this.registration=function _oe(n){return uv(()=>Od(new Error(n)))}(Rg)}postMessage(e,t){return this.worker.pipe(Dr(1),dr(r=>{r.postMessage({action:e,...t})})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(ur(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Dr(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(ur(t=>t.nonce===e),Dr(1),_e(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let sH=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,this.pushManager=null,this.subscriptionChanges=new j,!t.isEnabled)return this.messages=Cl,this.notificationClicks=Cl,void(this.subscription=Cl);this.messages=this.sw.eventsOfType("PUSH").pipe(_e(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(_e(i=>i.data)),this.pushManager=this.sw.registration.pipe(_e(i=>i.pushManager));const r=this.pushManager.pipe(ht(i=>i.getSubscription()));this.subscription=G(r,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(Rg));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,this.pushManager.pipe(ht(o=>o.subscribe(r)),Dr(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Dr(1),ht(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Rg))}decodeBase64(t){return atob(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ne(qw))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),oH=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=Cl,this.available=Cl,this.activated=Cl,void(this.unrecoverable=Cl);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(ur(r=>"VERSION_READY"===r.type),_e(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Rg));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Rg));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static#e=this.\u0275fac=function(r){return new(r||n)(ne(qw))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const aH=new se("NGSW_REGISTER_SCRIPT");function yoe(n,e,t,r){return()=>{if(!yC(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let i;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)i=t.registrationStrategy();else{const[o,...a]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=q(null);break;case"registerWithDelay":i=lH(+a[0]||0);break;case"registerWhenStable":i=a[0]?G(cH(n),lH(+a[0])):cH(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(ut).runOutsideAngular(()=>i.pipe(Dr(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(o=>console.error("Service worker registration failed with:",o))))}}function lH(n){return q(null).pipe(function goe(n,e=Gd){const t=Zj(n,e);return iH(()=>t)}(n))}function cH(n){return n.get(qa).isStable.pipe(ur(t=>t))}function voe(n,e){return new qw(yC(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}class bx{}function Eoe(n,e={}){return function EI(n){return{\u0275providers:n}}([sH,oH,{provide:aH,useValue:n},{provide:bx,useValue:e},{provide:qw,useFactory:voe,deps:[bx,us]},{provide:jy,useFactory:yoe,deps:[Ei,aH,bx,us],multi:!0}])}let woe=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[Eoe(t,r)]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n});static#n=this.\u0275inj=jt({providers:[sH,oH]})}return n})();const uH={firebaseConfig:{apiKey:"AIzaSyCX5-13x8qdmK4xqpFYgZljbzhhI0mJ9DQ",authDomain:"tania-pwa.firebaseapp.com",projectId:"tania-pwa",storageBucket:"tania-pwa.appspot.com",messagingSenderId:"827261546924",appId:"1:827261546924:web:7d9c6db06ca41122218a09"}};let boe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=$t({type:n,bootstrap:[Zre]});static#n=this.\u0275inj=jt({providers:[{provide:tm,useValue:uH.firebaseConfig}],imports:[a1,nK,ane,XA,cie,Pre,IK.initializeApp(uH.firebaseConfig),ioe,woe.register("ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"})]})}return n})();E8().bootstrapModule(boe).catch(n=>console.error(n))},106:(ys,$n,ze)=>{ze.d($n,{Z:()=>zn});var w=ze(58),Oe=ze(537),z=ze(534),Fe=ze(879);class gt{constructor(Ue,Ze){this._delegate=Ue,this.firebase=Ze,(0,z._addComponent)(Ue,new Oe.wA("app-compat",()=>this,"PUBLIC")),this.container=Ue.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ue){this._delegate.automaticDataCollectionEnabled=Ue}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ue=>{this._delegate.checkDestroyed(),Ue()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,z.deleteApp)(this._delegate)))}_getService(Ue,Ze=z._DEFAULT_ENTRY_NAME){var qn;this._delegate.checkDestroyed();const Gn=this._delegate.container.getProvider(Ue);return!Gn.isInitialized()&&"EXPLICIT"===(null===(qn=Gn.getComponent())||void 0===qn?void 0:qn.instantiationMode)&&Gn.initialize(),Gn.getImmediate({identifier:Ze})}_removeServiceInstance(Ue,Ze=z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ue).clearInstance(Ze)}_addComponent(Ue){(0,z._addComponent)(this._delegate,Ue)}_addOrOverwriteComponent(Ue){(0,z._addOrOverwriteComponent)(this._delegate,Ue)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const dn=new w.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),J=function st(){const It=function Hn(It){const Ue={},Ze={__esModule:!0,initializeApp:function Gt(Ke,Nn={}){const Y=z.initializeApp(Ke,Nn);if((0,w.r3)(Ue,Y.name))return Ue[Y.name];const en=new It(Y,Ze);return Ue[Y.name]=en,en},app:Gn,registerVersion:z.registerVersion,setLogLevel:z.setLogLevel,onLog:z.onLog,apps:null,SDK_VERSION:z.SDK_VERSION,INTERNAL:{registerComponent:function Ft(Ke){const Nn=Ke.name,Y=Nn.replace("-compat","");if(z._registerComponent(Ke)&&"PUBLIC"===Ke.type){const en=(Wt=Gn())=>{if("function"!=typeof Wt[Y])throw dn.create("invalid-app-argument",{appName:Nn});return Wt[Y]()};void 0!==Ke.serviceProps&&(0,w.ZB)(en,Ke.serviceProps),Ze[Y]=en,It.prototype[Y]=function(...Wt){return this._getService.bind(this,Nn).apply(this,Ke.multipleInstances?Wt:[])}}return"PUBLIC"===Ke.type?Ze[Y]:null},removeApp:function qn(Ke){delete Ue[Ke]},useAsService:function Pr(Ke,Nn){return"serverAuth"===Nn?null:Nn},modularAPIs:z}};function Gn(Ke){if(!(0,w.r3)(Ue,Ke=Ke||z._DEFAULT_ENTRY_NAME))throw dn.create("no-app",{appName:Ke});return Ue[Ke]}return Ze.default=Ze,Object.defineProperty(Ze,"apps",{get:function Ct(){return Object.keys(Ue).map(Ke=>Ue[Ke])}}),Gn.App=It,Ze}(gt);return It.INTERNAL=Object.assign(Object.assign({},It.INTERNAL),{createFirebaseNamespace:st,extendNamespace:function Ue(Ze){(0,w.ZB)(It,Ze)},createSubscribe:w.ne,ErrorFactory:w.LL,deepExtend:w.ZB}),It}(),ae=new Fe.Yd("@firebase/app-compat");if((0,w.jU)()&&void 0!==self.firebase){ae.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const It=self.firebase.SDK_VERSION;It&&It.indexOf("LITE")>=0&&ae.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const zn=J;!function Et(It){(0,z.registerVersion)("@firebase/app-compat","0.2.24",It)}()},534:(ys,$n,ze)=>{ze.r($n),ze.d($n,{FirebaseError:()=>Fe.ZR,SDK_VERSION:()=>Vs,_DEFAULT_ENTRY_NAME:()=>Ai,_addComponent:()=>Ls,_addOrOverwriteComponent:()=>sr,_apps:()=>kr,_clearComponents:()=>On,_components:()=>Es,_getProvider:()=>Lt,_registerComponent:()=>Ro,_removeServiceInstance:()=>xi,deleteApp:()=>vr,getApp:()=>Bs,getApps:()=>ma,initializeApp:()=>pa,onLog:()=>ga,registerVersion:()=>Us,setLogLevel:()=>uu});var w=ze(861),Oe=ze(537),z=ze(879),Fe=ze(58);const gt=(F,x)=>x.some(ie=>F instanceof ie);let Jt,dn;const J=new WeakMap,ae=new WeakMap,we=new WeakMap,nt=new WeakMap,Et=new WeakMap;let Ue={get(F,x,ie){if(F instanceof IDBTransaction){if("done"===x)return ae.get(F);if("objectStoreNames"===x)return F.objectStoreNames||we.get(F);if("store"===x)return ie.objectStoreNames[1]?void 0:ie.objectStore(ie.objectStoreNames[0])}return Gt(F[x])},set:(F,x,ie)=>(F[x]=ie,!0),has:(F,x)=>F instanceof IDBTransaction&&("done"===x||"store"===x)||x in F};function Gn(F){return"function"==typeof F?function qn(F){return F!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function st(){return dn||(dn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(F)?function(...x){return F.apply(Ct(this),x),Gt(J.get(this))}:function(...x){return Gt(F.apply(Ct(this),x))}:function(x,...ie){const Ie=F.call(Ct(this),x,...ie);return we.set(Ie,x.sort?x.sort():[x]),Gt(Ie)}}(F):(F instanceof IDBTransaction&&function It(F){if(ae.has(F))return;const x=new Promise((ie,Ie)=>{const $e=()=>{F.removeEventListener("complete",ot),F.removeEventListener("error",k),F.removeEventListener("abort",k)},ot=()=>{ie(),$e()},k=()=>{Ie(F.error||new DOMException("AbortError","AbortError")),$e()};F.addEventListener("complete",ot),F.addEventListener("error",k),F.addEventListener("abort",k)});ae.set(F,x)}(F),gt(F,function Hn(){return Jt||(Jt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(F,Ue):F)}function Gt(F){if(F instanceof IDBRequest)return function zn(F){const x=new Promise((ie,Ie)=>{const $e=()=>{F.removeEventListener("success",ot),F.removeEventListener("error",k)},ot=()=>{ie(Gt(F.result)),$e()},k=()=>{Ie(F.error),$e()};F.addEventListener("success",ot),F.addEventListener("error",k)});return x.then(ie=>{ie instanceof IDBCursor&&J.set(ie,F)}).catch(()=>{}),Et.set(x,F),x}(F);if(nt.has(F))return nt.get(F);const x=Gn(F);return x!==F&&(nt.set(F,x),Et.set(x,F)),x}const Ct=F=>Et.get(F),Ke=["get","getKey","getAll","getAllKeys","count"],Nn=["put","add","delete","clear"],Y=new Map;function en(F,x){if(!(F instanceof IDBDatabase)||x in F||"string"!=typeof x)return;if(Y.get(x))return Y.get(x);const ie=x.replace(/FromIndex$/,""),Ie=x!==ie,$e=Nn.includes(ie);if(!(ie in(Ie?IDBIndex:IDBObjectStore).prototype)||!$e&&!Ke.includes(ie))return;const ot=function(){var k=(0,w.Z)(function*(hn,...Ce){const rt=this.transaction(hn,$e?"readwrite":"readonly");let ya=rt.store;return Ie&&(ya=ya.index(Ce.shift())),(yield Promise.all([ya[ie](...Ce),$e&&rt.done]))[0]});return function(Ce){return k.apply(this,arguments)}}();return Y.set(x,ot),ot}!function Ze(F){Ue=F(Ue)}(F=>({...F,get:(x,ie,Ie)=>en(x,ie)||F.get(x,ie,Ie),has:(x,ie)=>!!en(x,ie)||F.has(x,ie)}));class Wt{constructor(x){this.container=x}getPlatformInfoString(){return this.container.getProviders().map(ie=>{if(function Sn(F){const x=F.getComponent();return"VERSION"===x?.type}(ie)){const Ie=ie.getImmediate();return`${Ie.library}/${Ie.version}`}return null}).filter(ie=>ie).join(" ")}}const zi="@firebase/app",Je=new z.Yd("@firebase/app"),Ai="[DEFAULT]",Al={[zi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},kr=new Map,Es=new Map;function Ls(F,x){try{F.container.addComponent(x)}catch(ie){Je.debug(`Component ${x.name} failed to register with FirebaseApp ${F.name}`,ie)}}function sr(F,x){F.container.addOrOverwriteComponent(x)}function Ro(F){const x=F.name;if(Es.has(x))return Je.debug(`There were multiple attempts to register component ${x}.`),!1;Es.set(x,F);for(const ie of kr.values())Ls(ie,F);return!0}function Lt(F,x){const ie=F.container.getProvider("heartbeat").getImmediate({optional:!0});return ie&&ie.triggerHeartbeat(),F.container.getProvider(x)}function xi(F,x,ie=Ai){Lt(F,x).clearInstance(ie)}function On(){Es.clear()}const gi=new Fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Yr{constructor(x,ie,Ie){this._isDeleted=!1,this._options=Object.assign({},x),this._config=Object.assign({},ie),this._name=ie.name,this._automaticDataCollectionEnabled=ie.automaticDataCollectionEnabled,this._container=Ie,this.container.addComponent(new Oe.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(x){this.checkDestroyed(),this._automaticDataCollectionEnabled=x}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(x){this._isDeleted=x}checkDestroyed(){if(this.isDeleted)throw gi.create("app-deleted",{appName:this._name})}}const Vs="10.7.0";function pa(F,x={}){let ie=F;"object"!=typeof x&&(x={name:x});const Ie=Object.assign({name:Ai,automaticDataCollectionEnabled:!1},x),$e=Ie.name;if("string"!=typeof $e||!$e)throw gi.create("bad-app-name",{appName:String($e)});if(ie||(ie=(0,Fe.aH)()),!ie)throw gi.create("no-options");const ot=kr.get($e);if(ot){if((0,Fe.vZ)(ie,ot.options)&&(0,Fe.vZ)(Ie,ot.config))return ot;throw gi.create("duplicate-app",{appName:$e})}const k=new Oe.H0($e);for(const Ce of Es.values())k.addComponent(Ce);const hn=new Yr(ie,Ie,k);return kr.set($e,hn),hn}function Bs(F=Ai){const x=kr.get(F);if(!x&&F===Ai&&(0,Fe.aH)())return pa();if(!x)throw gi.create("no-app",{appName:F});return x}function ma(){return Array.from(kr.values())}function vr(F){return Or.apply(this,arguments)}function Or(){return(Or=(0,w.Z)(function*(F){const x=F.name;kr.has(x)&&(kr.delete(x),yield Promise.all(F.container.getProviders().map(ie=>ie.delete())),F.isDeleted=!0)})).apply(this,arguments)}function Us(F,x,ie){var Ie;let $e=null!==(Ie=Al[F])&&void 0!==Ie?Ie:F;ie&&($e+=`-${ie}`);const ot=$e.match(/\s|\//),k=x.match(/\s|\//);if(ot||k){const hn=[`Unable to register library "${$e}" with version "${x}":`];return ot&&hn.push(`library name "${$e}" contains illegal characters (whitespace or "/")`),ot&&k&&hn.push("and"),k&&hn.push(`version name "${x}" contains illegal characters (whitespace or "/")`),void Je.warn(hn.join(" "))}Ro(new Oe.wA(`${$e}-version`,()=>({library:$e,version:x}),"VERSION"))}function ga(F,x){if(null!==F&&"function"!=typeof F)throw gi.create("invalid-log-argument");(0,z.Am)(F,x)}function uu(F){(0,z.Ub)(F)}const xl="firebase-heartbeat-database",_a=1,D="firebase-heartbeat-store";let T=null;function S(){return T||(T=function Ft(F,x,{blocked:ie,upgrade:Ie,blocking:$e,terminated:ot}={}){const k=indexedDB.open(F,x),hn=Gt(k);return Ie&&k.addEventListener("upgradeneeded",Ce=>{Ie(Gt(k.result),Ce.oldVersion,Ce.newVersion,Gt(k.transaction),Ce)}),ie&&k.addEventListener("blocked",Ce=>ie(Ce.oldVersion,Ce.newVersion,Ce)),hn.then(Ce=>{ot&&Ce.addEventListener("close",()=>ot()),$e&&Ce.addEventListener("versionchange",rt=>$e(rt.oldVersion,rt.newVersion,rt))}).catch(()=>{}),hn}(xl,_a,{upgrade:(F,x)=>{0===x&&F.createObjectStore(D)}}).catch(F=>{throw gi.create("idb-open",{originalErrorMessage:F.message})})),T}function P(){return(P=(0,w.Z)(function*(F){try{return yield(yield S()).transaction(D).objectStore(D).get(Qe(F))}catch(x){if(x instanceof Fe.ZR)Je.warn(x.message);else{const ie=gi.create("idb-get",{originalErrorMessage:x?.message});Je.warn(ie.message)}}})).apply(this,arguments)}function q(F,x){return Le.apply(this,arguments)}function Le(){return(Le=(0,w.Z)(function*(F,x){try{const Ie=(yield S()).transaction(D,"readwrite");yield Ie.objectStore(D).put(x,Qe(F)),yield Ie.done}catch(ie){if(ie instanceof Fe.ZR)Je.warn(ie.message);else{const Ie=gi.create("idb-set",{originalErrorMessage:ie?.message});Je.warn(Ie.message)}}})).apply(this,arguments)}function Qe(F){return`${F.name}!${F.options.appId}`}class Fn{constructor(x){this.container=x,this._heartbeatsCache=null;const ie=this.container.getProvider("app").getImmediate();this._storage=new Mt(ie),this._heartbeatsCachePromise=this._storage.read().then(Ie=>(this._heartbeatsCache=Ie,Ie))}triggerHeartbeat(){var x=this;return(0,w.Z)(function*(){var ie,Ie;const ot=x.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),k=be();if((null!=(null===(ie=x._heartbeatsCache)||void 0===ie?void 0:ie.heartbeats)||(x._heartbeatsCache=yield x._heartbeatsCachePromise,null!=(null===(Ie=x._heartbeatsCache)||void 0===Ie?void 0:Ie.heartbeats)))&&x._heartbeatsCache.lastSentHeartbeatDate!==k&&!x._heartbeatsCache.heartbeats.some(hn=>hn.date===k))return x._heartbeatsCache.heartbeats.push({date:k,agent:ot}),x._heartbeatsCache.heartbeats=x._heartbeatsCache.heartbeats.filter(hn=>{const Ce=new Date(hn.date).valueOf();return Date.now()-Ce<=2592e6}),x._storage.overwrite(x._heartbeatsCache)})()}getHeartbeatsHeader(){var x=this;return(0,w.Z)(function*(){var ie;if(null===x._heartbeatsCache&&(yield x._heartbeatsCachePromise),null==(null===(ie=x._heartbeatsCache)||void 0===ie?void 0:ie.heartbeats)||0===x._heartbeatsCache.heartbeats.length)return"";const Ie=be(),{heartbeatsToSend:$e,unsentEntries:ot}=function Wn(F,x=1024){const ie=[];let Ie=F.slice();for(const $e of F){const ot=ie.find(k=>k.agent===$e.agent);if(ot){if(ot.dates.push($e.date),Wi(ie)>x){ot.dates.pop();break}}else if(ie.push({agent:$e.agent,dates:[$e.date]}),Wi(ie)>x){ie.pop();break}Ie=Ie.slice(1)}return{heartbeatsToSend:ie,unsentEntries:Ie}}(x._heartbeatsCache.heartbeats),k=(0,Fe.L)(JSON.stringify({version:2,heartbeats:$e}));return x._heartbeatsCache.lastSentHeartbeatDate=Ie,ot.length>0?(x._heartbeatsCache.heartbeats=ot,yield x._storage.overwrite(x._heartbeatsCache)):(x._heartbeatsCache.heartbeats=[],x._storage.overwrite(x._heartbeatsCache)),k})()}}function be(){return(new Date).toISOString().substring(0,10)}class Mt{constructor(x){this.app=x,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,w.Z)(function*(){return!!(0,Fe.hl)()&&(0,Fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var x=this;return(0,w.Z)(function*(){if(yield x._canUseIndexedDBPromise){const Ie=yield function G(F){return P.apply(this,arguments)}(x.app);return Ie?.heartbeats?Ie:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(x){var ie=this;return(0,w.Z)(function*(){var Ie;if(yield ie._canUseIndexedDBPromise){const ot=yield ie.read();return q(ie.app,{lastSentHeartbeatDate:null!==(Ie=x.lastSentHeartbeatDate)&&void 0!==Ie?Ie:ot.lastSentHeartbeatDate,heartbeats:x.heartbeats})}})()}add(x){var ie=this;return(0,w.Z)(function*(){var Ie;if(yield ie._canUseIndexedDBPromise){const ot=yield ie.read();return q(ie.app,{lastSentHeartbeatDate:null!==(Ie=x.lastSentHeartbeatDate)&&void 0!==Ie?Ie:ot.lastSentHeartbeatDate,heartbeats:[...ot.heartbeats,...x.heartbeats]})}})()}}function Wi(F){return(0,Fe.L)(JSON.stringify({version:2,heartbeats:F})).length}!function du(F){Ro(new Oe.wA("platform-logger",x=>new Wt(x),"PRIVATE")),Ro(new Oe.wA("heartbeat",x=>new Fn(x),"PRIVATE")),Us(zi,"0.9.24",F),Us(zi,"0.9.24","esm2017"),Us("fire-js","")}("")},537:(ys,$n,ze)=>{ze.d($n,{H0:()=>Hn,wA:()=>z});var w=ze(861),Oe=ze(58);class z{constructor(J,ae,we){this.name=J,this.instanceFactory=ae,this.type=we,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(J){return this.instantiationMode=J,this}setMultipleInstances(J){return this.multipleInstances=J,this}setServiceProps(J){return this.serviceProps=J,this}setInstanceCreatedCallback(J){return this.onInstanceCreated=J,this}}const Fe="[DEFAULT]";class gt{constructor(J,ae){this.name=J,this.container=ae,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(J){const ae=this.normalizeInstanceIdentifier(J);if(!this.instancesDeferred.has(ae)){const we=new Oe.BH;if(this.instancesDeferred.set(ae,we),this.isInitialized(ae)||this.shouldAutoInitialize())try{const nt=this.getOrInitializeService({instanceIdentifier:ae});nt&&we.resolve(nt)}catch{}}return this.instancesDeferred.get(ae).promise}getImmediate(J){var ae;const we=this.normalizeInstanceIdentifier(J?.identifier),nt=null!==(ae=J?.optional)&&void 0!==ae&&ae;if(!this.isInitialized(we)&&!this.shouldAutoInitialize()){if(nt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:we})}catch(Et){if(nt)return null;throw Et}}getComponent(){return this.component}setComponent(J){if(J.name!==this.name)throw Error(`Mismatching Component ${J.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=J,this.shouldAutoInitialize()){if(function dn(st){return"EAGER"===st.instantiationMode}(J))try{this.getOrInitializeService({instanceIdentifier:Fe})}catch{}for(const[ae,we]of this.instancesDeferred.entries()){const nt=this.normalizeInstanceIdentifier(ae);try{const Et=this.getOrInitializeService({instanceIdentifier:nt});we.resolve(Et)}catch{}}}}clearInstance(J=Fe){this.instancesDeferred.delete(J),this.instancesOptions.delete(J),this.instances.delete(J)}delete(){var J=this;return(0,w.Z)(function*(){const ae=Array.from(J.instances.values());yield Promise.all([...ae.filter(we=>"INTERNAL"in we).map(we=>we.INTERNAL.delete()),...ae.filter(we=>"_delete"in we).map(we=>we._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(J=Fe){return this.instances.has(J)}getOptions(J=Fe){return this.instancesOptions.get(J)||{}}initialize(J={}){const{options:ae={}}=J,we=this.normalizeInstanceIdentifier(J.instanceIdentifier);if(this.isInitialized(we))throw Error(`${this.name}(${we}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const nt=this.getOrInitializeService({instanceIdentifier:we,options:ae});for(const[Et,zn]of this.instancesDeferred.entries())we===this.normalizeInstanceIdentifier(Et)&&zn.resolve(nt);return nt}onInit(J,ae){var we;const nt=this.normalizeInstanceIdentifier(ae),Et=null!==(we=this.onInitCallbacks.get(nt))&&void 0!==we?we:new Set;Et.add(J),this.onInitCallbacks.set(nt,Et);const zn=this.instances.get(nt);return zn&&J(zn,nt),()=>{Et.delete(J)}}invokeOnInitCallbacks(J,ae){const we=this.onInitCallbacks.get(ae);if(we)for(const nt of we)try{nt(J,ae)}catch{}}getOrInitializeService({instanceIdentifier:J,options:ae={}}){let we=this.instances.get(J);if(!we&&this.component&&(we=this.component.instanceFactory(this.container,{instanceIdentifier:(st=J,st===Fe?void 0:st),options:ae}),this.instances.set(J,we),this.instancesOptions.set(J,ae),this.invokeOnInitCallbacks(we,J),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,J,we)}catch{}var st;return we||null}normalizeInstanceIdentifier(J=Fe){return this.component?this.component.multipleInstances?J:Fe:J}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Hn{constructor(J){this.name=J,this.providers=new Map}addComponent(J){const ae=this.getProvider(J.name);if(ae.isComponentSet())throw new Error(`Component ${J.name} has already been registered with ${this.name}`);ae.setComponent(J)}addOrOverwriteComponent(J){this.getProvider(J.name).isComponentSet()&&this.providers.delete(J.name),this.addComponent(J)}getProvider(J){if(this.providers.has(J))return this.providers.get(J);const ae=new gt(J,this);return this.providers.set(J,ae),ae}getProviders(){return Array.from(this.providers.values())}}},879:(ys,$n,ze)=>{ze.d($n,{Am:()=>st,Ub:()=>Hn,Yd:()=>dn,in:()=>Oe});const w=[];var Oe=function(J){return J[J.DEBUG=0]="DEBUG",J[J.VERBOSE=1]="VERBOSE",J[J.INFO=2]="INFO",J[J.WARN=3]="WARN",J[J.ERROR=4]="ERROR",J[J.SILENT=5]="SILENT",J}(Oe||{});const z={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},Fe=Oe.INFO,gt={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},Jt=(J,ae,...we)=>{if(ae<J.logLevel)return;const nt=(new Date).toISOString(),Et=gt[ae];if(!Et)throw new Error(`Attempted to log a message with an invalid logType (value: ${ae})`);console[Et](`[${nt}]  ${J.name}:`,...we)};class dn{constructor(ae){this.name=ae,this._logLevel=Fe,this._logHandler=Jt,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(ae){if(!(ae in Oe))throw new TypeError(`Invalid value "${ae}" assigned to \`logLevel\``);this._logLevel=ae}setLogLevel(ae){this._logLevel="string"==typeof ae?z[ae]:ae}get logHandler(){return this._logHandler}set logHandler(ae){if("function"!=typeof ae)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ae}get userLogHandler(){return this._userLogHandler}set userLogHandler(ae){this._userLogHandler=ae}debug(...ae){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...ae),this._logHandler(this,Oe.DEBUG,...ae)}log(...ae){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...ae),this._logHandler(this,Oe.VERBOSE,...ae)}info(...ae){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...ae),this._logHandler(this,Oe.INFO,...ae)}warn(...ae){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...ae),this._logHandler(this,Oe.WARN,...ae)}error(...ae){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...ae),this._logHandler(this,Oe.ERROR,...ae)}}function Hn(J){w.forEach(ae=>{ae.setLogLevel(J)})}function st(J,ae){for(const we of w){let nt=null;ae&&ae.level&&(nt=z[ae.level]),we.userLogHandler=null===J?null:(Et,zn,...It)=>{const Ue=It.map(Ze=>{if(null==Ze)return null;if("string"==typeof Ze)return Ze;if("number"==typeof Ze||"boolean"==typeof Ze)return Ze.toString();if(Ze instanceof Error)return Ze.message;try{return JSON.stringify(Ze)}catch{return null}}).filter(Ze=>Ze).join(" ");zn>=(nt??Et.logLevel)&&J({level:Oe[zn].toLowerCase(),message:Ue,args:It,type:Et.name})}}}},377:(ys,$n,ze)=>{ze.r($n);var w=ze(861),Oe=ze(106),z=ze(58),Fe=ze(534),gt=ze(879),Jt=ze(582),dn=ze(537);const st={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const zn=function nt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},It=function Et(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ue=new z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qn=new gt.Yd("@firebase/auth");function Gt(f,...c){qn.logLevel<=gt.in.ERROR&&qn.error(`Auth (${Fe.SDK_VERSION}): ${f}`,...c)}function Ct(f,...c){throw Nn(f,...c)}function Ft(f,...c){return Nn(f,...c)}function Pr(f,c,d){const p=Object.assign(Object.assign({},It()),{[c]:d});return new z.LL("auth","Firebase",p).create(c,{appName:f.name})}function Ke(f,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&Ct(f,"argument-error"),Pr(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Nn(f,...c){if("string"!=typeof f){const d=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(d,...p)}return Ue.create(f,...c)}function Y(f,c,...d){if(!f)throw Nn(c,...d)}function en(f){const c="INTERNAL ASSERTION FAILED: "+f;throw Gt(c),new Error(c)}function Wt(f,c){f||en(c)}function Sn(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function zi(){return"http:"===qi()||"https:"===qi()}function qi(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Gi{constructor(c,d){this.shortDelay=c,this.longDelay=d,Wt(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,z.uI)()||(0,z.b$)()}get(){return function Je(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(zi()||(0,z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function V(f,c){Wt(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class H{static initialize(c,d,p){this.fetchImpl=c,d&&(this.headersImpl=d),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void en("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void en("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void en("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const j={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},W=new Gi(3e4,6e4);function ee(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function $(f,c,d,p){return fe.apply(this,arguments)}function fe(){return(fe=(0,w.Z)(function*(f,c,d,p,_={}){return dt(f,_,(0,w.Z)(function*(){let v={},I={};p&&("GET"===c?I=p:v={body:JSON.stringify(p)});const M=(0,z.xO)(Object.assign({key:f.config.apiKey},I)).slice(1),K=yield f._getAdditionalHeaders();return K["Content-Type"]="application/json",f.languageCode&&(K["X-Firebase-Locale"]=f.languageCode),H.fetch()(tn(f,f.config.apiHost,d,M),Object.assign({method:c,headers:K,referrerPolicy:"no-referrer"},v))}))})).apply(this,arguments)}function dt(f,c,d){return _e.apply(this,arguments)}function _e(){return(_e=(0,w.Z)(function*(f,c,d){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},j),c);try{const _=new ir(f),v=yield Promise.race([d(),_.promise]);_.clearNetworkTimeout();const I=yield v.json();if("needConfirmation"in I)throw kn(f,"account-exists-with-different-credential",I);if(v.ok&&!("errorMessage"in I))return I;{const M=v.ok?I.errorMessage:I.error.message,[K,de]=M.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===K)throw kn(f,"credential-already-in-use",I);if("EMAIL_EXISTS"===K)throw kn(f,"email-already-in-use",I);if("USER_DISABLED"===K)throw kn(f,"user-disabled",I);const ve=p[K]||K.toLowerCase().replace(/[_\s]+/g,"-");if(de)throw Pr(f,ve,de);Ct(f,ve)}}catch(_){if(_ instanceof z.ZR)throw _;Ct(f,"network-request-failed",{message:String(_)})}})).apply(this,arguments)}function De(f,c,d,p){return pt.apply(this,arguments)}function pt(){return(pt=(0,w.Z)(function*(f,c,d,p,_={}){const v=yield $(f,c,d,p,_);return"mfaPendingCredential"in v&&Ct(f,"multi-factor-auth-required",{_serverResponse:v}),v})).apply(this,arguments)}function tn(f,c,d,p){const _=`${c}${d}?${p}`;return f.config.emulator?V(f.config,_):`${f.config.apiScheme}://${_}`}function Ut(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ir{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,p)=>{this.timer=setTimeout(()=>p(Ft(this.auth,"network-request-failed")),W.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kn(f,c,d){const p={appName:f.name};d.email&&(p.email=d.email),d.phoneNumber&&(p.phoneNumber=d.phoneNumber);const _=Ft(f,c,p);return _.customData._tokenResponse=d,_}function yr(f){return void 0!==f&&void 0!==f.getResponse}function Nr(f){return void 0!==f&&void 0!==f.enterprise}class Qr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return Ut(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function vs(){return(vs=(0,w.Z)(function*(f){return(yield $(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function nn(f,c){return ha.apply(this,arguments)}function ha(){return(ha=(0,w.Z)(function*(f,c){return $(f,"GET","/v2/recaptchaConfig",ee(f,c))})).apply(this,arguments)}function Ai(){return(Ai=(0,w.Z)(function*(f,c){return $(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function kr(){return(kr=(0,w.Z)(function*(f,c){return $(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ls(){return(Ls=(0,w.Z)(function*(f,c){return $(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function sr(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function xi(){return(xi=(0,w.Z)(function*(f,c=!1){const d=(0,z.m9)(f),p=yield d.getIdToken(c),_=fa(p);Y(_&&_.exp&&_.auth_time&&_.iat,d.auth,"internal-error");const v="object"==typeof _.firebase?_.firebase:void 0,I=v?.sign_in_provider;return{claims:_,token:p,authTime:sr(On(_.auth_time)),issuedAtTime:sr(On(_.iat)),expirationTime:sr(On(_.exp)),signInProvider:I||null,signInSecondFactor:v?.sign_in_second_factor||null}})).apply(this,arguments)}function On(f){return 1e3*Number(f)}function fa(f){const[c,d,p]=f.split(".");if(void 0===c||void 0===d||void 0===p)return Gt("JWT malformed, contained fewer than 3 sections"),null;try{const _=(0,z.tV)(d);return _?JSON.parse(_):(Gt("Failed to decode base64 JWT payload"),null)}catch(_){return Gt("Caught error parsing JWT payload as JSON",_?.toString()),null}}function Yr(f,c){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,w.Z)(function*(f,c,d=!1){if(d)return c;try{return yield c}catch(p){throw p instanceof z.ZR&&function pa({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class Bs{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const _=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,_)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,w.Z)(function*(){yield d.iteration()}),p)}iteration(){var c=this;return(0,w.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class ma{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=sr(this.lastLoginAt),this.creationTime=sr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function vr(f){return Or.apply(this,arguments)}function Or(){return Or=(0,w.Z)(function*(f){var c;const d=f.auth,p=yield f.getIdToken(),_=yield Yr(f,function Es(f,c){return Ls.apply(this,arguments)}(d,{idToken:p}));Y(_?.users.length,d,"internal-error");const v=_.users[0];f._notifyReloadListener(v);const I=null!==(c=v.providerUserInfo)&&void 0!==c&&c.length?function xl(f){return f.map(c=>{var{providerId:d}=c,p=(0,Jt._T)(c,["providerId"]);return{providerId:d,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(v.providerUserInfo):[],M=function uu(f,c){return[...f.filter(p=>!c.some(_=>_.providerId===p.providerId)),...c]}(f.providerData,I),ve=!!f.isAnonymous&&!(f.email&&v.passwordHash||M?.length),Te={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:M,metadata:new ma(v.createdAt,v.lastLoginAt),isAnonymous:ve};Object.assign(f,Te)}),Or.apply(this,arguments)}function ga(){return(ga=(0,w.Z)(function*(f){const c=(0,z.m9)(f);yield vr(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function D(){return(D=(0,w.Z)(function*(f,c){const d=yield dt(f,{},(0,w.Z)(function*(){const p=(0,z.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:_,apiKey:v}=f.config,I=tn(f,_,"/v1/token",`key=${v}`),M=yield f._getAdditionalHeaders();return M["Content-Type"]="application/x-www-form-urlencoded",H.fetch()(I,{method:"POST",headers:M,body:p})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function S(){return(S=(0,w.Z)(function*(f,c){return $(f,"POST","/v2/accounts:revokeToken",ee(f,c))})).apply(this,arguments)}class G{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){Y(c.idToken,"internal-error"),Y(typeof c.idToken<"u","internal-error"),Y(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function gi(f){const c=fa(f);return Y(c,"internal-error"),Y(typeof c.exp<"u","internal-error"),Y(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}getToken(c,d=!1){var p=this;return(0,w.Z)(function*(){return Y(!p.accessToken||p.refreshToken,c,"user-token-expired"),d||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var p=this;return(0,w.Z)(function*(){const{accessToken:_,refreshToken:v,expiresIn:I}=yield function _a(f,c){return D.apply(this,arguments)}(c,d);p.updateTokensAndExpiration(_,v,Number(I))})()}updateTokensAndExpiration(c,d,p){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,d){const{refreshToken:p,accessToken:_,expirationTime:v}=d,I=new G;return p&&(Y("string"==typeof p,"internal-error",{appName:c}),I.refreshToken=p),_&&(Y("string"==typeof _,"internal-error",{appName:c}),I.accessToken=_),v&&(Y("number"==typeof v,"internal-error",{appName:c}),I.expirationTime=v),I}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new G,this.toJSON())}_performRefresh(){return en("not implemented")}}function P(f,c){Y("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class q{constructor(c){var{uid:d,auth:p,stsTokenManager:_}=c,v=(0,Jt._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=p,this.stsTokenManager=_,this.accessToken=_.accessToken,this.displayName=v.displayName||null,this.email=v.email||null,this.emailVerified=v.emailVerified||!1,this.phoneNumber=v.phoneNumber||null,this.photoURL=v.photoURL||null,this.isAnonymous=v.isAnonymous||!1,this.tenantId=v.tenantId||null,this.providerData=v.providerData?[...v.providerData]:[],this.metadata=new ma(v.createdAt||void 0,v.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,w.Z)(function*(){const p=yield Yr(d,d.stsTokenManager.getToken(d.auth,c));return Y(p,d.auth,"internal-error"),d.accessToken!==p&&(d.accessToken=p,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),p})()}getIdTokenResult(c){return function Lt(f){return xi.apply(this,arguments)}(this,c)}reload(){return function Us(f){return ga.apply(this,arguments)}(this)}_assign(c){this!==c&&(Y(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new q(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var p=this;return(0,w.Z)(function*(){let _=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),_=!0),d&&(yield vr(p)),yield p.auth._persistUserIfCurrent(p),_&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,w.Z)(function*(){const d=yield c.getIdToken();return yield Yr(c,function Sl(f,c){return Ai.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var p,_,v,I,M,K,de,ve;const Te=null!==(p=d.displayName)&&void 0!==p?p:void 0,pn=null!==(_=d.email)&&void 0!==_?_:void 0,Pi=null!==(v=d.phoneNumber)&&void 0!==v?v:void 0,ed=null!==(I=d.photoURL)&&void 0!==I?I:void 0,q_=null!==(M=d.tenantId)&&void 0!==M?M:void 0,Va=null!==(K=d._redirectEventId)&&void 0!==K?K:void 0,Yf=null!==(de=d.createdAt)&&void 0!==de?de:void 0,G_=null!==(ve=d.lastLoginAt)&&void 0!==ve?ve:void 0,{uid:td,emailVerified:Yb,isAnonymous:Xf,providerData:W_,stsTokenManager:Z_}=d;Y(td&&Z_,c,"internal-error");const Xb=G.fromJSON(this.name,Z_);Y("string"==typeof td,c,"internal-error"),P(Te,c.name),P(pn,c.name),Y("boolean"==typeof Yb,c,"internal-error"),Y("boolean"==typeof Xf,c,"internal-error"),P(Pi,c.name),P(ed,c.name),P(q_,c.name),P(Va,c.name),P(Yf,c.name),P(G_,c.name);const fc=new q({uid:td,auth:c,email:pn,emailVerified:Yb,displayName:Te,isAnonymous:Xf,photoURL:ed,phoneNumber:Pi,tenantId:q_,stsTokenManager:Xb,createdAt:Yf,lastLoginAt:G_});return W_&&Array.isArray(W_)&&(fc.providerData=W_.map(aR=>Object.assign({},aR))),Va&&(fc._redirectEventId=Va),fc}static _fromIdTokenResponse(c,d,p=!1){return(0,w.Z)(function*(){const _=new G;_.updateFromServerResponse(d);const v=new q({uid:d.localId,auth:c,stsTokenManager:_,isAnonymous:p});return yield vr(v),v})()}}const Le=new Map;function Qe(f){Wt(f instanceof Function,"Expected a class definition");let c=Le.get(f);return c?(Wt(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,Le.set(f,c),c)}const rn=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,w.Z)(function*(){return!0})()}_set(d,p){var _=this;return(0,w.Z)(function*(){_.storage[d]=p})()}_get(d){var p=this;return(0,w.Z)(function*(){const _=p.storage[d];return void 0===_?null:_})()}_remove(d){var p=this;return(0,w.Z)(function*(){delete p.storage[d]})()}_addListener(d,p){}_removeListener(d,p){}}return f.type="NONE",f})();function Fn(f,c,d){return`firebase:${f}:${c}:${d}`}class be{constructor(c,d,p){this.persistence=c,this.auth=d,this.userKey=p;const{config:_,name:v}=this.auth;this.fullUserKey=Fn(this.userKey,_.apiKey,v),this.fullPersistenceKey=Fn("persistence",_.apiKey,v),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,w.Z)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?q._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,w.Z)(function*(){if(d.persistence===c)return;const p=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,p?d.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,p="authUser"){return(0,w.Z)(function*(){if(!d.length)return new be(Qe(rn),c,p);const _=(yield Promise.all(d.map(function(){var de=(0,w.Z)(function*(ve){if(yield ve._isAvailable())return ve});return function(ve){return de.apply(this,arguments)}}()))).filter(de=>de);let v=_[0]||Qe(rn);const I=Fn(p,c.config.apiKey,c.name);let M=null;for(const de of d)try{const ve=yield de._get(I);if(ve){const Te=q._fromJSON(c,ve);de!==v&&(M=Te),v=de;break}}catch{}const K=_.filter(de=>de._shouldAllowMigration);return v._shouldAllowMigration&&K.length?(v=K[0],M&&(yield v._set(I,M.toJSON())),yield Promise.all(d.map(function(){var de=(0,w.Z)(function*(ve){if(ve!==v)try{yield ve._remove(I)}catch{}});return function(ve){return de.apply(this,arguments)}}())),new be(v,c,p)):new be(v,c,p)})()}}function Wn(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(F(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Mt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ie(c))return"Blackberry";if(Ie(c))return"Webos";if(Wi(c))return"Safari";if((c.includes("chrome/")||du(c))&&!c.includes("edge/"))return"Chrome";if(x(c))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function Mt(f=(0,z.z$)()){return/firefox\//i.test(f)}function Wi(f=(0,z.z$)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function du(f=(0,z.z$)()){return/crios\//i.test(f)}function F(f=(0,z.z$)()){return/iemobile/i.test(f)}function x(f=(0,z.z$)()){return/android/i.test(f)}function ie(f=(0,z.z$)()){return/blackberry/i.test(f)}function Ie(f=(0,z.z$)()){return/webos/i.test(f)}function $e(f=(0,z.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function Ce(f=(0,z.z$)()){return $e(f)||x(f)||Ie(f)||ie(f)||/windows phone/i.test(f)||F(f)}function ya(f,c=[]){let d;switch(f){case"Browser":d=Wn((0,z.z$)());break;case"Worker":d=`${Wn((0,z.z$)())}-${f}`;break;default:d=f}const p=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${Fe.SDK_VERSION}/${p}`}class Cx{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const p=v=>new Promise((I,M)=>{try{I(c(v))}catch(K){M(K)}});p.onAbort=d,this.queue.push(p);const _=this.queue.length-1;return()=>{this.queue[_]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,w.Z)(function*(){if(d.auth.currentUser===c)return;const p=[];try{for(const _ of d.queue)yield _(c),_.onAbort&&p.push(_.onAbort)}catch(_){p.reverse();for(const v of p)try{v()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:_?.message})}})()}}function Rl(){return(Rl=(0,w.Z)(function*(f,c={}){return $(f,"GET","/v2/passwordPolicy",ee(f,c))})).apply(this,arguments)}class Tx{constructor(c){var d,p,_,v;const I=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=I.minPasswordLength)&&void 0!==d?d:6,I.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=I.maxPasswordLength),void 0!==I.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=I.containsLowercaseCharacter),void 0!==I.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=I.containsUppercaseCharacter),void 0!==I.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=I.containsNumericCharacter),void 0!==I.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=I.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(_=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==_?_:"",this.forceUpgradeOnSignin=null!==(v=c.forceUpgradeOnSignin)&&void 0!==v&&v,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,p,_,v,I,M;const K={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,K),this.validatePasswordCharacterOptions(c,K),K.isValid&&(K.isValid=null===(d=K.meetsMinPasswordLength)||void 0===d||d),K.isValid&&(K.isValid=null===(p=K.meetsMaxPasswordLength)||void 0===p||p),K.isValid&&(K.isValid=null===(_=K.containsLowercaseLetter)||void 0===_||_),K.isValid&&(K.isValid=null===(v=K.containsUppercaseLetter)||void 0===v||v),K.isValid&&(K.isValid=null===(I=K.containsNumericCharacter)||void 0===I||I),K.isValid&&(K.isValid=null===(M=K.containsNonAlphanumericCharacter)||void 0===M||M),K}validatePasswordLengthOptions(c,d){const p=this.customStrengthOptions.minPasswordLength,_=this.customStrengthOptions.maxPasswordLength;p&&(d.meetsMinPasswordLength=c.length>=p),_&&(d.meetsMaxPasswordLength=c.length<=_)}validatePasswordCharacterOptions(c,d){let p;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let _=0;_<c.length;_++)p=c.charAt(_),this.updatePasswordCharacterOptionsStatuses(d,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,d,p,_,v){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=_)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=v))}}class Kw{constructor(c,d,p,_){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new js(this),this.idTokenSubscription=new js(this),this.beforeStateQueue=new Cx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ue,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(c,d){var p=this;return d&&(this._popupRedirectResolver=Qe(d)),this._initializationPromise=this.queue((0,w.Z)(function*(){var _,v;if(!p._deleted&&(p.persistenceManager=yield be.create(p,c),!p._deleted)){if(null!==(_=p._popupRedirectResolver)&&void 0!==_&&_._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(d),p.lastNotifiedUid=(null===(v=p.currentUser)||void 0===v?void 0:v.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,w.Z)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUser(c){var d=this;return(0,w.Z)(function*(){var p;const _=yield d.assertedPersistence.getCurrentUser();let v=_,I=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const M=null===(p=d.redirectUser)||void 0===p?void 0:p._redirectEventId,K=v?._redirectEventId,de=yield d.tryRedirectSignIn(c);(!M||M===K)&&de?.user&&(v=de.user,I=!0)}if(!v)return d.directlySetCurrentUser(null);if(!v._redirectEventId){if(I)try{yield d.beforeStateQueue.runMiddleware(v)}catch(M){v=_,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(M))}return v?d.reloadAndSetCurrentUserOrClear(v):d.directlySetCurrentUser(null)}return Y(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===v._redirectEventId?d.directlySetCurrentUser(v):d.reloadAndSetCurrentUserOrClear(v)})()}tryRedirectSignIn(c){var d=this;return(0,w.Z)(function*(){let p=null;try{p=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,w.Z)(function*(){try{yield vr(c)}catch(p){if("auth/network-request-failed"!==p?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function xo(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,w.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,w.Z)(function*(){const p=c?(0,z.m9)(c):null;return p&&Y(p.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(p&&p._clone(d))})()}_updateCurrentUser(c,d=!1){var p=this;return(0,w.Z)(function*(){if(!p._deleted)return c&&Y(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),d||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,w.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,w.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var d=this;return this.queue((0,w.Z)(function*(){yield d.assertedPersistence.setPersistence(Qe(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,w.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const p=d._getPasswordPolicyInternal();return p.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,w.Z)(function*(){const d=yield function Zw(f){return Rl.apply(this,arguments)}(c),p=new Tx(d);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new z.LL("auth","Firebase",c())}onAuthStateChanged(c,d,p){return this.registerStateListener(this.authStateSubscription,c,d,p)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,p){return this.registerStateListener(this.idTokenSubscription,c,d,p)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,w.Z)(function*(){if(d.currentUser){const p=yield d.currentUser.getIdToken(),_={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=d.tenantId&&(_.tenantId=d.tenantId),yield function T(f,c){return S.apply(this,arguments)}(d,_)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var p=this;return(0,w.Z)(function*(){const _=yield p.getOrInitRedirectPersistenceManager(d);return null===c?_.removeCurrentUser():_.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,w.Z)(function*(){if(!d.redirectPersistenceManager){const p=c&&Qe(c)||d._popupRedirectResolver;Y(p,d,"argument-error"),d.redirectPersistenceManager=yield be.create(d,[Qe(p._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,w.Z)(function*(){var p,_;return d._isInitialized&&(yield d.queue((0,w.Z)(function*(){}))),(null===(p=d._currentUser)||void 0===p?void 0:p._redirectEventId)===c?d._currentUser:(null===(_=d.redirectUser)||void 0===_?void 0:_._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,w.Z)(function*(){if(c===d.currentUser)return d.queue((0,w.Z)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,p,_){if(this._deleted)return()=>{};const v="function"==typeof d?d:d.next.bind(d);let I=!1;const M=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(M,this,"internal-error"),M.then(()=>{I||v(this.currentUser)}),"function"==typeof d){const K=c.addObserver(d,p,_);return()=>{I=!0,K()}}{const K=c.addObserver(d);return()=>{I=!0,K()}}}directlySetCurrentUser(c){var d=this;return(0,w.Z)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=ya(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,w.Z)(function*(){var d;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const _=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();_&&(p["X-Firebase-Client"]=_);const v=yield c._getAppCheckToken();return v&&(p["X-Firebase-AppCheck"]=v),p})()}_getAppCheckToken(){var c=this;return(0,w.Z)(function*(){var d;const p=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return p?.error&&function Gn(f,...c){qn.logLevel<=gt.in.WARN&&qn.warn(`Auth (${Fe.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Zt(f){return(0,z.m9)(f)}class js{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,z.ne)(d=>this.observer=d)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Pg(f){return new Promise((c,d)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=c,p.onerror=_=>{const v=Ft("internal-error");v.customData=_,d(v)},p.type="text/javascript",p.charset="UTF-8",function Dx(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(p)})}function Qw(f){return`__${f}${Math.floor(1e6*Math.random())}`}class Ng{constructor(c){this.type="recaptcha-enterprise",this.auth=Zt(c)}verify(c="verify",d=!1){var p=this;return(0,w.Z)(function*(){function v(){return v=(0,w.Z)(function*(M){if(!d){if(null==M.tenantId&&null!=M._agentRecaptchaConfig)return M._agentRecaptchaConfig.siteKey;if(null!=M.tenantId&&void 0!==M._tenantRecaptchaConfigs[M.tenantId])return M._tenantRecaptchaConfigs[M.tenantId].siteKey}return new Promise(function(){var K=(0,w.Z)(function*(de,ve){nn(M,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Te=>{if(void 0!==Te.recaptchaKey){const pn=new Qr(Te);return null==M.tenantId?M._agentRecaptchaConfig=pn:M._tenantRecaptchaConfigs[M.tenantId]=pn,de(pn.siteKey)}ve(new Error("recaptcha Enterprise site key undefined"))}).catch(Te=>{ve(Te)})});return function(de,ve){return K.apply(this,arguments)}}())}),v.apply(this,arguments)}function I(M,K,de){const ve=window.grecaptcha;Nr(ve)?ve.enterprise.ready(()=>{ve.enterprise.execute(M,{action:c}).then(Te=>{K(Te)}).catch(()=>{K("NO_RECAPTCHA")})}):de(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((M,K)=>{(function _(M){return v.apply(this,arguments)})(p.auth).then(de=>{if(!d&&Nr(window.grecaptcha))I(de,M,K);else{if(typeof window>"u")return void K(new Error("RecaptchaVerifier is only supported in browser"));Pg("https://www.google.com/recaptcha/enterprise.js?render="+de).then(()=>{I(de,M,K)}).catch(ve=>{K(ve)})}}).catch(de=>{K(de)})})})()}}function Xw(f,c,d){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,w.Z)(function*(f,c,d,p=!1){const _=new Ng(f);let v;try{v=yield _.verify(d)}catch{v=yield _.verify(d,!0)}const I=Object.assign({},c);return Object.assign(I,p?{captchaResp:v}:{captchaResponse:v}),Object.assign(I,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(I,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),I})).apply(this,arguments)}function Me(f,c,d,p){return kg.apply(this,arguments)}function kg(){return kg=(0,w.Z)(function*(f,c,d,p){var _;if(null!==(_=f._getRecaptchaConfig())&&void 0!==_&&_.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const v=yield Xw(f,c,d,"getOobCode"===d);return p(f,v)}return p(f,c).catch(function(){var v=(0,w.Z)(function*(I){if("auth/missing-recaptcha-token"===I.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const M=yield Xw(f,c,d,"getOobCode"===d);return p(f,M)}return Promise.reject(I)});return function(I){return v.apply(this,arguments)}}())}),kg.apply(this,arguments)}function Ml(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function Gh(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class ws{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return en("not implemented")}_getIdTokenResponse(c){return en("not implemented")}_linkToIdToken(c,d){return en("not implemented")}_getReauthenticationResolver(c){return en("not implemented")}}function Pl(f,c){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,w.Z)(function*(f,c){return $(f,"POST","/v1/accounts:resetPassword",ee(f,c))})).apply(this,arguments)}function Wh(){return(Wh=(0,w.Z)(function*(f,c){return $(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function at(f,c){return kl.apply(this,arguments)}function kl(){return(kl=(0,w.Z)(function*(f,c){return $(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function or(){return(or=(0,w.Z)(function*(f,c){return $(f,"POST","/v1/accounts:update",ee(f,c))})).apply(this,arguments)}function Vg(f,c){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,w.Z)(function*(f,c){return De(f,"POST","/v1/accounts:signInWithPassword",ee(f,c))})).apply(this,arguments)}function Dt(f,c){return Ug.apply(this,arguments)}function Ug(){return(Ug=(0,w.Z)(function*(f,c){return $(f,"POST","/v1/accounts:sendOobCode",ee(f,c))})).apply(this,arguments)}function se(){return(se=(0,w.Z)(function*(f,c){return Dt(f,c)})).apply(this,arguments)}function Zh(f,c){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,w.Z)(function*(f,c){return Dt(f,c)})).apply(this,arguments)}function jg(f,c){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,w.Z)(function*(f,c){return Dt(f,c)})).apply(this,arguments)}function Ll(){return(Ll=(0,w.Z)(function*(f,c){return Dt(f,c)})).apply(this,arguments)}function $g(){return($g=(0,w.Z)(function*(f,c){return De(f,"POST","/v1/accounts:signInWithEmailLink",ee(f,c))})).apply(this,arguments)}function Hg(){return(Hg=(0,w.Z)(function*(f,c){return De(f,"POST","/v1/accounts:signInWithEmailLink",ee(f,c))})).apply(this,arguments)}class hu extends ws{constructor(c,d,p,_=null){super("password",p),this._email=c,this._password=d,this._tenantId=_}static _fromEmailAndPassword(c,d){return new hu(c,d,"password")}static _fromEmailAndCode(c,d,p=null){return new hu(c,d,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,w.Z)(function*(){switch(d.signInMethod){case"password":return Me(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Vg);case"emailLink":return function Px(f,c){return $g.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:Ct(c,"internal-error")}})()}_linkToIdToken(c,d){var p=this;return(0,w.Z)(function*(){switch(p.signInMethod){case"password":return Me(c,{idToken:d,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",at);case"emailLink":return function Nx(f,c){return Hg.apply(this,arguments)}(c,{idToken:d,email:p._email,oobCode:p._password});default:Ct(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Jr(f,c){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,w.Z)(function*(f,c){return De(f,"POST","/v1/accounts:signInWithIdp",ee(f,c))})).apply(this,arguments)}class Zi extends ws{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new Zi(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):Ct("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_}=d,v=(0,Jt._T)(d,["providerId","signInMethod"]);if(!p||!_)return null;const I=new Zi(p,_);return I.idToken=v.idToken||void 0,I.accessToken=v.accessToken||void 0,I.secret=v.secret,I.nonce=v.nonce,I.pendingToken=v.pendingToken||null,I}_getIdTokenResponse(c){return Jr(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,Jr(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,Jr(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,z.xO)(d)}return c}}function Kh(){return(Kh=(0,w.Z)(function*(f,c){return $(f,"POST","/v1/accounts:sendVerificationCode",ee(f,c))})).apply(this,arguments)}function $s(){return($s=(0,w.Z)(function*(f,c){return De(f,"POST","/v1/accounts:signInWithPhoneNumber",ee(f,c))})).apply(this,arguments)}function Ki(){return(Ki=(0,w.Z)(function*(f,c){const d=yield De(f,"POST","/v1/accounts:signInWithPhoneNumber",ee(f,c));if(d.temporaryProof)throw kn(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const ib={USER_NOT_FOUND:"user-not-found"};function pu(){return(pu=(0,w.Z)(function*(f,c){return De(f,"POST","/v1/accounts:signInWithPhoneNumber",ee(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),ib)})).apply(this,arguments)}class me extends ws{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new me({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new me({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function zg(f,c){return $s.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function rb(f,c){return Ki.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function ne(f,c){return pu.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:p,verificationCode:_}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:p,code:_}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:v}=c;return p||d||_||v?new me({verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:v}):null}}class bs{constructor(c){var d,p,_,v,I,M;const K=(0,z.zd)((0,z.pd)(c)),de=null!==(d=K.apiKey)&&void 0!==d?d:null,ve=null!==(p=K.oobCode)&&void 0!==p?p:null,Te=function mu(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(_=K.mode)&&void 0!==_?_:null);Y(de&&ve&&Te,"argument-error"),this.apiKey=de,this.operation=Te,this.code=ve,this.continueUrl=null!==(v=K.continueUrl)&&void 0!==v?v:null,this.languageCode=null!==(I=K.languageCode)&&void 0!==I?I:null,this.tenantId=null!==(M=K.tenantId)&&void 0!==M?M:null}static parseLink(c){const d=function Qh(f){const c=(0,z.zd)((0,z.pd)(f)).link,d=c?(0,z.zd)((0,z.pd)(c)).deep_link_id:null,p=(0,z.zd)((0,z.pd)(f)).deep_link_id;return(p?(0,z.zd)((0,z.pd)(p)).link:null)||p||d||c||f}(c);try{return new bs(d)}catch{return null}}}let Yh=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,p){return hu._fromEmailAndPassword(d,p)}static credentialWithLink(d,p){const _=bs.parseLink(p);return Y(_,"argument-error"),hu._fromEmailAndCode(d,_.code,_.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class Is{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Lr extends Is{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Cs extends Lr{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return Y("providerId"in d&&"signInMethod"in d,"argument-error"),Zi._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return Y(c.idToken||c.accessToken,"argument-error"),Zi._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Cs.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Cs.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:p,oauthTokenSecret:_,pendingToken:v,nonce:I,providerId:M}=c;if(!p&&!_&&!d&&!v||!M)return null;try{return new Cs(M)._credential({idToken:d,accessToken:p,nonce:I,pendingToken:v})}catch{return null}}}let ei=(()=>{class f extends Lr{constructor(){super("facebook.com")}static credential(d){return Zi._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),Ri=(()=>{class f extends Lr{constructor(){super("google.com"),this.addScope("profile")}static credential(d,p){return Zi._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:_}=d;if(!p&&!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),_t=(()=>{class f extends Lr{constructor(){super("github.com")}static credential(d){return Zi._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class Hs extends ws{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return Jr(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,Jr(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,Jr(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_,pendingToken:v}=d;return p&&_&&v&&p===_?new Hs(p,v):null}static _create(c,d){return new Hs(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Bl extends Is{constructor(c){Y(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Bl.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Bl.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=Hs.fromJSON(c);return Y(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:p}=c;if(!d||!p)return null;try{return Hs._create(p,d)}catch{return null}}}let Qi=(()=>{class f extends Lr{constructor(){super("twitter.com")}static credential(d,p){return Zi._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:p,oauthTokenSecret:_}=d;if(!p||!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function va(f,c){return _u.apply(this,arguments)}function _u(){return(_u=(0,w.Z)(function*(f,c){return De(f,"POST","/v1/accounts:signUp",ee(f,c))})).apply(this,arguments)}class ti{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,p,_=!1){return(0,w.Z)(function*(){const v=yield q._fromIdTokenResponse(c,p,_),I=yu(p);return new ti({user:v,providerId:I,_tokenResponse:p,operationType:d})})()}static _forOperation(c,d,p){return(0,w.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const _=yu(p);return new ti({user:c,providerId:_,_tokenResponse:p,operationType:d})})()}}function yu(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function vu(){return(vu=(0,w.Z)(function*(f){var c;const d=Zt(f);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new ti({user:d.currentUser,providerId:null,operationType:"signIn"});const p=yield va(d,{returnSecureToken:!0}),_=yield ti._fromIdTokenResponse(d,"signIn",p,!0);return yield d._updateCurrentUser(_.user),_})).apply(this,arguments)}class zs extends z.ZR{constructor(c,d,p,_){var v;super(d.code,d.message),this.operationType=p,this.user=_,Object.setPrototypeOf(this,zs.prototype),this.customData={appName:c.name,tenantId:null!==(v=c.tenantId)&&void 0!==v?v:void 0,_serverResponse:d.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,d,p,_){return new zs(c,d,p,_)}}function Jh(f,c,d,p){return("reauthenticate"===c?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(v=>{throw"auth/multi-factor-auth-required"===v.code?zs._fromErrorAndOperation(f,v,c,p):v})}function ef(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function Eu(){return Eu=(0,w.Z)(function*(f,c){const d=(0,z.m9)(f);yield Vr(!0,d,c);const{providerUserInfo:p}=yield function Al(f,c){return kr.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),_=ef(p||[]);return d.providerData=d.providerData.filter(v=>_.has(v.providerId)),_.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Eu.apply(this,arguments)}function tf(f,c){return nf.apply(this,arguments)}function nf(){return(nf=(0,w.Z)(function*(f,c,d=!1){const p=yield Yr(f,c._linkToIdToken(f.auth,yield f.getIdToken()),d);return ti._forOperation(f,"link",p)})).apply(this,arguments)}function Vr(f,c,d){return rf.apply(this,arguments)}function rf(){return(rf=(0,w.Z)(function*(f,c,d){yield vr(c);const _=!1===f?"provider-already-linked":"no-such-provider";Y(ef(c.providerData).has(d)===f,c.auth,_)})).apply(this,arguments)}function sf(f,c){return af.apply(this,arguments)}function af(){return(af=(0,w.Z)(function*(f,c,d=!1){const{auth:p}=f,_="reauthenticate";try{const v=yield Yr(f,Jh(p,_,c,f),d);Y(v.idToken,p,"internal-error");const I=fa(v.idToken);Y(I,p,"internal-error");const{sub:M}=I;return Y(f.uid===M,p,"user-mismatch"),ti._forOperation(f,_,v)}catch(v){throw"auth/user-not-found"===v?.code&&Ct(p,"user-mismatch"),v}})).apply(this,arguments)}function Gg(f,c){return lf.apply(this,arguments)}function lf(){return(lf=(0,w.Z)(function*(f,c,d=!1){const p="signIn",_=yield Jh(f,p,c),v=yield ti._fromIdTokenResponse(f,p,_);return d||(yield f._updateCurrentUser(v.user)),v})).apply(this,arguments)}function wu(f,c){return bu.apply(this,arguments)}function bu(){return(bu=(0,w.Z)(function*(f,c){return Gg(Zt(f),c)})).apply(this,arguments)}function Wg(f,c){return cf.apply(this,arguments)}function cf(){return(cf=(0,w.Z)(function*(f,c){const d=(0,z.m9)(f);return yield Vr(!1,d,c.providerId),tf(d,c)})).apply(this,arguments)}function Zg(f,c){return ar.apply(this,arguments)}function ar(){return(ar=(0,w.Z)(function*(f,c){return sf((0,z.m9)(f),c)})).apply(this,arguments)}function uf(){return(uf=(0,w.Z)(function*(f,c){return De(f,"POST","/v1/accounts:signInWithCustomToken",ee(f,c))})).apply(this,arguments)}function $t(){return $t=(0,w.Z)(function*(f,c){const d=Zt(f),p=yield function ob(f,c){return uf.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),_=yield ti._fromIdTokenResponse(d,"signIn",p);return yield d._updateCurrentUser(_.user),_}),$t.apply(this,arguments)}class Ul{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?Iu._fromServerResponse(c,d):"totpInfo"in d?ce._fromServerResponse(c,d):Ct(c,"internal-error")}}class Iu extends Ul{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new Iu(d)}}class ce extends Ul{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new ce(d)}}function Zn(f,c,d){var p;Y((null===(p=d.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),Y(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(Y(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(Y(d.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function lt(f){return An.apply(this,arguments)}function An(){return(An=(0,w.Z)(function*(f){const c=Zt(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function qs(){return(qs=(0,w.Z)(function*(f,c,d){const p=Zt(f),_={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&Zn(p,_,d),yield Me(p,_,"getOobCode",Zh)})).apply(this,arguments)}function Cu(){return Cu=(0,w.Z)(function*(f,c,d){yield Pl((0,z.m9)(f),{oobCode:c,newPassword:d}).catch(function(){var p=(0,w.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&lt(f),_});return function(_){return p.apply(this,arguments)}}())}),Cu.apply(this,arguments)}function Ea(){return Ea=(0,w.Z)(function*(f,c){yield function Lg(f,c){return or.apply(this,arguments)}((0,z.m9)(f),{oobCode:c})}),Ea.apply(this,arguments)}function Qg(f,c){return df.apply(this,arguments)}function df(){return(df=(0,w.Z)(function*(f,c){const d=(0,z.m9)(f),p=yield Pl(d,{oobCode:c}),_=p.requestType;switch(Y(_,d,"internal-error"),_){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Y(p.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Y(p.mfaInfo,d,"internal-error");default:Y(p.email,d,"internal-error")}let v=null;return p.mfaInfo&&(v=Ul._fromServerResponse(Zt(d),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:v},operation:_}})).apply(this,arguments)}function pe(){return(pe=(0,w.Z)(function*(f,c){const{data:d}=yield Qg((0,z.m9)(f),c);return d.email})).apply(this,arguments)}function Vt(){return(Vt=(0,w.Z)(function*(f,c,d){const p=Zt(f),I=yield Me(p,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",va).catch(K=>{throw"auth/password-does-not-meet-requirements"===K.code&&lt(f),K}),M=yield ti._fromIdTokenResponse(p,"signIn",I);return yield p._updateCurrentUser(M.user),M})).apply(this,arguments)}function Ln(){return(Ln=(0,w.Z)(function*(f,c,d){const p=Zt(f),_={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function v(I,M){Y(M.handleCodeInApp,p,"argument-error"),M&&Zn(p,I,M)})(_,d),yield Me(p,_,"getOobCode",jg)})).apply(this,arguments)}function Yi(){return(Yi=(0,w.Z)(function*(f,c,d){const p=(0,z.m9)(f),_=Yh.credentialWithLink(c,d||Sn());return Y(_._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),wu(p,_)})).apply(this,arguments)}function Ve(){return(Ve=(0,w.Z)(function*(f,c){return $(f,"POST","/v1/accounts:createAuthUri",ee(f,c))})).apply(this,arguments)}function Tu(){return Tu=(0,w.Z)(function*(f,c){const p={identifier:c,continueUri:zi()?Sn():"http://localhost"},{signinMethods:_}=yield function ba(f,c){return Ve.apply(this,arguments)}((0,z.m9)(f),p);return _||[]}),Tu.apply(this,arguments)}function sn(){return sn=(0,w.Z)(function*(f,c){const d=(0,z.m9)(f),_={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&Zn(d.auth,_,c);const{email:v}=yield function Mx(f,c){return se.apply(this,arguments)}(d.auth,_);v!==f.email&&(yield f.reload())}),sn.apply(this,arguments)}function Gs(){return Gs=(0,w.Z)(function*(f,c,d){const p=(0,z.m9)(f),v={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};d&&Zn(p.auth,v,d);const{email:I}=yield function tb(f,c){return Ll.apply(this,arguments)}(p.auth,v);I!==f.email&&(yield f.reload())}),Gs.apply(this,arguments)}function Mo(){return(Mo=(0,w.Z)(function*(f,c){return $(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ji(){return Ji=(0,w.Z)(function*(f,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const p=(0,z.m9)(f),v={idToken:yield p.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},I=yield Yr(p,function Xi(f,c){return Mo.apply(this,arguments)}(p.auth,v));p.displayName=I.displayName||null,p.photoURL=I.photoUrl||null;const M=p.providerData.find(({providerId:K})=>"password"===K);M&&(M.displayName=p.displayName,M.photoURL=p.photoURL),yield p._updateTokensIfNecessary(I)}),Ji.apply(this,arguments)}function Ca(f,c,d){return et.apply(this,arguments)}function et(){return et=(0,w.Z)(function*(f,c,d){const{auth:p}=f,v={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(v.email=c),d&&(v.password=d);const I=yield Yr(f,function Fg(f,c){return Wh.apply(this,arguments)}(p,v));yield f._updateTokensIfNecessary(I,!0)}),et.apply(this,arguments)}class Ws{constructor(c,d,p={}){this.isNewUser=c,this.providerId=d,this.profile=p}}class hf extends Ws{constructor(c,d,p,_){super(c,d,p),this.username=_}}class es extends Ws{constructor(c,d){super(c,"facebook.com",d)}}class Du extends hf{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class Ta extends Ws{constructor(c,d){super(c,"google.com",d)}}class ql extends hf{constructor(c,d,p){super(c,"twitter.com",d,p)}}function Kn(f){const{user:c,_tokenResponse:d}=f;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function Ox(f){var c,d;if(!f)return null;const{providerId:p}=f,_=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},v=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const I=null===(d=null===(c=fa(f.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if(I)return new Ws(v,"anonymous"!==I&&"custom"!==I?I:null)}if(!p)return null;switch(p){case"facebook.com":return new es(v,_);case"github.com":return new Du(v,_);case"google.com":return new Ta(v,_);case"twitter.com":return new ql(v,_,f.screenName||null);case"custom":case"anonymous":return new Ws(v,null);default:return new Ws(v,p,_)}}(d)}class Da{constructor(c,d,p){this.type=c,this.credential=d,this.user=p}static _fromIdtoken(c,d){return new Da("enroll",c,d)}static _fromMfaPendingCredential(c){return new Da("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,p;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Da._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return Da._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Jg{constructor(c,d,p){this.session=c,this.hints=d,this.signInResolver=p}static _fromError(c,d){const p=Zt(c),_=d.customData._serverResponse,v=(_.mfaInfo||[]).map(M=>Ul._fromServerResponse(p,M));Y(_.mfaPendingCredential,p,"internal-error");const I=Da._fromMfaPendingCredential(_.mfaPendingCredential);return new Jg(I,v,function(){var M=(0,w.Z)(function*(K){const de=yield K._process(p,I);delete _.mfaInfo,delete _.mfaPendingCredential;const ve=Object.assign(Object.assign({},_),{idToken:de.idToken,refreshToken:de.refreshToken});switch(d.operationType){case"signIn":const Te=yield ti._fromIdTokenResponse(p,d.operationType,ve);return yield p._updateCurrentUser(Te.user),Te;case"reauthenticate":return Y(d.user,p,"internal-error"),ti._forOperation(d.user,d.operationType,ve);default:Ct(p,"internal-error")}});return function(K){return M.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,w.Z)(function*(){return d.signInResolver(c)})()}}class e_{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(p=>Ul._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new e_(c)}getSession(){var c=this;return(0,w.Z)(function*(){return Da._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var p=this;return(0,w.Z)(function*(){const _=c,v=yield p.getSession(),I=yield Yr(p.user,_._process(p.user.auth,v,d));return yield p.user._updateTokensIfNecessary(I),p.user.reload()})()}unenroll(c){var d=this;return(0,w.Z)(function*(){const p="string"==typeof c?c:c.uid,_=yield d.user.getIdToken();try{const v=yield Yr(d.user,function Hx(f,c){return $(f,"POST","/v2/accounts/mfaEnrollment:withdraw",ee(f,c))}(d.user.auth,{idToken:_,mfaEnrollmentId:p}));d.enrolledFactors=d.enrolledFactors.filter(({uid:I})=>I!==p),yield d.user._updateTokensIfNecessary(v),yield d.user.reload()}catch(v){throw v}})()}}const t_=new WeakMap,pf="__sak";class mf{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(pf,"1"),this.storage.removeItem(pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const ns=(()=>{class f extends mf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,p)=>this.onStorageEvent(d,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function n_(){const f=(0,z.z$)();return Wi(f)||$e(f)}()&&function rt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ce(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const p of Object.keys(this.listeners)){const _=this.storage.getItem(p),v=this.localCache[p];_!==v&&d(p,v,_)}}onStorageEvent(d,p=!1){if(!d.key)return void this.forAllChangedKeys((M,K,de)=>{this.notifyListeners(M,de)});const _=d.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const M=this.storage.getItem(_);if(d.newValue!==M)null!==d.newValue?this.storage.setItem(_,d.newValue):this.storage.removeItem(_);else if(this.localCache[_]===d.newValue&&!p)return}const v=()=>{const M=this.storage.getItem(_);!p&&this.localCache[_]===M||this.notifyListeners(_,M)},I=this.storage.getItem(_);!function hn(){return(0,z.w1)()&&10===document.documentMode}()||I===d.newValue||d.newValue===d.oldValue?v():setTimeout(v,10)}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const v of Array.from(_))v(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,p,_)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:p,newValue:_}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,p){var _=()=>super._set,v=this;return(0,w.Z)(function*(){yield _().call(v,d,p),v.localCache[d]=JSON.stringify(p)})()}_get(d){var p=()=>super._get,_=this;return(0,w.Z)(function*(){const v=yield p().call(_,d);return _.localCache[d]=JSON.stringify(v),v})()}_remove(d){var p=()=>super._remove,_=this;return(0,w.Z)(function*(){yield p().call(_,d),delete _.localCache[d]})()}}return f.type="LOCAL",f})(),ko=(()=>{class f extends mf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,p){}_removeListener(d,p){}}return f.type="SESSION",f})();let Qn=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const p=this.receivers.find(v=>v.isListeningto(d));if(p)return p;const _=new f(d);return this.receivers.push(_),_}isListeningto(d){return this.eventTarget===d}handleEvent(d){var p=this;return(0,w.Z)(function*(){const _=d,{eventId:v,eventType:I,data:M}=_.data,K=p.handlersMap[I];if(!K?.size)return;_.ports[0].postMessage({status:"ack",eventId:v,eventType:I});const de=Array.from(K).map(function(){var Te=(0,w.Z)(function*(pn){return pn(_.origin,M)});return function(pn){return Te.apply(this,arguments)}}()),ve=yield function Wx(f){return Promise.all(f.map(function(){var c=(0,w.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(p){return{fulfilled:!1,reason:p}}});return function(d){return c.apply(this,arguments)}}()))}(de);_.ports[0].postMessage({status:"done",eventId:v,eventType:I,response:ve})})()}_subscribe(d,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(p)}_unsubscribe(d,p){this.handlersMap[d]&&p&&this.handlersMap[d].delete(p),(!p||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function Zs(f="",c=10){let d="";for(let p=0;p<c;p++)d+=Math.floor(10*Math.random());return f+d}class _i{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,p=50){var _=this;return(0,w.Z)(function*(){const v=typeof MessageChannel<"u"?new MessageChannel:null;if(!v)throw new Error("connection_unavailable");let I,M;return new Promise((K,de)=>{const ve=Zs("",20);v.port1.start();const Te=setTimeout(()=>{de(new Error("unsupported_event"))},p);M={messageChannel:v,onMessage(pn){const Pi=pn;if(Pi.data.eventId===ve)switch(Pi.data.status){case"ack":clearTimeout(Te),I=setTimeout(()=>{de(new Error("timeout"))},3e3);break;case"done":clearTimeout(I),K(Pi.data.response);break;default:clearTimeout(Te),clearTimeout(I),de(new Error("invalid_response"))}}},_.handlers.add(M),v.port1.addEventListener("message",M.onMessage),_.target.postMessage({eventType:c,eventId:ve,data:d},[v.port2])}).finally(()=>{M&&_.removeMessageHandler(M)})})()}}function vn(){return window}function Au(){return typeof vn().WorkerGlobalScope<"u"&&"function"==typeof vn().importScripts}function Wl(){return(Wl=(0,w.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const xu="firebaseLocalStorageDb",Zl="firebaseLocalStorage",_f="fbase_key";class Ks{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function Qs(f,c){return f.transaction([Zl],c?"readwrite":"readonly").objectStore(Zl)}function Ru(){const f=indexedDB.open(xu,1);return new Promise((c,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(Zl,{keyPath:_f})}catch(_){d(_)}}),f.addEventListener("success",(0,w.Z)(function*(){const p=f.result;p.objectStoreNames.contains(Zl)?c(p):(p.close(),yield function Sa(){const f=indexedDB.deleteDatabase(xu);return new Ks(f).toPromise()}(),c(yield Ru()))}))})}function lb(f,c,d){return a_.apply(this,arguments)}function a_(){return(a_=(0,w.Z)(function*(f,c,d){const p=Qs(f,!0).put({[_f]:c,value:d});return new Ks(p).toPromise()})).apply(this,arguments)}function yf(){return(yf=(0,w.Z)(function*(f,c){const d=Qs(f,!1).get(c),p=yield new Ks(d).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function l_(f,c){const d=Qs(f,!0).delete(c);return new Ks(d).toPromise()}const Aa=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,w.Z)(function*(){return d.db||(d.db=yield Ru()),d.db})()}_withRetries(d){var p=this;return(0,w.Z)(function*(){let _=0;for(;;)try{const v=yield p._openDb();return yield d(v)}catch(v){if(_++>3)throw v;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,w.Z)(function*(){return Au()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,w.Z)(function*(){d.receiver=Qn._getInstance(function gf(){return Au()?self:null}()),d.receiver._subscribe("keyChanged",function(){var p=(0,w.Z)(function*(_,v){return{keyProcessed:(yield d._poll()).includes(v.key)}});return function(_,v){return p.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var p=(0,w.Z)(function*(_,v){return["keyChanged"]});return function(_,v){return p.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,w.Z)(function*(){var p,_;if(d.activeServiceWorker=yield function i_(){return Wl.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new _i(d.activeServiceWorker);const v=yield d.sender._send("ping",{},800);v&&null!==(p=v[0])&&void 0!==p&&p.fulfilled&&null!==(_=v[0])&&void 0!==_&&_.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var p=this;return(0,w.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function s_(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:d},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,w.Z)(function*(){try{if(!indexedDB)return!1;const d=yield Ru();return yield lb(d,pf,"1"),yield l_(d,pf),!0}catch{}return!1})()}_withPendingWrite(d){var p=this;return(0,w.Z)(function*(){p.pendingWrites++;try{yield d()}finally{p.pendingWrites--}})()}_set(d,p){var _=this;return(0,w.Z)(function*(){return _._withPendingWrite((0,w.Z)(function*(){return yield _._withRetries(v=>lb(v,d,p)),_.localCache[d]=p,_.notifyServiceWorker(d)}))})()}_get(d){var p=this;return(0,w.Z)(function*(){const _=yield p._withRetries(v=>function Zx(f,c){return yf.apply(this,arguments)}(v,d));return p.localCache[d]=_,_})()}_remove(d){var p=this;return(0,w.Z)(function*(){return p._withPendingWrite((0,w.Z)(function*(){return yield p._withRetries(_=>l_(_,d)),delete p.localCache[d],p.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,w.Z)(function*(){const p=yield d._withRetries(I=>{const M=Qs(I,!1).getAll();return new Ks(M).toPromise()});if(!p)return[];if(0!==d.pendingWrites)return[];const _=[],v=new Set;for(const{fbase_key:I,value:M}of p)v.add(I),JSON.stringify(d.localCache[I])!==JSON.stringify(M)&&(d.notifyListeners(I,M),_.push(I));for(const I of Object.keys(d.localCache))d.localCache[I]&&!v.has(I)&&(d.notifyListeners(I,null),_.push(I));return _})()}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const v of Array.from(_))v(p)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,w.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),Kl=1e12;class ub{constructor(c){this.auth=c,this.counter=Kl,this._widgets=new Map}render(c,d){const p=this.counter;return this._widgets.set(p,new db(c,this.auth.name,d||{})),this.counter++,p}reset(c){var d;const p=c||Kl;null===(d=this._widgets.get(p))||void 0===d||d.delete(),this._widgets.delete(p)}getResponse(c){var d;return(null===(d=this._widgets.get(c||Kl))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,w.Z)(function*(){var p;return null===(p=d._widgets.get(c||Kl))||void 0===p||p.execute(),""})()}}class db{constructor(c,d,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const _="string"==typeof c?document.getElementById(c):c;Y(_,"argument-error",{appName:d}),this.container=_,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function hb(f){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Mu=Qw("rcb"),fb=new Gi(3e4,6e4);class pb{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=vn().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return Y(function Xx(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&yr(vn().grecaptcha)?Promise.resolve(vn().grecaptcha):new Promise((p,_)=>{const v=vn().setTimeout(()=>{_(Ft(c,"network-request-failed"))},fb.get());vn()[Mu]=()=>{vn().clearTimeout(v),delete vn()[Mu];const M=vn().grecaptcha;if(!M||!yr(M))return void _(Ft(c,"internal-error"));const K=M.render;M.render=(de,ve)=>{const Te=K(de,ve);return this.counter++,Te},this.hostLanguage=d,p(M)},Pg(`https://www.google.com/recaptcha/api.js??${(0,z.xO)({onload:Mu,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(v),_(Ft(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=vn().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class mb{load(c){return(0,w.Z)(function*(){return new ub(c)})()}clearedOneInstance(){}}const lr="recaptcha",f_={theme:"light",type:"image"};class gb{constructor(c,d,p=Object.assign({},f_)){this.parameters=p,this.type=lr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Zt(c),this.isInvisible="invisible"===this.parameters.size,Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const _="string"==typeof d?document.getElementById(d):d;Y(_,this.auth,"argument-error"),this.container=_,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mb:new pb,this.validateStartingState()}verify(){var c=this;return(0,w.Z)(function*(){c.assertNotDestroyed();const d=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(d)||new Promise(v=>{const I=M=>{M&&(c.tokenChangeListeners.delete(I),v(M))};c.tokenChangeListeners.add(I),c.isInvisible&&p.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){Y(!this.parameters.sitekey,this.auth,"argument-error"),Y(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(p=>p(d)),"function"==typeof c)c(d);else if("string"==typeof c){const p=vn()[c];"function"==typeof p&&p(d)}}}assertNotDestroyed(){Y(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,w.Z)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const p=document.createElement("div");d.appendChild(p),d=p}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,w.Z)(function*(){Y(zi()&&!Au(),c.auth,"internal-error"),yield function _b(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function Dl(f){return vs.apply(this,arguments)}(c.auth);Y(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return Y(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Pu{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=me._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function Ef(){return(Ef=(0,w.Z)(function*(f,c,d){const p=Zt(f),_=yield Ql(p,c,(0,z.m9)(d));return new Pu(_,v=>wu(p,v))})).apply(this,arguments)}function bf(){return(bf=(0,w.Z)(function*(f,c,d){const p=(0,z.m9)(f);yield Vr(!1,p,"phone");const _=yield Ql(p.auth,c,(0,z.m9)(d));return new Pu(_,v=>Wg(p,v))})).apply(this,arguments)}function Nu(){return(Nu=(0,w.Z)(function*(f,c,d){const p=(0,z.m9)(f),_=yield Ql(p.auth,c,(0,z.m9)(d));return new Pu(_,v=>Zg(p,v))})).apply(this,arguments)}function Ql(f,c,d){return Rt.apply(this,arguments)}function Rt(){return Rt=(0,w.Z)(function*(f,c,d){var p;const _=yield d.verify();try{let v;if(Y("string"==typeof _,f,"argument-error"),Y(d.type===lr,f,"argument-error"),v="string"==typeof c?{phoneNumber:c}:c,"session"in v){const I=v.session;if("phoneNumber"in v)return Y("enroll"===I.type,f,"internal-error"),(yield function Ux(f,c){return $(f,"POST","/v2/accounts/mfaEnrollment:start",ee(f,c))}(f,{idToken:I.credential,phoneEnrollmentInfo:{phoneNumber:v.phoneNumber,recaptchaToken:_}})).phoneSessionInfo.sessionInfo;{Y("signin"===I.type,f,"internal-error");const M=(null===(p=v.multiFactorHint)||void 0===p?void 0:p.uid)||v.multiFactorUid;return Y(M,f,"missing-multi-factor-info"),(yield function vf(f,c){return $(f,"POST","/v2/accounts/mfaSignIn:start",ee(f,c))}(f,{mfaPendingCredential:I.credential,mfaEnrollmentId:M,phoneSignInInfo:{recaptchaToken:_}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:I}=yield function nb(f,c){return Kh.apply(this,arguments)}(f,{phoneNumber:v.phoneNumber,recaptchaToken:_});return I}}finally{d._reset()}}),Rt.apply(this,arguments)}function xa(){return(xa=(0,w.Z)(function*(f,c){yield tf((0,z.m9)(f),c)})).apply(this,arguments)}let Vn=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=Zt(d)}verifyPhoneNumber(d,p){return Ql(this.auth,d,(0,z.m9)(p))}static credential(d,p){return me._fromVerification(d,p)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:p,temporaryProof:_}=d;return p&&_?me._fromTokenResponse(p,_):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function Oo(f,c){return c?Qe(c):(Y(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class ku extends ws{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Jr(c,this._buildIdpRequest())}_linkToIdToken(c,d){return Jr(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return Jr(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function Ra(f){return Gg(f.auth,new ku(f),f.bypassAuthState)}function ii(f){const{auth:c,user:d}=f;return Y(d,c,"internal-error"),sf(d,new ku(f),f.bypassAuthState)}function yb(f){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,w.Z)(function*(f){const{auth:c,user:d}=f;return Y(d,c,"internal-error"),tf(d,new ku(f),f.bypassAuthState)})).apply(this,arguments)}class m_{constructor(c,d,p,_,v=!1){this.auth=c,this.resolver=p,this.user=_,this.bypassAuthState=v,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,w.Z)(function*(p,_){c.pendingPromise={resolve:p,reject:_};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(v){c.reject(v)}});return function(p,_){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,w.Z)(function*(){const{urlResponse:p,sessionId:_,postBody:v,tenantId:I,error:M,type:K}=c;if(M)return void d.reject(M);const de={auth:d.auth,requestUri:p,sessionId:_,tenantId:I||void 0,postBody:v||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(K)(de))}catch(ve){d.reject(ve)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Ra;case"linkViaPopup":case"linkViaRedirect":return yb;case"reauthViaPopup":case"reauthViaRedirect":return ii;default:Ct(this.auth,"internal-error")}}resolve(c){Wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ys=new Gi(2e3,1e4);function Tf(){return(Tf=(0,w.Z)(function*(f,c,d){const p=Zt(f);Ke(f,c,Is);const _=Oo(p,d);return new Ne(p,"signInViaPopup",c,_).executeNotNull()})).apply(this,arguments)}function Ou(){return(Ou=(0,w.Z)(function*(f,c,d){const p=(0,z.m9)(f);Ke(p.auth,c,Is);const _=Oo(p.auth,d);return new Ne(p.auth,"reauthViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}function Df(){return(Df=(0,w.Z)(function*(f,c,d){const p=(0,z.m9)(f);Ke(p.auth,c,Is);const _=Oo(p.auth,d);return new Ne(p.auth,"linkViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}let Ne=(()=>{class f extends m_{constructor(d,p,_,v,I){super(d,p,v,I),this.provider=_,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,w.Z)(function*(){const p=yield d.execute();return Y(p,d.auth,"internal-error"),p})()}onExecution(){var d=this;return(0,w.Z)(function*(){Wt(1===d.filter.length,"Popup operations only handle one event");const p=Zs();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],p),d.authWindow.associatedEvent=p,d.resolver._originValidation(d.auth).catch(_=>{d.reject(_)}),d.resolver._isIframeWebStorageSupported(d.auth,_=>{_||d.reject(Ft(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Ft(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var p,_;this.pollId=null!==(_=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==_&&_.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ft(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,Ys.get())};d()}}return f.currentPopupAction=null,f})();const v_="pendingRedirect",Fu=new Map;class vb extends m_{constructor(c,d,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,w.Z)(function*(){let p=Fu.get(d.auth._key());if(!p){try{const v=(yield function Eb(f,c){return Sf.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;p=()=>Promise.resolve(v)}catch(_){p=()=>Promise.reject(_)}Fu.set(d.auth._key(),p)}return d.bypassAuthState||Fu.set(d.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,p=this;return(0,w.Z)(function*(){if("signInViaRedirect"===c.type)return d().call(p,c);if("unknown"!==c.type){if(c.eventId){const _=yield p.auth._redirectUserForId(c.eventId);if(_)return p.user=_,d().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,w.Z)(function*(){})()}cleanUp(){}}function Sf(){return(Sf=(0,w.Z)(function*(f,c){const d=w_(c),p=E_(f);if(!(yield p._isAvailable()))return!1;const _="true"===(yield p._get(d));return yield p._remove(d),_})).apply(this,arguments)}function Lu(f,c){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,w.Z)(function*(f,c){return E_(f)._set(w_(c),"true")})).apply(this,arguments)}function Af(f,c){Fu.set(f._key(),c)}function E_(f){return Qe(f._redirectPersistence)}function w_(f){return Fn(v_,f.config.apiKey,f.name)}function bb(f,c,d){return function te(f,c,d){return ct.apply(this,arguments)}(f,c,d)}function ct(){return(ct=(0,w.Z)(function*(f,c,d){const p=Zt(f);Ke(f,c,Is),yield p._initializationPromise;const _=Oo(p,d);return yield Lu(_,p),_._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function is(f,c,d){return function ss(f,c,d){return xn.apply(this,arguments)}(f,c,d)}function xn(){return(xn=(0,w.Z)(function*(f,c,d){const p=(0,z.m9)(f);Ke(p.auth,c,Is),yield p.auth._initializationPromise;const _=Oo(p.auth,d);yield Lu(_,p.auth);const v=yield Rf(p);return _._openRedirect(p.auth,c,"reauthViaRedirect",v)})).apply(this,arguments)}function b_(f,c,d){return function Yl(f,c,d){return yi.apply(this,arguments)}(f,c,d)}function yi(){return(yi=(0,w.Z)(function*(f,c,d){const p=(0,z.m9)(f);Ke(p.auth,c,Is),yield p.auth._initializationPromise;const _=Oo(p.auth,d);yield Vr(!1,p,c.providerId),yield Lu(_,p.auth);const v=yield Rf(p);return _._openRedirect(p.auth,c,"linkViaRedirect",v)})).apply(this,arguments)}function Xl(){return(Xl=(0,w.Z)(function*(f,c){return yield Zt(f)._initializationPromise,Vu(f,c,!1)})).apply(this,arguments)}function Vu(f,c){return I_.apply(this,arguments)}function I_(){return(I_=(0,w.Z)(function*(f,c,d=!1){const p=Zt(f),_=Oo(p,c),I=yield new vb(p,_,d).execute();return I&&!d&&(delete I.user._redirectEventId,yield p._persistUserIfCurrent(I.user),yield p._setRedirectUser(null,c)),I})).apply(this,arguments)}function Rf(f){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,w.Z)(function*(f){const c=Zs(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class Mf{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(d=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Ib(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return os(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var p;if(c.error&&!os(c)){const _=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";d.onError(Ft(this.auth,_))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const p=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fo(c))}saveEventToCache(c){this.cachedEventUids.add(Fo(c)),this.lastProcessedEventTime=Date.now()}}function Fo(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function os({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function Pf(f){return Nf.apply(this,arguments)}function Nf(){return(Nf=(0,w.Z)(function*(f,c={}){return $(f,"GET","/v1/projects",c)})).apply(this,arguments)}const Cb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kf=/^https?/;function Bu(){return(Bu=(0,w.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield Pf(f);for(const d of c)try{if(Ff(d))return}catch{}Ct(f,"unauthorized-domain")})).apply(this,arguments)}function Ff(f){const c=Sn(),{protocol:d,hostname:p}=new URL(c);if(f.startsWith("chrome-extension://")){const I=new URL(f);return""===I.hostname&&""===p?"chrome-extension:"===d&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&I.hostname===p}if(!kf.test(d))return!1;if(Cb.test(f))return p===f;const _=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+_+"|"+_+")$","i").test(p)}const Tb=new Gi(3e4,6e4);function Lf(){const f=vn().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let Jl=null;const T_=new Gi(5e3,15e3),D_="__/auth/iframe",Bf="emulator/auth/iframe",Db={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wr(f){const c=f.config;Y(c.authDomain,f,"auth-domain-config-required");const d=c.emulator?V(c,Bf):`https://${f.config.authDomain}/${D_}`,p={apiKey:c.apiKey,appName:f.name,v:Fe.SDK_VERSION},_=Sb.get(f.config.apiHost);_&&(p.eid=_);const v=f._getFrameworks();return v.length&&(p.fw=v.join(",")),`${d}?${(0,z.xO)(p).slice(1)}`}function Ht(){return Ht=(0,w.Z)(function*(f){const c=yield function C_(f){return Jl=Jl||function Vf(f){return new Promise((c,d)=>{var p,_,v;function I(){Lf(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Lf(),d(Ft(f,"network-request-failed"))},timeout:Tb.get()})}if(null!==(_=null===(p=vn().gapi)||void 0===p?void 0:p.iframes)&&void 0!==_&&_.Iframe)c(gapi.iframes.getContext());else{if(null===(v=vn().gapi)||void 0===v||!v.load){const M=Qw("iframefcb");return vn()[M]=()=>{gapi.load?I():d(Ft(f,"network-request-failed"))},Pg(`https://apis.google.com/js/api.js?onload=${M}`).catch(K=>d(K))}I()}}).catch(c=>{throw Jl=null,c})}(f),Jl}(f),d=vn().gapi;return Y(d,f,"internal-error"),c.open({where:document.body,url:wr(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Db,dontclear:!0},p=>new Promise(function(){var _=(0,w.Z)(function*(v,I){yield p.restyle({setHideOnLeave:!1});const M=Ft(f,"network-request-failed"),K=vn().setTimeout(()=>{I(M)},T_.get());function de(){vn().clearTimeout(K),v(p)}p.ping(de).then(de,()=>{I(M)})});return function(v,I){return _.apply(this,arguments)}}()))}),Ht.apply(this,arguments)}const Ab={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Uf{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Pb="__/auth/handler",ju="emulator/auth/handler",$u=encodeURIComponent("fac");function Ma(f,c,d,p,_,v){return ec.apply(this,arguments)}function ec(){return(ec=(0,w.Z)(function*(f,c,d,p,_,v){Y(f.config.authDomain,f,"auth-domain-config-required"),Y(f.config.apiKey,f,"invalid-api-key");const I={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:p,v:Fe.SDK_VERSION,eventId:_};if(c instanceof Is){c.setDefaultLanguage(f.languageCode),I.providerId=c.providerId||"",(0,z.xb)(c.getCustomParameters())||(I.customParameters=JSON.stringify(c.getCustomParameters()));for(const[ve,Te]of Object.entries(v||{}))I[ve]=Te}if(c instanceof Lr){const ve=c.getScopes().filter(Te=>""!==Te);ve.length>0&&(I.scopes=ve.join(","))}f.tenantId&&(I.tid=f.tenantId);const M=I;for(const ve of Object.keys(M))void 0===M[ve]&&delete M[ve];const K=yield f._getAppCheckToken(),de=K?`#${$u}=${encodeURIComponent(K)}`:"";return`${function A_({config:f}){return f.emulator?V(f,ju):`https://${f.authDomain}/${Pb}`}(f)}?${(0,z.xO)(M).slice(1)}${de}`})).apply(this,arguments)}const Hu="webStorageSupport",Vo=class Nb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ko,this._completeRedirectFn=Vu,this._overrideRedirectResult=Af}_openPopup(c,d,p,_){var v=this;return(0,w.Z)(function*(){var I;Wt(null===(I=v.eventManagers[c._key()])||void 0===I?void 0:I.manager,"_initialize() not called before _openPopup()");const M=yield Ma(c,d,p,Sn(),_);return function Uu(f,c,d,p=500,_=600){const v=Math.max((window.screen.availHeight-_)/2,0).toString(),I=Math.max((window.screen.availWidth-p)/2,0).toString();let M="";const K=Object.assign(Object.assign({},Ab),{width:p.toString(),height:_.toString(),top:v,left:I}),de=(0,z.z$)().toLowerCase();d&&(M=du(de)?"_blank":d),Mt(de)&&(c=c||"http://localhost",K.scrollbars="yes");const ve=Object.entries(K).reduce((pn,[Pi,ed])=>`${pn}${Pi}=${ed},`,"");if(function k(f=(0,z.z$)()){var c;return $e(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(de)&&"_self"!==M)return function Js(f,c){const d=document.createElement("a");d.href=f,d.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(p)}(c||"",M),new Uf(null);const Te=window.open(c||"",M,ve);Y(Te,f,"popup-blocked");try{Te.focus()}catch{}return new Uf(Te)}(c,M,Zs())})()}_openRedirect(c,d,p,_){var v=this;return(0,w.Z)(function*(){return yield v._originValidation(c),function r_(f){vn().location.href=f}(yield Ma(c,d,p,Sn(),_)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:_,promise:v}=this.eventManagers[d];return _?Promise.resolve(_):(Wt(v,"If manager is not set, promise should be"),v)}const p=this.initAndGetManager(c);return this.eventManagers[d]={promise:p},p.catch(()=>{delete this.eventManagers[d]}),p}initAndGetManager(c){var d=this;return(0,w.Z)(function*(){const p=yield function Lo(f){return Ht.apply(this,arguments)}(c),_=new Mf(c);return p.register("authEvent",v=>(Y(v?.authEvent,c,"invalid-auth-event"),{status:_.onEvent(v.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:_},d.iframes[c._key()]=p,_})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(Hu,{type:Hu},_=>{var v;const I=null===(v=_?.[0])||void 0===v?void 0:v[Hu];void 0!==I&&d(!!I),Ct(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Of(f){return Bu.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return Ce()||Wi()||$e()}};class tc{constructor(c){this.factorId=c}_process(c,d,p){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,p);case"signin":return this._finalizeSignIn(c,d.credential);default:return en("unexpected MultiFactorSessionType")}}}class jf extends tc{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new jf(c)}_finalizeEnroll(c,d,p){return function jx(f,c){return $(f,"POST","/v2/accounts/mfaEnrollment:finalize",ee(f,c))}(c,{idToken:d,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function Qx(f,c){return $(f,"POST","/v2/accounts/mfaSignIn:finalize",ee(f,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Jx=(()=>{class f{constructor(){}static assertion(d){return jf._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var kb="@firebase/auth";class $f{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,w.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function eo(){return window}(0,z.Pz)("authIdTokenMaxAge"),function Fb(f){(0,Fe._registerComponent)(new dn.wA("auth",(c,{options:d})=>{const p=c.getProvider("app").getImmediate(),_=c.getProvider("heartbeat"),v=c.getProvider("app-check-internal"),{apiKey:I,authDomain:M}=p.options;Y(I&&!I.includes(":"),"invalid-api-key",{appName:p.name});const K={apiKey:I,authDomain:M,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ya(f)},de=new Kw(p,_,v,K);return function Rx(f,c){const d=c?.persistence||[],p=(Array.isArray(d)?d:[d]).map(Qe);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(p,c?.popupRedirectResolver)}(de,d),de},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,p)=>{c.getProvider("auth-internal").initialize()})),(0,Fe._registerComponent)(new dn.wA("auth-internal",c=>{const d=Zt(c.getProvider("auth").getImmediate());return new $f(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Fe.registerVersion)(kb,"1.5.0",function nc(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(f)),(0,Fe.registerVersion)(kb,"1.5.0","esm2017")}("Browser");function zf(){return zf=(0,w.Z)(function*(f,c,d){var p;const{BuildInfo:_}=eo();Wt(c.sessionId,"AuthEvent did not contain a session ID");const v=yield function N_(f){return Wu.apply(this,arguments)}(c.sessionId),I={};return $e()?I.ibi=_.packageName:x()?I.apn=_.packageName:Ct(f,"operation-not-supported-in-this-environment"),_.displayName&&(I.appDisplayName=_.displayName),I.sessionId=v,Ma(f,d,c.type,void 0,null!==(p=c.eventId)&&void 0!==p?p:void 0,I)}),zf.apply(this,arguments)}function sc(){return(sc=(0,w.Z)(function*(f){const{BuildInfo:c}=eo(),d={};$e()?d.iosBundleId=c.packageName:x()?d.androidPackageName=c.packageName:Ct(f,"operation-not-supported-in-this-environment"),yield Pf(f,d)})).apply(this,arguments)}function oc(){return(oc=(0,w.Z)(function*(f,c,d){const{cordova:p}=eo();let _=()=>{};try{yield new Promise((v,I)=>{let M=null;function K(){var Te;v();const pn=null===(Te=p.plugins.browsertab)||void 0===Te?void 0:Te.close;"function"==typeof pn&&pn(),"function"==typeof d?.close&&d.close()}function de(){M||(M=window.setTimeout(()=>{I(Ft(f,"redirect-cancelled-by-user"))},2e3))}function ve(){"visible"===document?.visibilityState&&de()}c.addPassiveListener(K),document.addEventListener("resume",de,!1),x()&&document.addEventListener("visibilitychange",ve,!1),_=()=>{c.removePassiveListener(K),document.removeEventListener("resume",de,!1),document.removeEventListener("visibilitychange",ve,!1),M&&window.clearTimeout(M)}})}finally{_()}})).apply(this,arguments)}function Wu(){return(Wu=(0,w.Z)(function*(f){const c=function k_(f){if(Wt(/[0-9a-zA-Z]+/.test(f),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(f);const c=new ArrayBuffer(f.length),d=new Uint8Array(c);for(let p=0;p<f.length;p++)d[p]=f.charCodeAt(p);return d}(f),d=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(d)).map(_=>_.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Ub extends Mf{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(d=>d(c)),super.onEvent(c)}initialized(){var c=this;return(0,w.Z)(function*(){yield c.initPromise})()}}function F_(f){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,w.Z)(function*(f){const c=yield qf()._get(Xn(f));return c&&(yield qf()._remove(Xn(f))),c})).apply(this,arguments)}function ac(){const f=[];for(let d=0;d<20;d++){const p=Math.floor(62*Math.random());f.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return f.join("")}function qf(){return Qe(ns)}function Xn(f){return Fn("authEvent",f.config.apiKey,f.name)}function Pa(f){if(!f?.includes("?"))return{};const[c,...d]=f.split("?");return(0,z.zd)(d.join("?"))}const lc=class V_{constructor(){this._redirectPersistence=ko,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Vu,this._overrideRedirectResult=Af}_initialize(c){var d=this;return(0,w.Z)(function*(){const p=c._key();let _=d.eventManagers.get(p);return _||(_=new Ub(c),d.eventManagers.set(p,_),d.attachCallbackListeners(c,_)),_})()}_openPopup(c){Ct(c,"operation-not-supported-in-this-environment")}_openRedirect(c,d,p,_){var v=this;return(0,w.Z)(function*(){!function Bb(f){var c,d,p,_,v,I,M,K,de,ve;const Te=eo();Y("function"==typeof(null===(c=Te?.universalLinks)||void 0===c?void 0:c.subscribe),f,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Y(typeof(null===(d=Te?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Y("function"==typeof(null===(v=null===(_=null===(p=Te?.cordova)||void 0===p?void 0:p.plugins)||void 0===_?void 0:_.browsertab)||void 0===v?void 0:v.openUrl),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Y("function"==typeof(null===(K=null===(M=null===(I=Te?.cordova)||void 0===I?void 0:I.plugins)||void 0===M?void 0:M.browsertab)||void 0===K?void 0:K.isAvailable),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Y("function"==typeof(null===(ve=null===(de=Te?.cordova)||void 0===de?void 0:de.InAppBrowser)||void 0===ve?void 0:ve.open),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const I=yield v._initialize(c);yield I.initialized(),I.resetRedirect(),function wb(){Fu.clear()}(),yield v._originValidation(c);const M=function Zu(f,c,d=null){return{type:c,eventId:d,urlResponse:null,sessionId:ac(),postBody:null,tenantId:f.tenantId,error:Ft(f,"no-auth-event")}}(c,p,_);yield function Bo(f,c){return qf()._set(Xn(f),c)}(c,M);const K=yield function as(f,c,d){return zf.apply(this,arguments)}(c,M,d),de=yield function P_(f){const{cordova:c}=eo();return new Promise(d=>{c.plugins.browsertab.isAvailable(p=>{let _=null;p?c.plugins.browsertab.openUrl(f):_=c.InAppBrowser.open(f,function ot(f=(0,z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}()?"_blank":"_system","location=yes"),d(_)})})}(K);return function Gu(f,c,d){return oc.apply(this,arguments)}(c,I,de)})()}_isIframeWebStorageSupported(c,d){throw new Error("Method not implemented.")}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function qu(f){return sc.apply(this,arguments)}(c)),this.originValidationPromises[d]}attachCallbackListeners(c,d){const{universalLinks:p,handleOpenURL:_,BuildInfo:v}=eo(),I=setTimeout((0,w.Z)(function*(){yield F_(c),d.onEvent(Uo())}),500),M=function(){var ve=(0,w.Z)(function*(Te){clearTimeout(I);const pn=yield F_(c);let Pi=null;pn&&Te?.url&&(Pi=function L_(f,c){var d,p;const _=function yt(f){const c=Pa(f),d=c.link?decodeURIComponent(c.link):void 0,p=Pa(d).link,_=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Pa(_).link||_||p||d||f}(c);if(_.includes("/__/auth/callback")){const v=Pa(_),I=v.firebaseError?function jb(f){try{return JSON.parse(f)}catch{return null}}(decodeURIComponent(v.firebaseError)):null,M=null===(p=null===(d=I?.code)||void 0===d?void 0:d.split("auth/"))||void 0===p?void 0:p[1],K=M?Ft(M):null;return K?{type:f.type,eventId:f.eventId,tenantId:f.tenantId,error:K,urlResponse:null,sessionId:null,postBody:null}:{type:f.type,eventId:f.eventId,tenantId:f.tenantId,sessionId:f.sessionId,urlResponse:_,postBody:null}}return null}(pn,Te.url)),d.onEvent(Pi||Uo())});return function(pn){return ve.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,M);const K=_,de=`${v.packageName.toLowerCase()}://`;eo().handleOpenURL=function(){var ve=(0,w.Z)(function*(Te){if(Te.toLowerCase().startsWith(de)&&M({url:Te}),"function"==typeof K)try{K(Te)}catch(pn){console.error(pn)}});return function(Te){return ve.apply(this,arguments)}}()}};function Uo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ft("no-auth-event")}}function ls(){var f;return(null===(f=self?.location)||void 0===f?void 0:f.protocol)||null}function U_(f=(0,z.z$)()){return!("file:"!==ls()&&"ionic:"!==ls()&&"capacitor:"!==ls()||!f.toLowerCase().match(/iphone|ipad|ipod|android/))}function Hb(){try{const f=self.localStorage,c=Zs();if(f)return f.setItem(c,"1"),f.removeItem(c),!function sR(f=(0,z.z$)()){return function rR(){return(0,z.w1)()&&11===document?.documentMode}()||function iR(f=(0,z.z$)()){return/Edge\/\d+/.test(f)}(f)}()||(0,z.hl)()}catch{return j_()&&(0,z.hl)()}return!1}function j_(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function to(){return(function tR(){return"http:"===ls()||"https:"===ls()}()||(0,z.ru)()||U_())&&!function nR(){return(0,z.b$)()||(0,z.UG)()}()&&Hb()&&!j_()}function $_(){return U_()&&typeof document<"u"}function En(){return(En=(0,w.Z)(function*(){return!!$_()&&new Promise(f=>{const c=setTimeout(()=>{f(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),f(!0)})})})).apply(this,arguments)}const Jn={LOCAL:"local",NONE:"none",SESSION:"session"},cc=Y,si="persistence";function Qu(f){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,w.Z)(function*(f){yield f._initializationPromise;const c=H_(),d=Fn(si,f.config.apiKey,f.name);c&&c.setItem(d,f._getPersistence())})).apply(this,arguments)}function H_(){var f;try{return(null===(f=function qb(){return typeof window<"u"?window:null}())||void 0===f?void 0:f.sessionStorage)||null}catch{return null}}const oR=Y;class no{constructor(){this.browserResolver=Qe(Vo),this.cordovaResolver=Qe(lc),this.underlyingResolver=null,this._redirectPersistence=ko,this._completeRedirectFn=Vu,this._overrideRedirectResult=Af}_initialize(c){var d=this;return(0,w.Z)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,d,p,_){var v=this;return(0,w.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openPopup(c,d,p,_)})()}_openRedirect(c,d,p,_){var v=this;return(0,w.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openRedirect(c,d,p,_)})()}_isIframeWebStorageSupported(c,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,d)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return $_()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return oR(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,w.Z)(function*(){if(c.underlyingResolver)return;const d=yield function zb(){return En.apply(this,arguments)}();c.underlyingResolver=d?c.cordovaResolver:c.browserResolver})()}}function Gb(f){return f.unwrap()}function Wf(f){return Wb(f)}function Wb(f){const{_tokenResponse:c}=f instanceof z.ZR?f.customData:f;if(!c)return null;if(!(f instanceof z.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Vn.credentialFromResult(f);const d=c.providerId;if(!d||d===st.PASSWORD)return null;let p;switch(d){case st.GOOGLE:p=Ri;break;case st.FACEBOOK:p=ei;break;case st.GITHUB:p=_t;break;case st.TWITTER:p=Qi;break;default:const{oauthIdToken:_,oauthAccessToken:v,oauthTokenSecret:I,pendingToken:M,nonce:K}=c;return v||I||_||M?M?d.startsWith("saml.")?Hs._create(d,M):Zi._fromParams({providerId:d,signInMethod:d,pendingToken:M,idToken:_,accessToken:v}):new Cs(d).credential({idToken:_,accessToken:v,rawNonce:K}):null}return f instanceof z.ZR?p.credentialFromError(f):p.credentialFromResult(f)}function br(f,c){return c.catch(d=>{throw d instanceof z.ZR&&function La(f,c){var d;const p=null===(d=c.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new Zb(f,function Bx(f,c){var d;const p=(0,z.m9)(f),_=c;return Y(c.customData.operationType,p,"argument-error"),Y(null===(d=_.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,p,"argument-error"),Jg._fromError(p,_)}(f,c));else if(p){const _=Wb(c),v=c;_&&(v.credential=_,v.tenantId=p.tenantId||void 0,v.email=p.email||void 0,v.phoneNumber=p.phoneNumber||void 0)}}(f,d),d}).then(d=>{const _=d.user;return{operationType:d.operationType,credential:Wf(d),additionalUserInfo:Kn(d),user:Ss.getOrCreate(_)}})}function Zf(f,c){return Kf.apply(this,arguments)}function Kf(){return(Kf=(0,w.Z)(function*(f,c){const d=yield c;return{verificationId:d.verificationId,confirm:p=>br(f,d.confirm(p))}})).apply(this,arguments)}class Zb{constructor(c,d){this.resolver=d,this.auth=function oi(f){return f.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return br(Gb(this.auth),this.resolver.resolveSignIn(c))}}class Ss{constructor(c){this._delegate=c,this.multiFactor=function zx(f){const c=(0,z.m9)(f);return t_.has(c)||t_.set(c,e_._fromUser(c)),t_.get(c)}(c)}static getOrCreate(c){return Ss.USER_MAP.has(c)||Ss.USER_MAP.set(c,new Ss(c)),Ss.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var d=this;return(0,w.Z)(function*(){return br(d.auth,Wg(d._delegate,c))})()}linkWithPhoneNumber(c,d){var p=this;return(0,w.Z)(function*(){return Zf(p.auth,function wf(f,c,d){return bf.apply(this,arguments)}(p._delegate,c,d))})()}linkWithPopup(c){var d=this;return(0,w.Z)(function*(){return br(d.auth,function y_(f,c,d){return Df.apply(this,arguments)}(d._delegate,c,no))})()}linkWithRedirect(c){var d=this;return(0,w.Z)(function*(){return yield Qu(Zt(d.auth)),b_(d._delegate,c,no)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var d=this;return(0,w.Z)(function*(){return br(d.auth,Zg(d._delegate,c))})()}reauthenticateWithPhoneNumber(c,d){return Zf(this.auth,function rs(f,c,d){return Nu.apply(this,arguments)}(this._delegate,c,d))}reauthenticateWithPopup(c){return br(this.auth,function __(f,c,d){return Ou.apply(this,arguments)}(this._delegate,c,no))}reauthenticateWithRedirect(c){var d=this;return(0,w.Z)(function*(){return yield Qu(Zt(d.auth)),is(d._delegate,c,no)})()}sendEmailVerification(c){return function Ia(f,c){return sn.apply(this,arguments)}(this._delegate,c)}unlink(c){var d=this;return(0,w.Z)(function*(){return yield function sb(f,c){return Eu.apply(this,arguments)}(d._delegate,c),d})()}updateEmail(c){return function Ts(f,c){return Ca((0,z.m9)(f),c,null)}(this._delegate,c)}updatePassword(c){return function zl(f,c){return Ca((0,z.m9)(f),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function If(f,c){return xa.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Yg(f,c){return Ji.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,d){return function Hl(f,c,d){return Gs.apply(this,arguments)}(this._delegate,c,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ss.USER_MAP=new WeakMap;const dc=Y;let z_=(()=>{class f{constructor(d,p){if(this.app=d,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:_}=d.options;dc(_,"invalid-api-key",{appName:d.name}),dc(_,"invalid-api-key",{appName:d.name});const v=typeof window<"u"?no:void 0;this._delegate=p.initialize({options:{persistence:Xu(_,d.name),popupRedirectResolver:v}}),this._delegate._updateErrorMap(zn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ss.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,p){!function jt(f,c,d){const p=Zt(f);Y(p._canInitEmulator,p,"emulator-config-failed"),Y(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const _=!!d?.disableWarnings,v=Ml(c),{host:I,port:M}=function Jw(f){const c=Ml(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!d)return{host:"",port:null};const p=d[2].split("@").pop()||"",_=/^(\[[^\]]+\])(:|$)/.exec(p);if(_){const v=_[1];return{host:v,port:Gh(p.substr(v.length+1))}}{const[v,I]=p.split(":");return{host:v,port:Gh(I)}}}(c);p.config.emulator={url:`${v}//${I}${null===M?"":`:${M}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:I,port:M,protocol:v.replace(":",""),options:Object.freeze({disableWarnings:_})}),_||function eb(){function f(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}(this._delegate,d,p)}applyActionCode(d){return function Kg(f,c){return Ea.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return Qg(this._delegate,d)}confirmPasswordReset(d,p){return function ni(f,c,d){return Cu.apply(this,arguments)}(this._delegate,d,p)}createUserWithEmailAndPassword(d,p){var _=this;return(0,w.Z)(function*(){return br(_._delegate,function qe(f,c,d){return Vt.apply(this,arguments)}(_._delegate,d,p))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function $l(f,c){return Tu.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function wa(f,c){const d=bs.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,w.Z)(function*(){dc(to(),d._delegate,"operation-not-supported-in-this-environment");const p=yield function xf(f,c){return Xl.apply(this,arguments)}(d._delegate,no);return p?br(d._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function Na(f,c){Zt(f)._logFramework(c)}(this._delegate,d)}onAuthStateChanged(d,p,_){const{next:v,error:I,complete:M}=Yu(d,p,_);return this._delegate.onAuthStateChanged(v,I,M)}onIdTokenChanged(d,p,_){const{next:v,error:I,complete:M}=Yu(d,p,_);return this._delegate.onIdTokenChanged(v,I,M)}sendSignInLinkToEmail(d,p){return function jl(f,c,d){return Ln.apply(this,arguments)}(this._delegate,d,p)}sendPasswordResetEmail(d,p){return function Er(f,c,d){return qs.apply(this,arguments)}(this._delegate,d,p||void 0)}setPersistence(d){var p=this;return(0,w.Z)(function*(){let _;switch(function Oa(f,c){cc(Object.values(Jn).includes(c),f,"invalid-persistence-type"),(0,z.b$)()?cc(c!==Jn.SESSION,f,"unsupported-persistence-type"):(0,z.UG)()?cc(c===Jn.NONE,f,"unsupported-persistence-type"):j_()?cc(c===Jn.NONE||c===Jn.LOCAL&&(0,z.hl)(),f,"unsupported-persistence-type"):cc(c===Jn.NONE||Hb(),f,"unsupported-persistence-type")}(p._delegate,d),d){case Jn.SESSION:_=ko;break;case Jn.LOCAL:_=(yield Qe(Aa)._isAvailable())?Aa:ns;break;case Jn.NONE:_=rn;break;default:return Ct("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(_)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return br(this._delegate,function qg(f){return vu.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return br(this._delegate,wu(this._delegate,d))}signInWithCustomToken(d){return br(this._delegate,function ab(f,c){return $t.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,p){return br(this._delegate,function Mi(f,c,d){return wu((0,z.m9)(f),Yh.credential(c,d)).catch(function(){var p=(0,w.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&lt(f),_});return function(_){return p.apply(this,arguments)}}())}(this._delegate,d,p))}signInWithEmailLink(d,p){return br(this._delegate,function yn(f,c,d){return Yi.apply(this,arguments)}(this._delegate,d,p))}signInWithPhoneNumber(d,p){return Zf(this._delegate,function p_(f,c,d){return Ef.apply(this,arguments)}(this._delegate,d,p))}signInWithPopup(d){var p=this;return(0,w.Z)(function*(){return dc(to(),p._delegate,"operation-not-supported-in-this-environment"),br(p._delegate,function g_(f,c,d){return Tf.apply(this,arguments)}(p._delegate,d,no))})()}signInWithRedirect(d){var p=this;return(0,w.Z)(function*(){return dc(to(),p._delegate,"operation-not-supported-in-this-environment"),yield Qu(p._delegate),bb(p._delegate,d,no)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function fn(f,c){return pe.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return f.Persistence=Jn,f})();function Yu(f,c,d){let p=f;"function"!=typeof f&&({next:p,error:c,complete:d}=f);const _=p;return{next:I=>_(I&&Ss.getOrCreate(I)),error:c,complete:d}}function Xu(f,c){const d=function uc(f,c){const d=H_();if(!d)return[];const p=Fn(si,f,c);switch(d.getItem(p)){case Jn.NONE:return[rn];case Jn.LOCAL:return[Aa,ko];case Jn.SESSION:return[ko];default:return[]}}(f,c);if(typeof self<"u"&&!d.includes(Aa)&&d.push(Aa),typeof window<"u")for(const p of[ns,ko])d.includes(p)||d.push(p);return d.includes(rn)||d.push(rn),d}class Qf{constructor(){this.providerId="phone",this._delegate=new Vn(Gb(Oe.Z.auth()))}static credential(c,d){return Vn.credential(c,d)}verifyPhoneNumber(c,d){return this._delegate.verifyPhoneNumber(c,d)}unwrap(){return this._delegate}}Qf.PHONE_SIGN_IN_METHOD=Vn.PHONE_SIGN_IN_METHOD,Qf.PROVIDER_ID=Vn.PROVIDER_ID;const hc=Y;class Kb{constructor(c,d,p=Oe.Z.app()){var _;hc(null===(_=p.options)||void 0===_?void 0:_.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new gb(p.auth(),c,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Qb(f){f.INTERNAL.registerComponent(new dn.wA("auth-compat",c=>{const d=c.getProvider("app-compat").getImmediate(),p=c.getProvider("auth");return new z_(d,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Yh,FacebookAuthProvider:ei,GithubAuthProvider:_t,GoogleAuthProvider:Ri,OAuthProvider:Cs,SAMLAuthProvider:Bl,PhoneAuthProvider:Qf,PhoneMultiFactorGenerator:Jx,RecaptchaVerifier:Kb,TwitterAuthProvider:Qi,Auth:z_,AuthCredential:ws,Error:z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),f.registerVersion("@firebase/auth-compat","0.5.0")}(Oe.Z)},861:(ys,$n,ze)=>{function w(z,Fe,gt,Jt,dn,Hn,st){try{var J=z[Hn](st),ae=J.value}catch(we){return void gt(we)}J.done?Fe(ae):Promise.resolve(ae).then(Jt,dn)}function Oe(z){return function(){var Fe=this,gt=arguments;return new Promise(function(Jt,dn){var Hn=z.apply(Fe,gt);function st(ae){w(Hn,Jt,dn,st,J,"next",ae)}function J(ae){w(Hn,Jt,dn,st,J,"throw",ae)}st(void 0)})}}ze.d($n,{Z:()=>Oe})},582:(ys,$n,ze)=>{function Fe(V,H){var j={};for(var W in V)Object.prototype.hasOwnProperty.call(V,W)&&H.indexOf(W)<0&&(j[W]=V[W]);if(null!=V&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(W=Object.getOwnPropertySymbols(V);ee<W.length;ee++)H.indexOf(W[ee])<0&&Object.prototype.propertyIsEnumerable.call(V,W[ee])&&(j[W[ee]]=V[W[ee]])}return j}function we(V,H,j,W){return new(j||(j=Promise))(function($,fe){function dt(pt){try{De(W.next(pt))}catch(tn){fe(tn)}}function _e(pt){try{De(W.throw(pt))}catch(tn){fe(tn)}}function De(pt){pt.done?$(pt.value):function ee($){return $ instanceof j?$:new j(function(fe){fe($)})}(pt.value).then(dt,_e)}De((W=W.apply(V,H||[])).next())})}function Gt(V){return this instanceof Gt?(this.v=V,this):new Gt(V)}function Ct(V,H,j){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,W=j.apply(V,H||[]),$=[];return ee={},fe("next"),fe("throw"),fe("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function fe(Ut){W[Ut]&&(ee[Ut]=function(ir){return new Promise(function(kn,yr){$.push([Ut,ir,kn,yr])>1||dt(Ut,ir)})})}function dt(Ut,ir){try{!function _e(Ut){Ut.value instanceof Gt?Promise.resolve(Ut.value.v).then(De,pt):tn($[0][2],Ut)}(W[Ut](ir))}catch(kn){tn($[0][3],kn)}}function De(Ut){dt("next",Ut)}function pt(Ut){dt("throw",Ut)}function tn(Ut,ir){Ut(ir),$.shift(),$.length&&dt($[0][0],$[0][1])}}function Pr(V){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,H=V[Symbol.asyncIterator];return H?H.call(V):(V=function It(V){var H="function"==typeof Symbol&&Symbol.iterator,j=H&&V[H],W=0;if(j)return j.call(V);if(V&&"number"==typeof V.length)return{next:function(){return V&&W>=V.length&&(V=void 0),{value:V&&V[W++],done:!V}}};throw new TypeError(H?"Object is not iterable.":"Symbol.iterator is not defined.")}(V),j={},W("next"),W("throw"),W("return"),j[Symbol.asyncIterator]=function(){return this},j);function W($){j[$]=V[$]&&function(fe){return new Promise(function(dt,_e){!function ee($,fe,dt,_e){Promise.resolve(_e).then(function(De){$({value:De,done:dt})},fe)}(dt,_e,(fe=V[$](fe)).done,fe.value)})}}}ze.d($n,{FC:()=>Ct,KL:()=>Pr,_T:()=>Fe,mG:()=>we,qq:()=>Gt}),"function"==typeof SuppressedError&&SuppressedError}},ys=>{ys(ys.s=455)}]);